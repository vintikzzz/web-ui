{"version":3,"sources":["webpack:///./ui/src/lib/ext.js","webpack:///./ui/src/lib/mediaelement-plugins/logo.js","webpack:///./ui/src/lib/mediaelement-plugins/browse.js","webpack:///./ui/src/lib/analytics.js","webpack:///./ui/src/lib/mediaelement-plugins/chromecast/player.js","webpack:///./ui/src/lib/mediaelement-plugins/chromecast.js","webpack:///./ui/src/md/DMCA.md","webpack:///./ui/src/lib/mediaelement-plugins/embed.js","webpack:///./ui/src/lib/store/mutationTypes.js","webpack:///./ui/src/lib/mediaelement-plugins/continue.js","webpack:///./ui/src/lib/mediaelement-plugins/advancedtracks.js","webpack:///./ui/src/lib/mediaelement-plugins/captions.js","webpack:///./ui/src/lib/store/caption.js","webpack:///./ui/src/lib/mediaelement-plugins/availableprogress.js","webpack:///./ui/src/lib/registry.js","webpack:///./ui/src/lib/router.js","webpack:///./ui/src/lib/store/helpers.js","webpack:///./ui/src/lib/store/state.js","webpack:///./ui/src/lib/store/viewModeTypes.js","webpack:///./ui/src/lib/store/mutations.js","webpack:///./ui/src/lib/store/fileUtils.js","webpack:///./ui/src/lib/store/getters.js","webpack:///./ui/src/lib/relevantTrack.js","webpack:///./ui/src/lib/stoplistCheck.js","webpack:///./ui/src/lib/store/stringToTorrent.js","webpack:///./ui/src/lib/store/arrayToText.js","webpack:///./ui/src/lib/store/actions.js","webpack:///./ui/src/lib/store/modules/hls.js","webpack:///./ui/src/lib/store/modules/player.js","webpack:///./ui/src/lib/langs.js","webpack:///./ui/src/lib/i18n.js","webpack:///./ui/src/lib/markdown.js","webpack:///./ui/src/index.js","webpack:///./ui/src/lib/store.js","webpack:///./ui/src/lib/clientDb.js","webpack:///./ui/src/lib/mediaelement-plugins/download.js","webpack:///./ui/src/lib/message.js","webpack:///./ui/src/real_client.js","webpack:///./ui/src/lib/store/fileToTorrent.js","webpack:///./ui/src/lib/mediaelement-plugins/settings.js","webpack:///./ui/src/lib/store/playerStatusTypes.js","webpack:///./ui/src/lib/langRoutes.js","webpack:///./ui/src/lib/adblock.js","webpack:///./ui/src/lib/langLinks.js","webpack:///./ui/src/lib/mediaelement-plugins/error.js","webpack:///./ui/src/lib/piecesToSegments.js"],"names":["debug","require","Ext","init","Promise","resolve","reject","window","__webtorInjected","addEventListener","event","source","data","webtorInjected","downloadId","this","torrent","ab","Uint8Array","buffer","Buffer","byteLength","view","i","length","parseTorrent","infoHash","e","postMessage","createExt","Object","assign","MediaElementPlayer","prototype","player","controls","layers","route","options","logoButton","document","createElement","className","classPrefix","innerHTML","fullPath","container","appendChild","store","state","getters","dispatch","currentVideoFiles","browseLayer","browseContainer","style","width","height","playLayer","querySelector","insertBefore","registry","buildVue","el","render","h","Browse","on","hide","display","show","zIndex","play","analytics","id","appId","appVersion","appName","url","s","gtag","dataLayer","push","arguments","type","async","src","body","Date","ChromecastPlayer","constructor","controller","media","t","endedMedia","cast","framework","RemotePlayerEventType","IS_PAUSED_CHANGED","paused","pause","IS_MUTED_CHANGED","setMuted","isMuted","volume","IS_MEDIA_LOADED_CHANGED","mejs","Utils","createEvent","dispatchEvent","VOLUME_LEVEL_CHANGED","volumeLevel","DURATION_CHANGED","CURRENT_TIME_CHANGED","getCurrentTime","getDuration","setTimeout","load","isPaused","value","originalNode","readyState","setCurrentTime","setVolume","getVolume","setSrc","getSrc","currentTime","seek","getOriginalDuration","setVolumeLevel","playOrPause","castSession","CastContext","getInstance","getCurrentSession","tracks","children","counter","total","child","tag","tagName","toLowerCase","getAttribute","chrome","Track","TrackType","TEXT","trackContentId","absolutizeUrl","trackContentType","subtype","TextTrackType","SUBTITLES","name","language","customData","mediaInfo","MediaInfo","textTrackStyle","TextTrackStyle","metadata","GenericMediaMetadata","streamType","StreamType","Live","hlsSegmentFormat","duration","title","subtitle","poster","images","request","LoadRequest","loadMedia","then","tracksInfo","EditTracksInfoRequest","getMediaSession","editTracksInfo","console","error","log","_getErrorMessage","muteOrUnmute","description","message","code","ErrorCode","API_NOT_INITIALIZED","CANCEL","CHANNEL_ERROR","EXTENSION_MISSING","INVALID_PARAMETER","RECEIVER_UNAVAILABLE","SESSION_ERROR","TIMEOUT","isAvailable","_initializeCastPlayer","castButton","context","session","setOptions","receiverApplicationId","DEFAULT_MEDIA_RECEIVER_APP_ID","autoJoinPolicy","AutoJoinPolicy","PAGE_SCOPED","androidReceiverCompatible","remotePlayer","RemotePlayer","remotePlayerController","RemotePlayerController","IS_CONNECTED_CHANGED","_switchToCastPlayer","bind","endSession","proxy","isConnected","_setupCastPlayer","_setDefaultPlayer","loadedChromecast","indexOf","getSessionState","DefaultPlayer","currentMediaTime","module","exports","embedButton","addControlElement","embedLayer","embedContainer","toggle","Settings","close","SET_TORRENT_SUCCESS","SET_PWD_SUCCESS","SET_FILE_SUCCESS","SET_SOURCE","SET_PLAYER_STATUS_SUCCESS","SET_PLAYER_FILE_PATH_SUCCESS","SET_PLAYER_SOURCE_URL_SUCCESS","SET_TORRENT_FAILURE","CLEAR_TORRENT_LOAD_ERROR","SET_STAT_SUCCESS","SET_LOAD_STATE","SET_LOAD_STATE_SUCCESS","SET_LOAD_STATE_FAILURE","SET_DELIVERY_FAILURE","CLEAR_DELIVERY_FAILURE","SET_DELIVERY_TOKEN","SET_DOWNLOAD_ID","SET_LANG","SET_USER_LANG","SET_ABUSED","SET_MEDIA_INFO","SET_PLAYER_TIME","SET_CURRENT_DIR_FILE_STATES","SET_FILE_STATE","SET_RECENT_TORRENTS","SET_RECENT_TORRENT","SET_DOWNLOAD_PATH","SET_ADBLOCK_ENABLED","SET_VIEW_MODE","SET_THEME","SET_EXTERNAL_FEATURES","SET_EXTERNAL_SUBTITLES","SET_ATTACHED_TRACKS","SET_EXTERNAL_POSTER","SET_EXTERNAL_CONTROLS","SET_AUTOPLAY","SET_CAPTION","SET_PLAYER_CONTROLS_SHOWN","SET_PLAYER_FULLSCREEN","SET_HEADER","SET_EXTERNAL_TITLE","SET_WIDTH","SET_HEIGHT","SET_IMDBID","SET_COMPLETED_PIECES","CHANGE_CAPTION_SIZE","SET_USER_SETTINGS","SET_ADS_INJECTED","SET_PLAYER_NATIVE_FULLSCREEN","SET_NEW_POSITION","SET_SEEDER","SET_ZIP_DOWNLOAD","SET_LAST_TIME","SET_FIRST_PLAY","SET_IS_CACHED","SET_NAME","SET_DOWNLOAD_STAT","DROP_DOWNLOAD_STAT","SET_DOWNLOAD_TYPE","UPDATE_WINDOW_WIDTH","SET_INITED","SET_PROGRESS","SET_API_UNREACHABLE","time","lock","apply","continueLayer","continueContainer","hideAndPlay","restartWatch","continueWatch","Continue","props","tracksButton","tracksLayer","tracksContainer","Tracks","captionsLayer","captionsContainer","firstChild","Captions","retryFetch","fetch","retries","retryDelay","attempt","response","Math","pow","retryOn","status","getHLSFragments","srcUrl","res","text","parentUrl","substring","lastIndexOf","fragments","lines","split","num","fragment","ended","l","m","match","parseFloat","undefined","content","f","prom","start","convertSMPTEtoSeconds","SMPTE","TypeError","decimalLen","replace","secs","multiplier","reverse","Number","toFixed","parse","str","exec","trackText","$","filter","querySelectorAll","styleNode","getElementById","attr","entries","styles","removeAttribute","attributes","_temp","stop","eq","_style","trim","parseDFXP","pattern","timecode","identifier","settings","parseWebVTT","sanitize","html","div","scripts","getElementsByTagName","remove","allElements","n","attributesObj","Array","slice","call","j","startsWith","searchTrackPosition","mid","lo","hi","BasicSource","getEntry","HLSSource","fetching","entriesByFragment","lastTime","lastIndex","lookAhead","throttle","trailing","findFragment","end","temp","concat","importEntries","preload","loadFragments","makeBasicSource","getCaptionSource","decodeURIComponent","atob","map","c","charCodeAt","toString","join","makeHLSSource","slider","self","AvailabeProgress","Vue","use","VueRouter","routes","addLangRoutes","path","component","md5","randomId","prefix","now","clean","cleanState","pwd","file","cleanPlayerTrack","track","href","processSubtitles","subs","sort","a","b","srclang","same","label","y","idx","parseInt","user","deb","i18n","router","ssr","locales","inited","windowWidth","progress","features","p2pProgress","fullscreen","subtitles","continue","playpause","timeline","chromecast","browse","download","captions","embed","autoSubtitles","isCached","zipDownload","adsInjected","completedPieces","imdbId","autoplay","firstPlay","playerControlsShown","playerFullScreen","playerNativeFullScreen","caption","captionSize","externalSubtitles","externalPoster","externalTitle","header","adblock","apiUnreachable","viewMode","theme","version","VERSION","baseURL","sponsorURL","authURL","userID","downloadID","downloadPath","fileHistory","playerStatus","IDLE","playerFilePath","playerSourceUrl","wrongFormat","deliveryFailure","loadState","deliveryToken","abused","stats","errors","loadError","lang","locale","userLang","normalized","fallbackLocale","fallbackLang","currentDirFileState","recentTorrents","newPosition","seeder","attachedTracks","downloadStats","downloadType","innerWidth","val","k","mode","set","p","delete","alterSource","SEEKING","ENDED","token","states","torrents","ls","tree","addBranch","parts","part","shift","files","pathParts","pwdParts","currentDir","pwdPart","pop","upPath","item","localeCompare","pathParse","sdk","config","gtagDimensions","fileExt","deliveryType","mediaType","isAutoplay","isAdblock","isSponsor","filePath","isEmbedded","gtagDownloadDimensions","torrentFile","isVideoMode","isDownloadMode","iOS","includes","navigator","platform","userAgent","showShare","showLogo","showDownload","showStatus","selfHosted","preroll","isIndia","country","underPlayerBanner","warnBanner","shareLink","location","origin","magnetURI","toMagnetURI","blogUrl","backersUrl","technologyUrl","md","translations","messages","util","getMediaType","currentVideoFilesWithFriendlyNames","friendlyName","mm","padStart","currentPrimaryVideoFiles","v","currentInfoHash","isDemo","displayAds","ads","displayPopups","displayAdsense","adsense","displayAdfox","displayPrerolls","isWindows","deepLevel","getDeliveryType","fileName","ext","substr","downloadFile","base","downloadSize","role","sources","streamUrl","getMimeType","invoke","captionSource","openSubtitlesTracks","search","os","openSubtitles","send","o","format","getLang","kind","nativeName","hash","default","autoselect","hasLogin","patreon","apiUrl","normalizeLang","getRelevantTrackFromTracks","getRelevantTrackForLang","findKeyword","endsWith","findKeywordSpaces","findKeywordWithPipes","findKeywordWithPlus","found","stoplist","Url","arrayToText","obj","isArray","cloneDeep","loadScript","statsClient","adsenseInited","adScriptsInited","sha1","db","injectHash","injectCode","adblockEnabled","commit","changeCaptionSize","getMediaInfo","PLAYING","PAUSE","getCurrentDirFileStates","statesObj","zipUrl","downloadUrl","buf","toTorrentFile","blob","Blob","URL","createObjectURL","click","revokeObjectURL","payload","$gtag","downloadEvent","touch","abuse","newState","pieces","oldState","JSON","stringify","pushTorrent","videos","setRecentTorrent","userData","getFileState","u","query","makeQuery","audio","magnet","_","pullTorrent","pull","fetchTorrent","fromUrl","check","receiveOnce","sb","sandblaster","detect","sandboxed","catch","hasOwnProperty","dot","mergeLocaleMessage","newTorrent","r","currentRoute","stringToTorrent","torrentUrl","receive","torrent_url","omitEmpty","newTorrentMagnet","get","params","cache","cp","fileToTorrent","next","skip","err","stoplistCheck","metric1","getRelevantTrack","hls","forced","getSubtitleLang","updateFileState","all","updateWindowWidth","checkApi","debounce","ss","adScripts","setAttribute","createTextNode","s1","client","crossOrigin","slot","placeholder","slots","tries","checkExist","setInterval","offsetWidth","adsbygoogle","clearInterval","beforeEach","to","from","pathname","history","replaceState","page_title","page_path","pageview","getLangRoute","input","infohash","getUserSettings","updateUserSettings","getRecentTorrents","playerInited","prepareTrack","d","namespaced","strict","actions","root","mutations","setSubtitles","setAudio","availableDuration","dropSubtitles","rootState","rootGetters","setSubtitle","setError","setAvailableDuration","setDuration","clearSubtitleDrops","supported","Locales","langs","merge","VueI18n","createApp","api","routerMode","createRouter","best","pluralizationRules","choice","choicesLength","teen","endsWithOne","createI18n","Vuex","Store","modules","createStore","opts","app","App","MarkdownIt","defineProperty","args","renderInline","$t","markdown","Icon","Meta","LinkPlugin","LayoutPlugin","ButtonPlugin","NavbarPlugin","AlertPlugin","JumbotronPlugin","ButtonGroupPlugin","ButtonToolbarPlugin","FormInputPlugin","FormTextareaPlugin","FormSelectPlugin","FormPlugin","CardPlugin","ListGroupPlugin","ProgressPlugin","FormGroupPlugin","FormRadioPlugin","InputGroupPlugin","ModalPlugin","vClickOutside","Db","getDb","openDB","upgrade","oldVersion","fileStore","createObjectStore","keyPath","createIndex","makeFileKey","makeHashAndPwd","hashAndPwd","timestamp","put","getAllFromIndex","getAll","FakeDb","createDb","downloadButton","stopPropagation","preventDefault","inIframe","top","URLSearchParams","parent","func","removeEventListener","callback","referrer","__TOKEN__","__USER__","__CONFIG__","__INJECT_CODE__","__INJECT_HASH__","__INITIAL_STATE__","webtor","headers","ga","userLanguage","localStorage","onReady","$mount","reader","FileReader","arr","target","result","readAsArrayBuffer","settingsButton","settingsLayer","settingsContainer","PLAY","SEEKED","current","meta","routesWithLang","pathToRegexpOptions","checkAdBlock","adBlockEnabled","testAd","offsetHeight","getLangLinks","key","rel","hreflang","errorLayer","errorContainer","Error","piecesLength","progressLength","segments","curSegment","prevPiece","position"],"mappings":"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","file":"async_main_c1202e2b.f42eedd15169a7008db8.bundle.js","sourcesContent":["import parseTorrent from 'parse-torrent';\nconst debug = require('debug')('webtor:lib:ext');\nclass Ext {\n  init() {\n    return new Promise((resolve, reject) => {\n      if (window.__webtorInjected) return resolve();\n      debug('wait for initialization');\n      window.addEventListener('message', (event) => {\n        if (event.source != window)\n          return;\n\n        if (event.data.webtorInjected) return resolve();\n      });\n    });\n  }\n  async fetch(downloadId) {\n    await this.init();\n    debug('request downloadId=%d', downloadId);\n    return new Promise((resolve, reject) => {\n      window.addEventListener('message', (event) => {\n        if (event.source != window)\n          return;\n\n        if (event.data.torrent) {\n          const ab = new Uint8Array(event.data.torrent.data);\n          const buffer = new Buffer(ab.byteLength);\n          const view = new Uint8Array(ab);\n          for (let i = 0; i < buffer.length; ++i) {\n            buffer[i] = view[i];\n          }\n          try {\n          const torrent = parseTorrent(buffer);\n          debug('resolve torrent infoHash=%s', torrent.infoHash);\n          resolve(torrent);\n          } catch (e) {\n            reject(e);\n          }\n        }\n      });\n      window.postMessage({downloadId}, '*');\n    });\n  }\n}\nexport function createExt() {\n  return new Ext();\n}\n","// import registry from '../registry';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildlogo(player, controls, layers) {\n        // const store = this.options.store;\n        // let {getters, dispatch} = store;\n        const route = this.options.route;\n        const logoButton = document.createElement('div');\n        logoButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}logo-button`;\n        logoButton.innerHTML =\n            `<a title=\"Download at webtor.io\" class=\"banner\" target=\"_blank\" href=\"/#${route.fullPath + '&event=player-logo-click'}\"><span class=\"pre\">download at</span><span class=\"text\">webtor</span></a>`;\n        player.container.appendChild(logoButton);\n    },\n})","import Browse from '../../components/App/Show/Player/MediaElement/Browse.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildbrowse(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        if (getters.currentVideoFiles.length < 2) return;\n        player.browseLayer = document.createElement('div');\n        player.browseLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}browse`;\n        const browseContainer = document.createElement('div');\n        player.browseLayer.appendChild(browseContainer);\n        player.browseLayer.style.width  = '100%';\n        player.browseLayer.style.height = '100%';\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n\n        layers.insertBefore(player.browseLayer, playLayer);\n        registry.buildVue({\n            el: browseContainer,\n            render: (h) => h(Browse, {on: {\n                hide() {\n                    player.browseLayer.style.display = 'none';\n                },\n                show() {\n                    player.browseLayer.style.display = '';\n                },\n            }}),\n        });\n        player.browseLayer.style.zIndex = 2;\n        player.browseLayer.addEventListener('click', function() {\n            player.play();\n            player.browseLayer.style.display = 'none';\n        });\n    },\n})","export function analytics({id, appId, appVersion, appName}) {\n  const url = 'https://www.googletagmanager.com/gtag/js?id=' + id;\n  const s = document.createElement('script');\n  s.type = 'text/javascript';\n  s.async = true;\n  s.src = url;\n  document.body.appendChild(s);\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', id);\n};\n","'use strict';\n\nexport default class ChromecastPlayer {\n\n\t/**\n\t *\n\t * @param {cast.framework.RemotePlayer} player\n\t * @param {cast.framework.RemotePlayerController} controller\n\t * @param {MediaElement} media\n\t * @param {Object} options\n\t */\n\tconstructor (player, controller, media, options) {\n\t\tconst t = this;\n\t\tt.player = player;\n\t\tt.controller = controller;\n\t\tt.media = media;\n\t\tt.endedMedia = false;\n\n\t\t// Add event listeners for player changes which may occur outside sender app\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED, () => {\n\t\t\tif (t.paused) {\n\t\t\t\tt.pause();\n\t\t\t} else {\n\t\t\t\tt.play();\n\t\t\t}\n\t\t\tt.endedMedia = false;\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, () => {\n\t\t\tt.setMuted(t.player.isMuted);\n\t\t\tt.volume = 0;\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('loadedmetadata', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, () => {\n\t\t\tt.volume = t.player.volumeLevel;\n\t\t\tconst event = mejs.Utils.createEvent('volumechange', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('timeupdate', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('timeupdate', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\n\t\t\tif (t.getCurrentTime() >= t.getDuration()) {\n\t\t\t\tt.endedMedia = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst event = mejs.Utils.createEvent('ended', t.media);\n\t\t\t\t\tt.media.dispatchEvent(event);\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, () => {\n\t\t\tt.setMuted(t.player.isMuted)\n\t\t});\n\n\t\tt.load();\n\t\treturn t;\n\t}\n\n\tget paused() {\n\t\treturn this.player.isPaused;\n\t}\n\n\tset muted (value) {\n\t\tthis.setMuted(value);\n\t}\n\n\tget muted () {\n\t\treturn this.player.isMuted;\n\t}\n\n\tget ended () {\n\t\treturn this.endedMedia;\n\t}\n\n\tget readyState () {\n\t\treturn this.media.originalNode.readyState;\n\t}\n\n\tset currentTime (value) {\n\t\tthis.setCurrentTime(value);\n\t}\n\n\tget currentTime () {\n\t\treturn this.getCurrentTime();\n\t}\n\n\tget duration () {\n\t\treturn this.getDuration();\n\t}\n\n\tset volume (value) {\n\t\tthis.setVolume(value);\n\t}\n\n\tget volume () {\n\t\treturn this.getVolume();\n\t}\n\n\tset src (src) {\n\t\tthis.setSrc(src);\n\t}\n\n\tget src () {\n\t\treturn this.getSrc();\n\t}\n\n\tgetSrc () {\n\t\treturn this.media.originalNode.src;\n\t}\n\n\tsetSrc (value) {\n\t\tthis.media.originalNode.src = typeof value === 'string' ? value : value[0].src;\n\t\tthis.load();\n\t}\n\n\tsetCurrentTime (value) {\n\t\tthis.player.currentTime = value;\n\t\tthis.controller.seek();\n\t\tconst event = mejs.Utils.createEvent('timeupdate', this.media);\n\t\tthis.media.dispatchEvent(event);\n\t}\n\n\tgetCurrentTime () {\n\t\treturn this.player.currentTime;\n\t}\n\n\tgetOriginalDuration () {\n\t\treturn this.media.getDuration();\n\t}\n\n\tgetDuration () {\n\t\treturn this.getOriginalDuration();\n\t}\n\n\tsetVolume (value) {\n\t\tthis.player.volumeLevel = value;\n\t\tthis.controller.setVolumeLevel();\n\t\tconst event = mejs.Utils.createEvent('volumechange', this.media);\n\t\tthis.media.dispatchEvent(event);\n\t}\n\n\tgetVolume () {\n\t\treturn this.player.volumeLevel;\n\t}\n\n\tplay () {\n\t\tif (this.player.isPaused) {\n\t\t\tthis.controller.playOrPause();\n\t\t\tconst event = mejs.Utils.createEvent('play', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}\n\t}\n\n\tpause () {\n\t\tif (!this.player.isPaused) {\n\t\t\tthis.controller.playOrPause();\n\t\t\tconst event = mejs.Utils.createEvent('pause', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}\n\t}\n\n\tload () {\n\t\tconst t = this;\n\t\tconst castSession = cast.framework.CastContext.getInstance().getCurrentSession();\n        const tracks = [];\n        const children = t.media.originalNode.children;\n\n        let url = null;\n        let type = null;\n\n        let counter = 1;\n\n        for (let i = 0, total = children.length; i < total; i++) {\n            const child = children[i];\n            const tag = child.tagName.toLowerCase();\n\n            if (tag === 'track' && (child.getAttribute('kind') === 'subtitles' || child.getAttribute('kind') === 'captions')) {\n                const el = new chrome.cast.media.Track(counter, chrome.cast.media.TrackType.TEXT);\n                el.trackContentId = mejs.Utils.absolutizeUrl(child.getAttribute('src'));\n                el.trackContentType = 'text/vtt';\n                el.subtype = chrome.cast.media.TextTrackType.SUBTITLES;\n                el.name = child.getAttribute('label');\n                el.language = child.getAttribute('srclang');\n                el.customData = null;\n                tracks.push(el);\n                counter++;\n            }\n            if (tag === 'source' && url === null) {\n                url = child.getAttribute('src');\n                // type = child.getAttribute('type');\n            }\n        }\n        type = 'application/x-mpegurl';\n\n\t\tconst mediaInfo = new chrome.cast.media.MediaInfo(url, type);\n\n        mediaInfo.textTrackStyle = new chrome.cast.media.TextTrackStyle();\n        mediaInfo.tracks = tracks;\n\n\t\tmediaInfo.metadata = new chrome.cast.media.GenericMediaMetadata();\n\t\tmediaInfo.streamType = chrome.cast.media.StreamType.Live;\n        mediaInfo.hlsSegmentFormat = 'ts';\n\t\tmediaInfo.customData = null;\n\t\tmediaInfo.duration = null;\n\t\t// mediaInfo.currentTime = t.isLive ? Infinity : 0;\n\n\t\tif (t.media.originalNode.getAttribute('data-cast-title')) {\n\t\t\tmediaInfo.metadata.title = t.media.originalNode.getAttribute('data-cast-title');\n\t\t}\n\n\t\tif (t.media.originalNode.getAttribute('data-cast-description')) {\n\t\t\tmediaInfo.metadata.subtitle = t.media.originalNode.getAttribute('data-cast-description');\n\t\t}\n\n\t\tif (t.media.originalNode.getAttribute('poster') || t.media.originalNode.getAttribute('data-cast-poster')) {\n\t\t\tconst poster = t.media.originalNode.getAttribute('poster') || t.media.originalNode.getAttribute('data-cast-poster');\n\t\t\tmediaInfo.metadata.images = [\n\t\t\t\t{'url': mejs.Utils.absolutizeUrl(poster)}\n\t\t\t];\n\t\t}\n\n\t\tconst request = new chrome.cast.media.LoadRequest(mediaInfo);\n\n\t\tcastSession.loadMedia(request).then(() => {\n\t\t\t// Autoplay media in the current position\n\t\t\tconst currentTime = t.media.originalNode.currentTime;\n\t\t\tt.setCurrentTime(currentTime);\n\t\t\tt.play();\n\t\t\tif (tracks.length > 0) {\n\t\t\t\tconst tracksInfo = new chrome.cast.media.EditTracksInfoRequest([1]);\n\t\t\t\tcastSession.getMediaSession().editTracksInfo(tracksInfo, () => {\n\t\t\t\t}, (e) => {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst event = mejs.Utils.createEvent('play', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t}, (error) => {\n            console.log(error);\n\t\t\tt._getErrorMessage(error);\n\t\t});\n\t}\n\n\tsetMuted (value) {\n\t\tif (value === true && !this.player.isMuted) {\n\t\t\tthis.controller.muteOrUnmute();\n\t\t} else if (value === false && this.player.isMuted) {\n\t\t\tthis.controller.muteOrUnmute();\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tconst event = mejs.Utils.createEvent('volumechange', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}, 50);\n\t}\n\n\t_getErrorMessage (error) {\n\n\t\tconst description = error.description ? ` : ${error.description}` : '.';\n\n\t\tlet message;\n\n\t\tswitch (error.code) {\n\t\t\tcase chrome.cast.ErrorCode.API_NOT_INITIALIZED:\n\t\t\t\tmessage = `The API is not initialized${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.CANCEL:\n\t\t\t\tmessage = `The operation was canceled by the user${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.CHANNEL_ERROR:\n\t\t\t\tmessage = `A channel to the receiver is not available${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.EXTENSION_MISSING:\n\t\t\t\tmessage = `The Cast extension is not available${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.INVALID_PARAMETER:\n\t\t\t\tmessage = `The parameters to the operation were not valid${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:\n\t\t\t\tmessage = `No receiver was compatible with the session request${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.SESSION_ERROR:\n\t\t\t\tmessage = `A session could not be created, or a session was invalid${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.TIMEOUT:\n\t\t\t\tmessage = `The operation timed out${description}`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmessage = `Unknown error: ${error}`;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconsole.error(message);\n\t}\n}\n\nwindow.ChromecastPlayer = ChromecastPlayer;","import ChromecastPlayer from './chromecast/player';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildchromecast(player, controls, layers) {\n        const t = this;\n        window['__onGCastApiAvailable'] = function(isAvailable) {\n            if (isAvailable) {\n                t._initializeCastPlayer();\n            }\n        };\n        if (window.cast) {\n            t._initializeCastPlayer();\n        } else {\n            const s = document.createElement('script');\n            s.type = 'text/javascript';\n            s.src = 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1';\n            document.body.appendChild(s);\n        }\n        player.castButton = document.createElement('div');\n\t\tplayer.castButton.className = `${t.options.classPrefix}button ${t.options.classPrefix}cast-button`;\n\t\tplayer.castButton.innerHTML =\n\t\t\t`<google-cast-launcher id=\"castbutton\"></google-cast-launcher>`;\n        player.container.appendChild(player.castButton);\n    },\n\t/**\n\t *\n\t * @private\n\t */\n     _initializeCastPlayer () {\n\t\tconst t = this;\n\n\t\tconst\n\t\t\tcontext = cast.framework.CastContext.getInstance(),\n\t\t\tsession = context.getCurrentSession()\n\t\t;\n\n        context.setOptions({\n            receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n            autoJoinPolicy: chrome.cast.AutoJoinPolicy.PAGE_SCOPED,\n            androidReceiverCompatible: true,\n        });\n\n\t\tt.remotePlayer = new cast.framework.RemotePlayer();\n\t\tt.remotePlayerController = new cast.framework.RemotePlayerController(t.remotePlayer);\n\t\tt.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED, t._switchToCastPlayer.bind(this));\n\n\t\tif (session) {\n\t\t\tsession.endSession(true);\n\t\t\t// t._switchToCastPlayer();\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t_switchToCastPlayer () {\n\t\tconst t = this;\n\n\t\tif (t.proxy) {\n\t\t\tt.proxy.pause();\n\t\t}\n\t\tif (cast && cast.framework) {\n\t\t\tif (t.remotePlayer.isConnected) {\n\t\t\t\tt._setupCastPlayer();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tt._setDefaultPlayer();\n\t},\n\t/**\n\t *\n\t * @private\n\t */\n\t_setupCastPlayer () {\n\t\tconst\n\t\t\tt = this,\n\t\t\tcontext = cast.framework.CastContext.getInstance(),\n\t\t\tcastSession = context.getCurrentSession()\n\t\t;\n\n\t\tif (t.loadedChromecast === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tt.loadedChromecast = true;\n\n\t\tt.proxy = new ChromecastPlayer(t.remotePlayer, t.remotePlayerController, t.media, t.options);\n\n\t\t// If no Cast was setup correctly, make sure it is\n\t\tt.media.addEventListener('loadedmetadata', () => {\n\t\t\tif (['SESSION_ENDING', 'SESSION_ENDED', 'NO_SESSION'].indexOf(castSession.getSessionState()) === -1 &&\n\t\t\t\tt.proxy instanceof DefaultPlayer) {\n\t\t\t\tt.proxy.pause();\n\t\t\t\tt.proxy = new ChromecastPlayer(t.remotePlayer, t.remotePlayerController, t.media, t.options);\n\t\t\t}\n\t\t});\n\n\t\tt.media.addEventListener('timeupdate', () => {\n\t\t\tt.currentMediaTime = t.getCurrentTime();\n\t\t});\n\t}\n})","module.exports = \"<p>YOURSITE respects the intellectual property of others. YOURSITE takes matters of Intellectual Property very seriously and is committed to meeting the needs of content owners while helping them manage publication of their content online.</p>\\n<p>It should be noted that YOURSITE is a simple search engine of videos available at a wide variety websites.\\nIf you believe that your copyrighted work has been copied in a way that constitutes copyright infringement and is accessible on this site, you may notify our copyright agent, as set forth in the Digital Millennium Copyright Act of 1998 (DMCA). For your complaint to be valid under the DMCA, you must provide the following information when providing notice of the claimed copyright infringement:</p>\\n<p>A physical or electronic signature of a person authorized to act on behalf of the copyright owner Identification of the copyrighted work claimed to have been infringed\\nIdentification of the material that is claimed to be infringing or to be the subject of the infringing activity and that is to be removed\\nInformation reasonably sufficient to permit the service provider to contact the complaining party, such as an address, telephone number, and, if available, an electronic mail address\\nA statement that the complaining party &quot;in good faith believes that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or law&quot;\\nA statement that the &quot;information in the notification is accurate&quot;, and &quot;under penalty of perjury, the complaining party is authorized to act on behalf of the owner of an exclusive right that is allegedly infringed&quot;\\nThe above information must be submitted as a written, faxed or emailed notification to the following Designated Agent:</p>\\n<p>Attn: DMCA Office</p>\\n<p>Contact Us : http://www.watchdogsecurity.online</p>\\n<p>WE CAUTION YOU THAT UNDER FEDERAL LAW, IF YOU KNOWINGLY MISREPRESENT THAT ONLINE MATERIAL IS INFRINGING, YOU MAY BE SUBJECT TO HEAVY CIVIL PENALTIES. THESE INCLUDE MONETARY DAMAGES, COURT COSTS, AND ATTORNEYS FEES INCURRED BY US, BY ANY COPYRIGHT OWNER, OR BY ANY COPYRIGHT OWNER&#39;S LICENSEE THAT IS INJURED AS A RESULT OF OUR RELYING UPON YOUR MISREPRESENTATION. YOU MAY ALSO BE SUBJECT TO CRIMINAL PROSECUTION FOR PERJURY.</p>\\n<p>This information should not be construed as legal advice, for further details on the information required for valid DMCA notifications, see 17 U.S.C. 512(c)(3).</p>\\n\";","import Settings from '../../components/App/Show/Player/MediaElement/Embed.vue';\nimport registry from '../registry';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildembed(player, controls, layers) {\n        // const store = this.options.store;\n        // let {getters, dispatch} = store;\n        player.embedButton = document.createElement('div');\n        player.embedButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}embed-button`;\n        player.embedButton.innerHTML =\n            `<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\">&lt;<span class=\"slash\">/</span>&gt;</button>`;\n        this.addControlElement(player.embedButton, 'embed');\n        player.embedLayer = document.createElement('div');\n        player.embedLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}embed`;\n        const embedContainer = document.createElement('div');\n        player.embedLayer.appendChild(embedContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.embedLayer, playLayer);\n        player.embedLayer.style.width = '100%';\n        player.embedLayer.style.height = '100%';\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.embedLayer.style.display = 'none';\n            } else {\n                player.embedLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        registry.buildVue({\n            el: embedContainer,\n            render: (h) => h(Settings, {on: {\n                close: t,\n            }}),\n        });\n        player.embedLayer.style.display = 'none';\n        player.embedLayer.style.zIndex = 2;\n        player.embedButton.addEventListener('click', t);\n    },\n})","export const SET_TORRENT_SUCCESS = 'SET_TORRENT_SUCCESS';\nexport const SET_PWD_SUCCESS = 'SET_PWD_SUCCESS';\nexport const SET_FILE_SUCCESS = 'SET_FILE_SUCCESS';\nexport const SET_SOURCE = 'SET_SOURCE';\nexport const SET_PLAYER_STATUS_SUCCESS = 'SET_PLAYER_STATUS_SUCCESS';\nexport const SET_PLAYER_FILE_PATH_SUCCESS = 'SET_PLAYER_FILE_PATH_SUCCESS';\nexport const SET_PLAYER_SOURCE_URL_SUCCESS = 'SET_PLAYER_SOURCE_URL_SUCCESS';\nexport const SET_TORRENT_FAILURE = 'SET_TORRENT_FAILURE';\nexport const CLEAR_TORRENT_LOAD_ERROR = 'CLEAR_TORRENT_LOAD_ERROR';\nexport const SET_STAT_SUCCESS = 'SET_STAT_SUCCESS';\nexport const SET_LOAD_STATE = 'SET_LOAD_STATE';\nexport const SET_LOAD_STATE_SUCCESS = 'SET_LOAD_STATE_SUCCESS';\nexport const SET_LOAD_STATE_FAILURE = 'SET_LOAD_STATE_FAILURE';\nexport const SET_DELIVERY_FAILURE = 'SET_DELIVERY_FAILURE';\nexport const CLEAR_DELIVERY_FAILURE = 'CLEAR_DELIVERY_FAILURE';\nexport const SET_DELIVERY_TOKEN = 'SET_DELIVERY_TOKEN';\nexport const SET_DOWNLOAD_ID = 'SET_DOWNLOAD_ID';\nexport const SET_LANG = 'SET_LANG';\nexport const SET_USER_LANG = 'SET_USER_LANG';\nexport const SET_ABUSED = 'SET_ABUSED';\nexport const SET_MEDIA_INFO = 'SET_MEDIA_INFO';\nexport const SET_PLAYER_TIME = 'SET_PLAYER_TIME';\nexport const SET_CURRENT_DIR_FILE_STATES = 'SET_CURRENT_DIR_FILE_STATES';\nexport const SET_FILE_STATE = 'SET_FILE_STATE';\nexport const SET_RECENT_TORRENTS = 'SET_RECENT_TORRENTS';\nexport const SET_RECENT_TORRENT = 'SET_RECENT_TORRENT';\nexport const SET_AUDIO_SETTING = 'SET_AUDIO_SETTING';\nexport const SET_SUBTITLE_SETTING = 'SET_SUBTITLE_SETTING';\nexport const DROP_AUDIO_SETTING = 'DROP_AUDIO_SETTING';\nexport const DROP_SUBTITLE_SETTING = 'DROP_SUBTITLE_SETTING';\nexport const SET_ACTION = 'SET_ACTION';\nexport const SET_DOWNLOAD_PATH = 'SET_DOWNLOAD_PATH';\nexport const SET_ADBLOCK_ENABLED = 'SET_ADBLOCK_ENABLED';\nexport const SET_VIEW_MODE = 'SET_VIEW_MODE';\nexport const SET_THEME = 'SET_THEME';\nexport const SET_ID = 'SET_ID';\nexport const SET_EXTERNAL_FEATURES = 'SET_EXTERNAL_FEATURES';\nexport const SET_EXTERNAL_SUBTITLES = 'SET_EXTERNAL_SUBTITLES';\nexport const SET_ATTACHED_TRACKS = 'SET_ATTACHED_TRACKS';\nexport const SET_EXTERNAL_POSTER = 'SET_EXTERNAL_POSTER';\nexport const SET_EXTERNAL_CONTROLS = 'SET_EXTERNAL_CONTROLS';\nexport const SET_AUTOPLAY = 'SET_AUTOPLAY';\nexport const SET_CAPTION = 'SET_CAPTION';\nexport const SET_PLAYER_CONTROLS_SHOWN = 'SET_PLAYER_CONTROLS_SHOWN';\nexport const SET_PLAYER_FULLSCREEN = 'SET_PLAYER_FULLSCREEN';\nexport const SET_HEADER = 'SET_HEADER';\nexport const SET_EXTERNAL_TITLE = 'SET_EXTERNAL_TITLE';\nexport const SET_WIDTH = 'SET_WIDTH';\nexport const SET_HEIGHT = 'SET_HEIGHT';\nexport const SET_IMDBID = 'SET_IMDBID';\nexport const SET_COMPLETED_PIECES = 'SET_COMPLETED_PIECES';\nexport const CHANGE_CAPTION_SIZE = 'SET_CAPTION_SIZE';\nexport const SET_USER_SETTINGS = 'SET_USER_SETTINGS';\nexport const SET_ADS_INJECTED = 'SET_ADS_INJECTED';\nexport const SET_PLAYER_NATIVE_FULLSCREEN = 'SET_PLAYER_NATIVE_FULLSCREEN';\nexport const SET_NEW_POSITION = 'SET_NEW_POSITION';\nexport const SET_SEEDER = 'SET_SEEDER';\nexport const SET_ZIP_DOWNLOAD = 'SET_ZIP_DOWNLOAD';\nexport const SET_LAST_TIME = 'SET_LAST_TIME';\nexport const SET_FIRST_PLAY = 'SET_FIRST_PLAY';\nexport const SET_IS_CACHED = 'SET_IS_CACHED';\nexport const SET_NAME = 'SET_NAME';\nexport const SET_DOWNLOAD_STAT = 'SET_DOWNLOAD_STAT';\nexport const DROP_DOWNLOAD_STAT = 'DROP_DOWNLOAD_STAT';\nexport const SET_DOWNLOAD_TYPE = 'SET_DOWNLOAD_TYPE';\nexport const UPDATE_WINDOW_WIDTH = 'UPDATE_WINDOW_WIDTH';\nexport const SET_INITED = 'SET_INITED';\nexport const SET_PROGRESS = 'SET_PROGRESS';\nexport const SET_API_UNREACHABLE = 'SET_API_UNREACHABLE';\n","import Continue from '../../components/App/Show/Player/MediaElement/Continue.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildcontinue(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        if (state.time <= 60) {\n            player.currentTime = 0;\n            return;\n        }\n        const time = state.time; \n        const play = player.play;\n        let lock = true;\n        player.play = () => {\n            if (!lock) {\n                play.apply(player);\n            }\n        }\n        player.pause();\n        player.continueLayer = document.createElement('div');\n        player.continueLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}continue`;\n        const continueContainer = document.createElement('div');\n        player.continueLayer.appendChild(continueContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n\n        layers.insertBefore(player.continueLayer, playLayer);\n        // playLayer.style.display = 'none';\n        // let toggle = false;\n        function hideAndPlay() {\n            lock = false;\n            player.play();\n            player.continueLayer.style.display = 'none';\n        }\n        function restartWatch() {\n            if (!player) return;\n            player.currentTime = 0;\n            hideAndPlay();\n        }\n        function continueWatch() {\n            player.currentTime = time - 5;\n            hideAndPlay();\n        }\n        registry.buildVue({\n            el: continueContainer,\n            render: (h) => h(Continue, {\n                on: {\n                    continueWatch,\n                    restartWatch,\n                },\n                props: {\n                    time,\n                },\n            }),\n        });\n        player.continueLayer.style.zIndex = 2;\n        playLayer.style.display = 'none';\n    },\n})","import Tracks from '../../components/App/Show/Player/MediaElement/Tracks.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildadvancedtracks(player, controls, layers) {\n        player.tracksButton = document.createElement('div');\n\t\tplayer.tracksButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}captions-button`;\n\t\tplayer.tracksButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"mep_0-icon-captions\" class=\"mejs__icon-captions\" aria-hidden=\"true\" focusable=\"false\">\n            <use xlink:href=\"assets/mejs-controls.svg#icon-captions\"></use></svg></button>`;\n\t\tthis.addControlElement(player.tracksButton, 'tracks');\n        player.tracksLayer = document.createElement('div');\n        player.tracksLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}tracks`;\n        const tracksContainer = document.createElement('div');\n        player.tracksLayer.appendChild(tracksContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.tracksLayer, playLayer);\n        player.tracksLayer.style.width = '100%';\n        player.tracksLayer.style.height = '100%';\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.tracksLayer.style.display = 'none';\n            } else {\n                player.tracksLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        const show = () => {\n            player.tracksLayer.style.display = '';\n            toggle = true;\n        }\n        const close = () => {\n            player.tracksLayer.style.display = 'none';\n            toggle = false;\n        }\n        const v = registry.buildVue({\n            el: tracksContainer,\n            render: (h) => h(Tracks, {\n                props: {\n                    player: player,\n                },\n                on: {\n                    close,\n                    show,\n                }\n            }),\n        });\n        player.tracksLayer.style.display = 'none';\n        player.tracksLayer.style.zIndex = 2;\n        player.tracksButton.addEventListener('click', t);\n\n    },\n})","import Captions from '../../components/App/Show/Player/MediaElement/Tracks/Captions.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildcaptions(player, controls, layers) {\n\t\tplayer.captionsLayer = document.createElement('div');\n\t\tplayer.captionsLayer.className = `${this.options.classPrefix}captions-layer ${this.options.classPrefix}layer`;\n        const captionsContainer = document.createElement('div');\n        player.captionsLayer.appendChild(captionsContainer);\n\t\tlayers.insertBefore(player.captionsLayer, layers.firstChild);\n        player.captionsLayer.style.width = '100%';\n        player.captionsLayer.style.height = '100%';\n        player.captionsLayer.addEventListener('click', function() {\n            player.pause();\n        });\n        registry.buildVue({\n            el: captionsContainer,\n            render: (h) => h(Captions),\n        });\n    },\n})","const debug = require('debug')('webtor:lib:captions');\nimport throttle from 'lodash/throttle';\nconst debugFetch = function(url) {\n    debug('fetch caption url=%o', url);\n    return fetch(url);\n}\nconst retryFetch = require('fetch-retry')(debugFetch, {\n    retries: 5,\n    retryDelay: function(attempt, error, response) {\n        return Math.pow(2, attempt) * 1000;\n    },\n    retryOn: function(attempt, error, response) {\n        if (error !== null || response.status >= 500) {\n            debug('got captions error retry count=%o', attempt);\n            return true;\n        }\n    },\n});\nasync function getHLSFragments(srcUrl) {\n    const res = await(retryFetch(srcUrl));\n    const src = await res.text();\n    const parentUrl = srcUrl.substring(0, srcUrl.lastIndexOf( \"/\" ) + 1);\n    const fragments = [];\n    const lines = src.split(\"\\n\");\n    let current = 0;\n    let num = 0;\n    let fragment = {};\n    let ended = false;\n    for (const l of lines) {\n        const m = l.match('#EXTINF:([0-9\\.]+),');\n        if (l == '#EXT-X-ENDLIST') {\n            ended = true;\n        }\n        if (m) {\n            fragment.num = num;\n            fragment.length = parseFloat(m[1]);\n            num++;\n        }\n        if (l.match('^[^#]')) {\n            fragment.name = l;\n            fragment.src = parentUrl + fragment.name;\n        }\n        if (fragment.name !== undefined) {\n            fragments.push(fragment);\n            fragment.content = function(f) {\n                let prom = null;\n                return function() {\n                    if (prom === null) {\n                        prom = new Promise(async function(resolve, reject) {\n                            const res = await(retryFetch(f.src));\n                            const src = await res.text();\n                            resolve(src);\n                        });\n                    }\n                    return prom;\n                }\n            }(fragment);\n            fragment = {start: current};\n        }\n    }\n    return {fragments, ended};\n}\n\nfunction convertSMPTEtoSeconds(SMPTE) {\n\n\tif (typeof SMPTE !== 'string') {\n\t\tthrow new TypeError('Argument must be a string value');\n\t}\n\n\tSMPTE = SMPTE.replace(',', '.');\n\n\tconst decimalLen = ~SMPTE.indexOf('.') ? SMPTE.split('.')[1].length : 0;\n\n\tlet\n\t\tsecs = 0,\n\t\tmultiplier = 1\n\t;\n\n\tSMPTE = SMPTE.split(':').reverse();\n\n\tfor (let i = 0, total = SMPTE.length; i < total; i++) {\n\t\tmultiplier = 1;\n\t\tif (i > 0) {\n\t\t\tmultiplier = Math.pow(60, i);\n\t\t}\n\t\tsecs += Number(SMPTE[i]) * multiplier;\n\t}\n\treturn Number(secs.toFixed(decimalLen));\n}\n\nfunction parseDFXP(trackText) {\n    trackText = $(trackText).filter('tt');\n    const\n        container = trackText.firstChild,\n        lines = container.querySelectorAll('p'),\n        styleNode = trackText.getElementById(`${container.attr('style')}`),\n        entries = []\n    ;\n\n    let styles;\n\n    if (styleNode.length) {\n        styleNode.removeAttribute('id');\n        const attributes = styleNode.attributes;\n        if (attributes.length) {\n            styles = {};\n            for (let i = 0, total = attributes.length; i < total; i++) {\n                styles[attributes[i].name.split(\":\")[1]] = attributes[i].value;\n            }\n        }\n    }\n\n    for (let i = 0, total = lines.length; i < total; i++) {\n        let\n            style,\n            _temp = {\n                start: null,\n                stop: null,\n                style: null,\n                text: null\n            }\n        ;\n\n        if (lines.eq(i).attr('begin')) {\n            _temp.start = convertSMPTEtoSeconds(lines.eq(i).attr('begin'));\n        }\n        if (!_temp.start && lines.eq(i - 1).attr('end')) {\n            _temp.start = convertSMPTEtoSeconds(lines.eq(i - 1).attr('end'));\n        }\n        if (lines.eq(i).attr('end')) {\n            _temp.stop = convertSMPTEtoSeconds(lines.eq(i).attr('end'));\n        }\n        if (!_temp.stop && lines.eq(i + 1).attr('begin')) {\n            _temp.stop = convertSMPTEtoSeconds(lines.eq(i + 1).attr('begin'));\n        }\n\n        if (styles) {\n            style = '';\n            for (let _style in styles) {\n                style += `${_style}:${styles[_style]};`;\n            }\n        }\n        if (style) {\n            _temp.style = style;\n        }\n        if (_temp.start === 0) {\n            _temp.start = 0.200;\n        }\n        _temp.text = lines.eq(i).innerHTML.trim().replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n        entries.push(_temp);\n    }\n    return entries;\n}\n\nfunction parseWebVTT(trackText) {\n    const\n        lines = trackText.split(/\\r?\\n/),\n        entries = [],\n        pattern = /^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/\n    ;\n    let\n        timecode,\n        text,\n        identifier\n    ;\n\n    for (let i = 0, total = lines.length; i < total; i++) {\n        timecode = pattern.exec(lines[i]);\n\n        if (timecode && i < lines.length) {\n            if ((i - 1) >= 0 && lines[i - 1] !== '') {\n                identifier = lines[i - 1];\n            }\n            i++;\n            // grab all the (possibly multi-line) text that follows\n            text = lines[i];\n            i++;\n            while (lines[i] !== '' && i < lines.length) {\n                text = `${text}\\n${lines[i]}`;\n                i++;\n            }\n            text = text.trim().replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n            entries.push({\n                identifier: identifier,\n                start: (convertSMPTEtoSeconds(timecode[1]) === 0) ? 0.200 : convertSMPTEtoSeconds(timecode[1]),\n                stop: convertSMPTEtoSeconds(timecode[3]),\n                text: text,\n                settings: timecode[5]\n            });\n        }\n        identifier = '';\n    }\n    return entries;\n}\n\nfunction parse(str) {\n    return typeof str === 'string' && (/<tt\\s+xml/ig).exec(str) ?\n        parseDFXP(str) : parseWebVTT(str);\n}\n\nfunction sanitize(html) {\n    const div = document.createElement('div');\n    div.innerHTML = html;\n\n    // Remove all `<script>` tags first\n    const scripts = div.getElementsByTagName('script');\n    let i = scripts.length;\n    while (i--) {\n        scripts[i].remove();\n    }\n\n    // Loop the elements and remove anything that contains value=\"javascript:\" or an `on*` attribute\n    // (`onerror`, `onclick`, etc.)\n    const allElements = div.getElementsByTagName('*');\n    for (let i = 0, n = allElements.length; i < n; i++) {\n        const\n            attributesObj = allElements[i].attributes,\n            attributes = Array.prototype.slice.call(attributesObj)\n        ;\n\n        for (let j = 0, total = attributes.length; j < total; j++) {\n            if (attributes[j].name.startsWith('on') || attributes[j].value.startsWith('javascript')) {\n                allElements[i].remove();\n            } else if (attributes[j].name === 'style') {\n                allElements[i].removeAttribute(attributes[j].name);\n            }\n        }\n\n    }\n    return div.innerHTML;\n}\n\nfunction isDataURI(url) {\n    return url.match(/^data:(?:.+?\\/.+?)?(?:;.+?=.+?)*(?:;base64)?,.*$/);\n}\nfunction b64DecodeUnicode(str) {\n    // Going backwards: from bytestream, to percent-encoding, to original string.\n    return decodeURIComponent(atob(str).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n}\n\nfunction searchTrackPosition(tracks, currentTime) {\n    let\n        lo = 0,\n        hi = tracks.length - 1,\n        mid,\n        start,\n        stop\n    ;\n\n    while (lo <= hi) {\n        mid = ((lo + hi) >> 1);\n        start = tracks[mid].start;\n        stop = tracks[mid].stop;\n\n        if (currentTime >= start && currentTime < stop) {\n            return mid;\n        } else if (start < currentTime) {\n            lo = mid + 1;\n        } else if (start > currentTime) {\n            hi = mid - 1;\n        }\n    }\n\n    return -1;\n}\n\nclass BasicSource {\n    constructor(src) {\n        this.entries = parse(src);\n    }\n    getEntry(time) {\n        const i = searchTrackPosition(this.entries, time)\n        if (i > -1) return this.entries[i];\n        return null;\n    }\n}\n\nclass HLSSource {\n    constructor(src) {\n        this.src = src;\n        this.fragments = [];\n        this.fetching = false;\n        this.ended = false;\n        this.entries = [];\n        this.entriesByFragment = [];\n        this.lastTime = 0;\n        this.lastIndex = 0;\n        this.lookAhead = 60*5;\n        this.getHLSFragments = throttle(getHLSFragments, 5000, {\n            trailing: false,\n        });\n    }\n    findFragment(time) {\n        for (const f of this.fragments) {\n            if (time > f.start && time < f.end) {\n                return f;\n            }\n        }\n    }\n    async importEntries(f) {\n        if (f.num in this.entriesByFragment) return;\n        const c = await f.content();\n        const entries = parse(c);\n        this.entriesByFragment[f.num] = entries;\n        if (entries.length == 0) return;\n        let temp = [];\n        for (const e of this.entriesByFragment) {\n            if (e) temp = temp.concat(e);\n        }\n        this.entries = temp;\n    }\n    async preload(time) {\n        let i;\n        for (i = this.lastIndex; i < this.fragments.length && this.lastTime < time + this.lookAhead; i++) {\n            await this.importEntries(this.fragments[i]);\n            this.lastTime = this.entries.slice(-1)[0].start;\n        }\n        this.lastIndex = i;\n    }\n    async loadFragments(time) {\n        if (this.lastTime >= time + this.lookAhead) return;\n        if (!this.ended) {\n            const {fragments, ended} = await this.getHLSFragments(this.src);\n            this.fragments = fragments;\n            this.ended = ended;\n        }\n        await this.preload(time);\n    }\n    async getEntry(time) {\n        this.loadFragments(time);\n        const i = searchTrackPosition(this.entries, time)\n        if (i > -1) return this.entries[i];\n        return null;\n    }\n}\n\nfunction makeBasicSource(src) {\n    return new BasicSource(src);\n}\n\nfunction makeHLSSource(src) {\n    return new HLSSource(src);\n}\n\nasync function getCaptionSource(src) {\n    if (!src) {\n        return null;\n    } else if (isDataURI(src)) {\n        return makeBasicSource(b64DecodeUnicode(src.split(',')[1]));\n    } else if (src.match(/\\.(srt|vtt)/)) {\n        const res = await(retryFetch(src));\n        const data = await res.text();\n        return makeBasicSource(data);\n    } else if (src.match(/\\.m3u8/)) {\n        return makeHLSSource(src);\n    }\n}\n\nexport {getCaptionSource, sanitize};","import AvailabeProgress from '../../components/App/Show/Player/MediaElement/AvailabeProgress.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildavailableprogress(player, controls, layers) {\n        const store = this.options.store;\n        const slider = player.slider;\n        const el = document.createElement('span');\n        // el.className = `${this.options.classPrefix}time-available`;\n        slider.appendChild(el);\n        // player.errorLayer = document.createElement('div');\n        // player.errorLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}error`;\n        // const errorContainer = document.createElement('div');\n        // player.errorLayer.appendChild(errorContainer);\n        // player.errorLayer.style.width = '100%';\n        // player.errorLayer.style.height = '100%';\n        // player.errorLayer.style.display = 'none';\n        // const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // player.media.addEventListener('error', function(e) {\n        //     player.errorLayer.style.display = '';\n        // });\n        // layers.insertBefore(player.errorLayer, playLayer);\n        const self = this;\n        registry.buildVue({\n            el,\n            render: (h) => h(AvailabeProgress, {\n                props: {\n                    options: self.options,\n                }\n            }),\n        });\n    },\n})","const registry = {};\nexport default registry;","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\nimport {addLangRoutes} from './langRoutes';\nconst routes = addLangRoutes([\n  {path: '/', name: 'intro', component: () => import('../components/App/Intro.vue')},\n  {path: '/show', name: 'show', component: () => import('../components/App/Show.vue')},\n  {path: '/support', name: 'support', component: () => import('../components/App/Support.vue')},\n  {path: '/dmca', name: 'dmca', component: () => import('../components/App/DMCA.vue')},\n  {path: '/magnet-to-torrent', name: 'magnet2torrent', component: () => import('../components/App/Tools/Magnet2Torrent.vue')},\n  {path: '/torrent-to-magnet', name: 'torrent2magnet', component: () => import('../components/App/Tools/Torrent2Magnet.vue')},\n  {path: '/torrent-to-ddl', name: 'torrent2ddl', component: () => import('../components/App/Tools/Torrent2DDL.vue')},\n  {path: '/empty', name: 'empty', component: () => import('../components/App/Empty.vue')},\n  {path: '/:magnet(magnet\\:.*)', name: 'magnet-uri', component: () => import('../components/App/Show.vue')},\n  {path: '/:infohash([0-9a-fA-F]{40})', name: 'infohash', component: () => import('../components/App/Show.vue')},\n]);\n\nexport function createRouter({mode}) {\n  return new VueRouter({\n    mode,\n    routes,\n  });\n}\n","const md5 = require('md5');\n\nexport function randomId(prefix = '') {\n  return md5(prefix + Date.now().toString());\n}\n\nexport function clean(data) {\n  return Object.assign({}, data);\n}\n\nexport function cleanState({name, pwd, file, torrent}) {\n  return {\n    name,\n    pwd,\n    file,\n    torrent: torrent ? torrent.infoHash : null,\n  };\n}\n\nexport function cleanPlayerTrack(track) {\n  if (!track || !track.src) return track;\n  const res = Object.assign({}, track);\n  let href = '';\n  if (typeof res.src === 'object') {\n    href = res.src.href;\n  } else {\n      href = res.src;\n  }\n  res.src = href.split(\"?\")[0];\n  return res;\n}\n\nexport function processSubtitles(subs) {\n  subs = subs.sort((a, b) => {\n    a = a.srclang;\n    b = b.srclang;\n    if (a > b) return 1;\n    if (a < b) return -1;\n    return 0;\n  });\n  let same = [];\n  for (const i in subs) {\n    if (i == 0) continue;\n    if (subs[i].label == subs[i - 1].label) {\n      if (same.length == 0) {\n        same.push(subs[i - 1]);\n      }\n      same.push(subs[i]);\n    } else {\n      if (same.length > 0) {\n        for (const y in same) {\n          const idx = parseInt(y) + 1;\n          same[y].label = same[y].label + ' #' + idx;\n        }\n      }\n      same = [];\n    }\n  }\n  return subs;\n}","import {DEFAULT} from './viewModeTypes';\nimport {IDLE} from './playerStatusTypes';\nimport {randomId} from './helpers';\nexport default function({user, deb, i18n, router, ssr, locales}) {\n    return {\n        ssr,\n        inited: false,\n        windowWidth: 0,\n        name: null,\n        controls: true,\n        progress: 0,\n        features: {\n            p2pProgress: true,\n            title: true,\n            settings: true,\n            fullscreen: true,\n            subtitles: true,\n            continue: true,\n            playpause: true,\n            currentTime: true,\n            timeline: true,\n            duration: true,\n            volume: true,\n            chromecast: true,\n            browse: true,\n            download: true,\n            captions: true,\n            embed: true,\n            autoSubtitles: true,\n        },\n        isCached: false,\n        lastTime: null,\n        zipDownload: false,\n        adsInjected: false,\n        completedPieces: [],\n        width: null,\n        height: null,\n        imdbId: null,\n        autoplay: false,\n        firstPlay: true,\n        playerControlsShown: true,\n        playerFullScreen: false,\n        playerNativeFullScreen: false,\n        caption: null,\n        captionSize: 0,\n        externalSubtitles: [],\n        externalPoster: '',\n        externalTitle: null,\n        header: true,\n        adblock: false,\n        apiUnreachable: false,\n        viewMode: DEFAULT,\n        theme: null,\n        user,\n        version: VERSION,\n        subtitle: null,\n        time: 0,\n        mediaInfo: null,\n        debug: deb,\n        baseURL: 'https://webtor.io',\n        sponsorURL: 'https://www.patreon.com/bePatron?u=24145874',\n        authURL: '/auth/patreon',\n        userID: randomId(),\n        downloadID: null,\n        torrent: null,\n        file: null,\n        downloadPath: null,\n        pwd: '/',\n        fileHistory: null,\n        playerStatus: IDLE,\n        playerFilePath: null,\n        playerSourceUrl: null,\n        wrongFormat: false,\n        deliveryFailure: false,\n        loadState: false,\n        deliveryToken: null,\n        abused: false,\n        stats: {},\n        errors: {},\n        source: [],\n        loadError: false,\n        lang: i18n.locale,\n        userLang: locales.length > 0 && locales[0].normalized ? locales[0].normalized : i18n.fallbackLocale,\n        fallbackLang: i18n.fallbackLocale,\n        currentDirFileState: {},\n        recentTorrents: {},\n        newPosition: null,\n        seeder: null,\n        attachedTracks: [],\n        downloadStats: {},\n        downloadType: null,\n    };\n};","export const DEFAULT = 'default';\nexport const VIDEO = 'video';\nexport const DOWNLOAD = 'download';\n","import Vue from 'vue';\nimport {SET_TORRENT_SUCCESS, SET_PWD_SUCCESS,\n        SET_FILE_SUCCESS, SET_SOURCE, SET_PLAYER_STATUS_SUCCESS,\n        SET_PLAYER_FILE_PATH_SUCCESS, SET_TORRENT_FAILURE,\n        CLEAR_TORRENT_LOAD_ERROR, SET_STAT_SUCCESS,\n        SET_LOAD_STATE, SET_LOAD_STATE_SUCCESS, SET_DELIVERY_FAILURE,\n        CLEAR_DELIVERY_FAILURE, SET_DELIVERY_TOKEN, SET_LOAD_STATE_FAILURE,\n        SET_DOWNLOAD_ID, SET_LANG, SET_ABUSED, SET_MEDIA_INFO,\n        SET_PLAYER_TIME, SET_CURRENT_DIR_FILE_STATES, SET_FILE_STATE,\n        SET_RECENT_TORRENTS, SET_RECENT_TORRENT,\n        SET_ADBLOCK_ENABLED, SET_VIEW_MODE, SET_THEME,\n        SET_EXTERNAL_SUBTITLES, SET_EXTERNAL_POSTER, SET_AUTOPLAY, SET_CAPTION, SET_PLAYER_CONTROLS_SHOWN,\n        SET_PLAYER_FULLSCREEN, SET_HEADER, SET_EXTERNAL_TITLE, SET_HEIGHT, SET_WIDTH, SET_IMDBID,\n        SET_COMPLETED_PIECES, CHANGE_CAPTION_SIZE, SET_USER_SETTINGS, SET_PLAYER_SOURCE_URL_SUCCESS,\n        SET_ADS_INJECTED, SET_PLAYER_NATIVE_FULLSCREEN, SET_EXTERNAL_FEATURES, SET_EXTERNAL_CONTROLS,\n        SET_NEW_POSITION, SET_DOWNLOAD_PATH, SET_SEEDER, SET_ZIP_DOWNLOAD,\n        SET_ATTACHED_TRACKS, SET_LAST_TIME, SET_FIRST_PLAY, SET_IS_CACHED, SET_NAME,\n        SET_DOWNLOAD_STAT, DROP_DOWNLOAD_STAT, SET_DOWNLOAD_TYPE, UPDATE_WINDOW_WIDTH, SET_INITED, SET_PROGRESS,\n        SET_USER_LANG, SET_API_UNREACHABLE,\n       } from './mutationTypes';\nimport {PLAYING, PAUSE, SEEKING, ENDED, IDLE} from './playerStatusTypes';\nconst debug = require('debug')('webtor:lib:store');\nexport default {\n    [SET_INITED](state) {\n        state.inited = true;\n    },\n    [UPDATE_WINDOW_WIDTH](state) {\n        debug('update window width=%o', window.innerWidth);\n        state.windowWidth = window.innerWidth;\n    },\n    [SET_NAME](state, val) {\n        state.name = val;\n    },\n    [SET_PROGRESS](state, val) {\n        state.progress = val;\n    },\n    [SET_IS_CACHED](state, val) {\n        state.isCached = val;\n    },\n    [SET_ATTACHED_TRACKS](state, val) {\n        state.attachedTracks = val;\n    },\n    [CHANGE_CAPTION_SIZE](state, val) {\n        if (state.captionSize + val < 0) {\n            return;\n        }\n        state.captionSize = state.captionSize + val;\n    },\n    [SET_ZIP_DOWNLOAD](state, val) {\n        state.zipDownload = val;\n    },\n    [SET_ADS_INJECTED](state, val) {\n        state.adsInjected = val;\n    },\n    [SET_COMPLETED_PIECES](state, val) {\n        state.completedPieces = val;\n    },\n    [SET_WIDTH](state, val) {\n        state.width = val;\n    },\n    [SET_HEIGHT](state, val) {\n        state.height = val;\n    },\n    [SET_IMDBID](state, val) {\n        state.imdbId = val;\n    },\n    [SET_EXTERNAL_SUBTITLES](state, subtitles) {\n        state.externalSubtitles = subtitles;\n    },\n    [SET_HEADER](state, val) {\n        state.header = val;\n    },\n    [SET_EXTERNAL_TITLE](state, val) {\n        state.externalTitle = val;\n    },\n    [SET_EXTERNAL_FEATURES](state, val) {\n        const features = {};\n        for (const k in state.features) {\n            features[k] = state.controls;\n        }\n        state.features = Object.assign(features, val);\n    },\n    [SET_EXTERNAL_CONTROLS](state, val) {\n        state.controls = val;\n    },\n    [SET_AUTOPLAY](state, val) {\n        state.autoplay = val;\n    },\n    [SET_CAPTION](state, val) {\n        state.caption = val;\n    },\n    [SET_NEW_POSITION](state, val) {\n        state.newPosition = val;\n    },\n    [SET_PLAYER_CONTROLS_SHOWN](state, val) {\n        state.playerControlsShown = val;\n    },\n    [SET_PLAYER_FULLSCREEN](state, val) {\n        state.playerFullScreen = val;\n    },\n    [SET_PLAYER_NATIVE_FULLSCREEN](state, val) {\n        state.playerNativeFullScreen = val;\n    },\n    [SET_EXTERNAL_POSTER](state, poster) {\n        state.externalPoster = poster;\n    },\n    [SET_VIEW_MODE](state, mode) {\n        state.viewMode = mode;\n    },\n    [SET_THEME](state, theme) {\n        state.theme = theme;\n    },\n    [SET_ADBLOCK_ENABLED](state) {\n        state.adblock = true;\n    },\n    [SET_API_UNREACHABLE](state) {\n        state.apiUnreachable = true;\n    },\n    [SET_LOAD_STATE](state, text) {\n        state.loadState = text;\n    },\n    [SET_ABUSED](state) {\n        state.loadState = false;\n        state.abused = true;\n    },\n    [SET_LOAD_STATE_SUCCESS](state) {\n        state.loadState = false;\n        state.loadError = false;\n    },\n    [SET_LOAD_STATE_FAILURE](state) {\n        state.loadState = false;\n        state.loadError = true;\n    },\n    [SET_MEDIA_INFO](state, data) {\n        state.mediaInfo = data;\n    },\n    [SET_PLAYER_TIME](state, data) {\n        state.time = data;\n    },\n    [SET_FILE_STATE](state, data) {\n        Vue.set(state.currentDirFileState, data.file, data);\n    },\n    [SET_DOWNLOAD_STAT](state, {p, m}) {\n        Vue.set(state.downloadStats, p, m);\n    },\n    [DROP_DOWNLOAD_STAT](state, p) {\n        Vue.delete(state.downloadStats, p);\n    },\n    [SET_TORRENT_SUCCESS](state, torrent) {\n        if (state.torrent && torrent\n            && torrent.infoHash == state.torrent.infoHash) {\n            return;\n        }\n        state.torrent = torrent;\n        state.file = null;\n        state.pwd = '/';\n        state.source = null;\n        state.alterSource = null;\n        state.playerStatus = null;\n        state.playerFilePath = null;\n        state.wrongFormat = false;\n        state.loadError = false;\n        state.deliveryFailure = false;\n        state.stats = false;\n        state.errors = {};\n        if (state.torrent) {\n            state.abused = false;\n        }\n        state.mediaInfo = null;\n        state.playerStatus = IDLE;\n    },\n    [SET_PWD_SUCCESS](state, pwd) {\n        if (state.pwd == pwd) return;\n        if (!pwd) {\n            state.pwd = '/';\n        } else {\n            state.pwd = pwd;\n        }\n        state.file = null;\n        state.wrongFormat = false;\n        state.deliveryFailure = false;\n        state.playerStatus = IDLE;\n    },\n    [SET_DOWNLOAD_PATH](state, path) {\n        state.downloadPath = path;\n    },\n    [SET_DOWNLOAD_TYPE](state, type) {\n        state.downloadType = type;\n    },\n    [SET_FILE_SUCCESS](state, path) {\n        if (state.file == path) return;\n        state.file = path;\n        state.wrongFormat = false;\n        state.deliveryFailure = false;\n        state.mediaInfo = null;\n        state.caption = null;\n        state.playerStatus = IDLE;\n    },\n    [SET_LANG](state, lang) {\n        state.lang = lang;\n    },\n    [SET_USER_LANG](state, lang) {\n        state.userLang = lang;\n    },\n    [SET_DOWNLOAD_ID](state, id) {\n        state.downloadID = id;\n    },\n    [SET_SOURCE](state, source) {\n        // if (state.playerFilePath != state.filePath) {\n        //   state.playerFilePath = null;\n        // }\n        state.caption = null;\n        state.source = source;\n        state.playerFullScreen = false;\n        state.playerControlsShown = true;\n    },\n    [SET_PLAYER_STATUS_SUCCESS](state, status) {\n        state.playerStatus = status;\n        if (status == SEEKING || status == ENDED) {\n            state.lastTime = null;\n        }\n    },\n    [SET_LAST_TIME](state, time) {\n        state.lastTime = time;\n    },\n    [SET_PLAYER_FILE_PATH_SUCCESS](state, path) {\n        state.playerFilePath = path;\n    },\n    [SET_PLAYER_SOURCE_URL_SUCCESS](state, url) {\n        state.playerSourceUrl = url;\n    },\n    [SET_TORRENT_FAILURE](state) {\n        state.wrongFormat = true;\n    },\n    [SET_DELIVERY_FAILURE](state, { header: { path }, message, data }) {\n        Vue.set(state.errors, `/${path}`, message);\n        state.deliveryFailure = { message, data };\n    },\n    [CLEAR_TORRENT_LOAD_ERROR](state) {\n        state.wrongFormat = false;\n    },\n    [CLEAR_DELIVERY_FAILURE](state) {\n        state.deliveryFailure = false;\n    },\n    [SET_DELIVERY_TOKEN](state, token) {\n        state.deliveryToken = token;\n    },\n    [SET_STAT_SUCCESS](state, data) {\n        state.stats = data;\n    },\n    [SET_CURRENT_DIR_FILE_STATES](state, states) {\n        state.currentDirFileState = states;\n    },\n    [SET_RECENT_TORRENTS](state, torrents) {\n        state.recentTorrents = torrents;\n    },\n    [SET_USER_SETTINGS](state, settings) {\n        if (settings.captionSize) {\n            state.captionSize = settings.captionSize;\n        }\n        if (settings.theme && !state.theme) {\n            state.theme = settings.theme;\n        }\n    },\n    [SET_RECENT_TORRENT](state, data) {\n        Vue.set(state.recentTorrents, data.infoHash, data);\n    },\n    [SET_RECENT_TORRENT](state, data) {\n        Vue.set(state.recentTorrents, data.infoHash, data);\n    },\n    [SET_SEEDER](state, seeder) {\n        state.seeder = seeder;\n    },\n    [SET_FIRST_PLAY](state, val) {\n        state.firstPlay = val;\n    },\n};","export function ls(torrent, pwd, file = null) {\n  if (torrent == null) return [];\n  let tree = {};\n  const addBranch = (tree, parts, file) => {\n    if (parts.length == 0) return file;\n    const part = parts.shift();\n    if (tree[part] == undefined) {\n      tree[part] = addBranch({}, parts, file);\n    } else {\n      tree[part] = addBranch(tree[part], parts, file);\n    }\n    return tree;\n  };\n  for (let file of torrent.files) {\n    const pathParts = file.path.split('/');\n    tree = addBranch(tree, pathParts, file);\n  }\n  let pwdParts = pwd.substring(1).split('/');\n  if (pwdParts[0] == '') pwdParts = [];\n  let currentDir = tree;\n  for (let pwdPart of pwdParts) {\n    currentDir = currentDir[pwdPart];\n  }\n  const res = [];\n  if (!file) {\n    res.push({\n      name: '.',\n      type: 'dir',\n      path: '/',\n    });\n    pwdParts.pop();\n    let upPath = '/';\n    if (pwdParts.length > 0) {\n      upPath = '/' + pwdParts.join('/');\n    }\n    res.push({\n      name: '..',\n      type: 'dir',\n      path: upPath,\n    });\n  }\n  for (let t in currentDir) {\n    if (file && file != t) continue;\n    let item = {};\n    item.name = t;\n    if (pwd == '/') {\n      item.path = `/${t}`;\n    } else {\n      item.path = `${pwd}/${t}`;\n    }\n    if (currentDir[t].length !== undefined) {\n      item.type = 'file';\n      item.length = currentDir[t].length;\n    } else {\n      item.type = 'dir';\n    }\n    res.push(item);\n  }\n  return res.sort((a, b) => a.name.localeCompare(b.name));\n};\n","import {VIDEO, DOWNLOAD} from './viewModeTypes';\nimport {ls} from './fileUtils';\nconst pathParse = require('path-parse');\nimport {getCaptionSource} from './caption';\nconst md5 = require('md5');\nimport parseTorrent from 'parse-torrent';\nimport {clean, processSubtitles, randomId} from './helpers';\n\nexport default function ({i18n, sdk, message, config}) {\n    return {\n        gtagDimensions(state, getters) {\n            return {\n                'dimension1': getters.fileExt.replace(/^\\./, '').toLowerCase(), // Content Type\n                'dimension2': getters.deliveryType == 'transcode', // Content Transcoded?\n                'dimension3': getters.mediaType, // Content Format\n                'dimension4': getters.isAutoplay, // Autoplay?\n                'dimension5': state.file, // Content Name\n                'dimension6': state.torrent.infoHash, // Torrent Infohash\n                'dimension8': getters.isAdblock, // Adblock Enabled?\n                'dimension9': getters.isSponsor, // Is Sponsor?\n                'dimension10': getters.filePath, // Content Path\n                'dimension11': getters.isEmbedded, // Content Path\n            };\n        },\n        gtagDownloadDimensions(state, getters) {\n            return {\n                'dimension6': state.torrent.infoHash, // Torrent Infohash\n                'dimension8': getters.isAdblock, // Adblock Enabled?\n                'dimension9': getters.isSponsor, // Is Sponsor?\n            };\n        },\n        sdk: () => sdk,\n        torrentFile: (state) => ls(state.torrent, state.pwd, state.file)[0],\n        title: (state) => 'Webtor.io',\n        isEmbedded: (state, getters) => getters.isVideoMode || getters.isDownloadMode,\n        iOS() {\n            if (typeof window === 'undefined') return false;\n            return [\n              'iPad Simulator',\n              'iPhone Simulator',\n              'iPod Simulator',\n              'iPad',\n              'iPhone',\n              'iPod'\n            ].includes(window.navigator.platform)\n            // iPad on iOS 13 detection\n            || (window.navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n        },\n        showShare: (state, getters) => !getters.isEmbedded,\n        showLogo: (state, getters) => !getters.isEmbedded,\n        showDownload: (state, getters) => !getters.isEmbedded,\n        showStatus: (state, getters) => !getters.isEmbedded,\n        selfHosted: () => config.selfHosted,\n        isAutoplay: (state) => state.autoplay,\n        isVideoMode: (state) => state.viewMode == VIDEO,\n        isDownloadMode: (state) => state.viewMode == DOWNLOAD,\n        preroll: (state) => state.preroll,\n        isIndia: (state) => state.country == 'IN',\n        underPlayerBanner: (state) => state.underPlayerBanner,\n        warnBanner: (state) => state.warnBanner,\n        shareLink: (state) => {\n            return window.location.origin + '/' + state.torrent.infoHash;\n        },\n        magnetURI: (state) => {\n            return parseTorrent.toMagnetURI(state.torrent);\n        },\n        blogUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/post/`;\n        },\n        backersUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/backers/`;\n        },\n        technologyUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/technology/`;\n        },\n        metadata: (state) => {\n            const md = {};\n            if (state.userID) {\n                md['user-id'] = state.userID;\n            }\n            return md;\n        },\n        translations: (state) => i18n.messages,\n        ls: (state) => ls(state.torrent, state.pwd),\n        currentVideoFiles: (state, getters) => {\n            const res = [];\n            for (const f of getters.ls) {\n                if (sdk.util.getMediaType(f.name) == 'video') {\n                    res.push(f.name);\n                }\n            }\n            return res;\n        },\n        currentVideoFilesWithFriendlyNames: (state, getters) => {\n            const res = [];\n            for (const name of getters.currentVideoFiles) {\n                let friendlyName = pathParse(name).name;\n                if (friendlyName.match(/s\\d+/i) && friendlyName.match(/e\\d+/i)) {\n                    const mm = friendlyName.match(/e(\\d+)/i);\n                    const num = (parseInt(mm[1]) + '').padStart(2, '0');\n                    friendlyName = i18n.t('common.episode') + ' ' + num;\n                }\n                res.push({\n                    name,\n                    friendlyName,\n                });\n            }\n            return res;\n        },\n        currentPrimaryVideoFiles: (state, getters) => {\n            return getters.currentVideoFiles.filter((v) => !v.match(/sample/i));\n        },\n        currentInfoHash: (state) => {\n            return state.torrent ? state.torrent.infoHash : null;\n        },\n        isDemo: (state, getters) => {\n            return getters.currentInfoHash == '08ada5a7a6183aae1e09d831df6748d566095a10';\n        },\n        displayAds: (state, getters) => {\n            if (getters.isDemo) return false;\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            return true;\n        },\n        displayPopups: (state, getters) => {\n            return getters.displayAds;\n        },\n        displayAdsense: (state, getters) => {\n            if (config.adsense == false) return false;\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            if (getters.isEmbedded) return false;\n            return true;\n        },\n        displayAdfox: (state, getters) => {\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            if (getters.isEmbedded) return false;\n            return true;\n        },\n        displayPrerolls: (state, getters) => {\n            return false;\n            // return getters.displayAds && getters.mediaType == 'video';\n        },\n        isAdblock: (state) => {\n            return state.adblock;\n        },\n        isWindows: (state) => {\n            return navigator.platform.indexOf('Win') > -1;\n        },\n        currentDir: (state) => {\n            if (state.pwd == '/') return null;\n            return state.pwd.split('/').slice(-1).pop();\n        },\n        deepLevel: (state) => {\n            return state.pwd.split('/').length - 1;\n        },\n        deliveryType: (state) => {\n            return sdk.util.getDeliveryType(state.file);\n        },\n        mediaType: (state) => {\n            return sdk.util.getMediaType(state.file);\n        },\n        fileName: (state) => {\n            return pathParse(state.file).name;\n        },\n        fileExt: (state) => {\n            return pathParse(state.file).ext;\n        },\n        filePath: (state) => {\n            if (state.file == null) return state.pwd;\n            if (state.pwd == '/') {\n                return state.file;\n            } else {\n                return state.pwd.substr(1) + '/' + state.file;\n            }\n        },\n        downloadFile: (state) => {\n            if (!state.downloadPath) return null;\n            return pathParse(state.downloadPath).base;\n        },\n        downloadSize: (state) => {\n            let l = 0;\n            for (const f of state.torrent.files) {\n                if (('/' + f.path).startsWith(state.downloadPath)) {\n                    l += f.length;\n                }\n            }\n            return l;\n        },\n        isSponsor: (state) => {\n            if (!state.user) return false;\n            return state.user && state.user.role && state.user.role != 'NOBODY';\n        },\n        sources: async (state, getters) => {\n            const src = await state.seeder.streamUrl(getters.filePath, clean(getters.metadata));\n            // const src = new Url('https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8');\n            // const src = new Url('http://localhost:8080/index.m3u8');\n            const type = sdk.util.getMimeType(src);\n            const title = 'main';\n            return [{\n                src,\n                type,\n                title,\n            }];\n        },\n        poster: async (state, getters) => {\n            const md = clean(getters.metadata);\n            md.invoke = false;\n            if (state.externalPoster) {\n                return await sdk.ext.streamUrl(state.externalPoster, {}, md);\n            }\n            for (let f of state.torrent.files) {\n                if (sdk.util.getMediaType(f.name) == 'image' && f.name.startsWith(getters.fileName)) {\n                    return await state.seeder.streamUrl(f.path, md);\n                }\n            }\n            const videos = getters.currentPrimaryVideoFiles;\n            if (videos.length == 1) {\n                const files = getters.ls;\n                for (const f of files) {\n                    if (sdk.util.getMediaType(f.name) == 'image' && f.name.match(/poster/)) {\n                        return await state.seeder.streamUrl(f.path, md);\n                    }\n                }\n            }\n            return null;\n        },\n        captionSource(state) {\n            if (!state.player.subtitle) return null;\n            let src = state.player.subtitle.src;\n            if (!src) return null;\n            if (src.href) src = src.href;\n            return getCaptionSource(src);\n        },\n        openSubtitlesTracks: async (state, getters) => {\n            let tracks = [];\n            const search = {};\n            if (state.imdbId) {\n                search['imdb-id'] = state.imdbId;\n            }\n            const os = await state.seeder.openSubtitles(getters.filePath, Object.assign(clean(getters.metadata), search));\n            message.send('open subtitles', os);\n            for (const o of os) {\n                if (!['srt', 'vtt'].includes(o.format)) continue;\n                const lang = sdk.util.getLang(o.srclang)\n                tracks.push({\n                    kind: 'subtitles',\n                    label: lang.nativeName != \"\" ? lang.nativeName : o.label,\n                    srclang: o.srclang,\n                    src: o.src,\n                    hash: md5(o.hash + o.id),\n                });\n            }\n            tracks = processSubtitles(tracks);\n            return tracks;\n        },\n        async tracks(state, getters) {\n            let tracks = [];\n            if (state.player.subtitle) {\n                tracks = [state.player.subtitle];\n            } else {\n                tracks = state.attachedTracks;\n            }\n            let res = [];\n            for (const t of tracks) {\n                res.push(clean(t));\n            }\n            for (const t of res) {\n                if (state.player.subtitle && t.hash == state.player.subtitle.hash) {\n                    t.default = true;\n                    break;\n                } else if (t.autoselect) {\n                    t.default = true;\n                    break;\n                }\n            }\n            return res;\n        },\n        hasLogin() {\n            return config.patreon;\n        },\n        apiUrl() {\n            return config.sdk.apiUrl;\n        }\n    };\n};","function normalizeLang(lang) {\n    return lang.split('_')[0].toLowerCase();\n}\nfunction getRelevantTrackFromTracks(lang, tracks) {\n    lang = normalizeLang(lang);\n    for (const t of tracks) {\n        if (normalizeLang(t.srclang) == lang) {\n            return t;\n        }\n    }\n    return null;\n}\nasync function getRelevantTrackForLang({state, getters}, lang) {\n    let track = null;\n    track = getRelevantTrackFromTracks(lang, state.attachedTracks);\n    if (track) {\n        track.source = 'attached';\n    }\n    if (!track) {\n        const tracks = await getters.openSubtitlesTracks;\n        if (tracks) {\n            track = getRelevantTrackFromTracks(lang, tracks);\n            if (track) {\n                track.source = 'openSubtitles';\n            }\n        }\n    }\n    return track;\n}\nexport default async function getRelevantTrack(store) {\n    const {state} = store;\n    let track = null;\n    track = await getRelevantTrackForLang(store, state.userLang);\n    if (!track) {\n        track = await getRelevantTrackForLang(store, state.fallbackLang);\n    }\n    return track;\n}","const debug = require('debug')('webtor:lib:stoplistCheck');\nfunction findKeyword(k, s) {\n    return k == s || k.startsWith(s + \" \") || k.endsWith(\" \" + s) || k.includes(\" \" + s + \" \");\n}\n\nfunction findKeywordSpaces(k, s) {\n    return findKeyword(k, s) || findKeyword(k, s.replace(/\\s+/g, ''));\n}\n\nfunction findKeywordWithPipes(k, s) {\n    const parts = s.split('|');\n    for (const p of parts) {\n        if (findKeywordSpaces(k, p)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction findKeywordWithPlus(k, s) {\n    const parts = s.split('+');\n    let found = true;\n    for (const p of parts) {\n        if (!findKeywordWithPipes(k, p)) {\n            found = false;\n        }\n    }\n    return found;\n}\nexport default function(str, stoplist) {\n    const k = str.toLowerCase().replace(/[^\\w]/g, ' ').replace(/(\\d+)/g, ' $1 ').replace(/\\s+/g, ' ');\n    for (const s of stoplist) {\n        if (s == \"\") continue; \n        if (findKeywordWithPlus(k, s)) {\n            return false;\n        }\n    }\n    return true;\n}","import parseTorrent from 'parse-torrent';\nconst Url = require('url-parse');\nexport default function stringToTorrent(s) {\n    if (s.match(/^magnet/) || s.match(/^[a-fA-F0-9]{40}$/)) {\n        return parseTorrent(s);\n    }\n    const u = Url(s, true);\n    for (const k in u.query) {\n        const t = stringToTorrent(u.query[k]);\n        if (t) return t;\n    }\n    return false;\n}","export default function arrayToText(obj) {\n  for (let k in obj) {\n    if (Array.isArray(obj[k])) {\n      obj[k] = obj[k].join('\\n');\n    } else if (typeof obj[k] === 'object') {\n      obj[k] = arrayToText(obj[k]);\n    }\n  }\n  return obj;\n};\n","import {SET_TORRENT_SUCCESS, SET_PWD_SUCCESS,\n        SET_FILE_SUCCESS, SET_SOURCE, SET_PLAYER_STATUS_SUCCESS,\n        SET_TORRENT_FAILURE,\n        SET_STAT_SUCCESS,\n        SET_LOAD_STATE, SET_LOAD_STATE_SUCCESS,\n        SET_LOAD_STATE_FAILURE,\n        SET_LANG, SET_ABUSED, SET_MEDIA_INFO,\n        SET_PLAYER_TIME, SET_CURRENT_DIR_FILE_STATES, SET_FILE_STATE,\n        SET_RECENT_TORRENTS, SET_RECENT_TORRENT,\n        SET_ADBLOCK_ENABLED, SET_VIEW_MODE,\n        SET_EXTERNAL_SUBTITLES, SET_EXTERNAL_POSTER, SET_AUTOPLAY, SET_CAPTION, \n        SET_HEADER, SET_EXTERNAL_TITLE, SET_HEIGHT, SET_WIDTH, SET_IMDBID,\n        SET_COMPLETED_PIECES, CHANGE_CAPTION_SIZE, SET_USER_SETTINGS, \n        SET_ADS_INJECTED, SET_EXTERNAL_FEATURES,\n        SET_NEW_POSITION, SET_SEEDER, SET_ZIP_DOWNLOAD,\n        SET_ATTACHED_TRACKS, SET_LAST_TIME, SET_FIRST_PLAY, SET_IS_CACHED, SET_EXTERNAL_CONTROLS,\n        SET_DOWNLOAD_PATH, SET_DOWNLOAD_STAT, DROP_DOWNLOAD_STAT, SET_DOWNLOAD_TYPE,\n        UPDATE_WINDOW_WIDTH, SET_INITED, SET_PROGRESS, SET_USER_LANG, SET_API_UNREACHABLE,\n       } from './mutationTypes';\nimport {PLAYING, PAUSE} from './playerStatusTypes';\nimport {VIDEO, DOWNLOAD} from './viewModeTypes';\nimport {clean, cleanPlayerTrack, cleanState, randomId, processSubtitles} from './helpers';\nimport parseTorrent from 'parse-torrent';\nimport omitEmpty from 'omit-empty';\nimport fileToTorrent from './fileToTorrent';\nimport {getLangRoute} from './../langRoutes';\nimport getRelevantTrack from './../relevantTrack';\nimport stoplistCheck from '../stoplistCheck';\nimport stringToTorrent from './stringToTorrent';\nconst debug = require('debug')('webtor:lib:store');\nconst md5 = require('md5');\nconst Url = require('url-parse');\nconst cloneDeep = require('clone-deep');\nconst loadScript = require('load-script2');\nimport dot from 'dot-object';\nimport arrayToText from './arrayToText';\nimport Vue from 'vue';\nimport state from './state';\nlet logTimePeriod = 15;\nlet statsClient;\nlet adsenseInited = false;\nlet adScriptsInited = false;\nimport debounce from 'lodash/debounce';\nconst sha1 = require('sha1');\nexport default function({router, message, db, sdk, ext, i18n, injectHash, injectCode, config}) {\n    return {\n        log({}, message) {\n            debug(message);\n        },\n        adblockEnabled: ({ commit }) => {\n            // event('Show', 'ADBLOCK_ENABLED');\n            commit(SET_ADBLOCK_ENABLED);\n        },\n        changeCaptionSize: ({ commit, dispatch }, val) => {\n            commit(CHANGE_CAPTION_SIZE, val);\n            dispatch('updateUserSettings');\n        },\n        getMediaInfo: async ({ commit, state, getters }) => {\n            if (getters.deliveryType == 'webseed') return;\n            const md = clean(getters.metadata);\n            md.invoke = false;\n            const data = await state.seeder.mediaInfo(getters.filePath, md);\n            commit(SET_MEDIA_INFO, data);\n        },\n        async play({ commit, dispatch }) {\n            dispatch('stats');\n            commit(SET_PLAYER_STATUS_SUCCESS, PLAYING);\n        },\n        async pause({ commit }) {\n            commit(SET_PLAYER_STATUS_SUCCESS, PAUSE);\n        },\n        async cd({ dispatch, state }, pwd) {\n            if (pwd == state.pwd) return;\n            dispatch('log', `Change directory path=${pwd}`)\n            // event('Show', 'CD', pwd);\n            await dispatch('setState', {\n                torrent: state.torrent,\n                pwd,\n            });\n            await dispatch('pushState');\n        },\n        async getCurrentDirFileStates({ commit, state }) {\n            const states = await db.getCurrentDirFileStates({\n                infoHash: state.torrent.infoHash,\n                pwd: state.pwd,\n            });\n            const statesObj = {};\n            for (const s of states) {\n                statesObj[s.file] = s;\n            }\n            commit(SET_CURRENT_DIR_FILE_STATES, statesObj);\n        },\n        async open({ dispatch, state, commit }, file) {\n            dispatch('log', `Open path file=${file}`)\n            await dispatch('setState', {\n                torrent: state.torrent,\n                pwd: state.pwd,\n                file,\n                autoplay: true,\n            });\n\n            await dispatch('pushState');\n        },\n        async hideDownload({commit}) {\n            commit(SET_DOWNLOAD_TYPE, null);\n            commit(SET_DOWNLOAD_PATH, null);\n        },\n        async download({ dispatch, state, getters, commit }, path) {\n            commit(SET_DOWNLOAD_TYPE, 'file');\n            commit(SET_DOWNLOAD_PATH, path);\n        },\n        async downloadUrl({ state, getters }) {\n            let url = null;\n            if (state.downloadType == 'zip') {\n                url = await state.seeder.zipUrl(state.downloadPath, clean(getters.metadata));\n            } else {\n                url = await state.seeder.downloadUrl(state.downloadPath, clean(getters.metadata));\n            }\n            return url;\n        },\n        async proceedTorrentDownload({ dispatch, state, getters, commit }) {\n            const torrent = cloneDeep(state.torrent);\n            const buf = parseTorrent.toTorrentFile(torrent);\n            // https://stackoverflow.com/a/9834261\n            const blob = new Blob([buf.buffer]);\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.style.display = 'none';\n            a.href = url;\n            // the filename you want\n            a.download = torrent.name + '.torrent';\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n        },\n        async proceedDownload({ dispatch, state, getters, commit }) {\n            // let onMessage = (p, m) => {\n            //     commit(SET_DOWNLOAD_STAT, {p: p, m});\n            // };\n            // let onEnd = (p, res) => {\n            //     // setTimeout(() => {\n            //     //     commit(DROP_DOWNLOAD_STAT, p);\n            //     // }, 10000);\n            // };\n            let url = null;\n            if (state.downloadType == 'zip') {\n                // url = await state.seeder.zipUrlWithProgress(state.downloadPath, onMessage, onEnd, clean(getters.metadata));\n                url = await state.seeder.zipUrl(state.downloadPath, clean(getters.metadata));\n                dispatch('downloadEvent', 'Content Zip Download');\n            } else {\n                // url = await state.seeder.downloadUrlWithProgress(state.downloadPath, onMessage, onEnd, clean(getters.metadata));\n                url = await state.seeder.downloadUrl(state.downloadPath, clean(getters.metadata));\n                dispatch('downloadEvent', 'Content Download');\n            }\n            dispatch('log', `Download path=${state.downloadPath} type=${state.downloadType} url=${url.href}`)\n            dispatch('stats');\n            window.location = url.href;\n        },\n        event({ getters }, { name, payload = {} }) {\n            const data = Object.assign({}, getters.gtagDimensions, payload);\n            if (Vue.$gtag !== undefined) Vue.$gtag.event(name, data);\n        },\n        downloadEvent({ getters }, name) {\n            const data = Object.assign({}, getters.gtagDownloadDimensions, { 'dimension10': state.downloadPath });\n            if (Vue.$gtag !== undefined) Vue.$gtag.event(name, data);\n        },\n        async zip({ dispatch, state, getters, commit }) {\n            if (!state.torrent) return;\n            let path = state.pwd;\n            if (path == '/') {\n                path = '/' + state.torrent.name;\n            }\n            debug('zip invoked path=%o', path);\n            commit(SET_DOWNLOAD_TYPE, 'zip');\n            commit(SET_DOWNLOAD_PATH, path);\n        },\n        async delivery({ commit, state, getters, dispatch }) {\n            if (!state.torrent || !state.file) return;\n            const filePath = getters.filePath;\n            const src = await state.seeder.streamUrl(filePath, clean(getters.metadata));\n            dispatch('log', `Deliver content file=${filePath} url=${src}`)\n            dispatch('updateSource');\n            dispatch('stats');\n        },\n        async stats({ state, getters, commit }) {\n            const filePath = getters.filePath;\n            const isCached = await state.seeder.isCached(filePath, clean(getters.metadata));\n            commit(SET_IS_CACHED, isCached);\n            if (state.features.p2pProgress && !isCached && !statsClient) {\n                try {\n                    statsClient = await state.seeder.stats('', (path, data) => {\n                        // var t0 = performance.now()\n                        commit(SET_STAT_SUCCESS, data);\n                        // var t1 = performance.now()\n                        // console.log(`Call to SET_STAT_SUCCESS took ${(t1 - t0)} milliseconds count ${data.length}.`)\n                    }, clean(getters.metadata));\n                } catch (e) {\n                    debug(e);\n                    statsClient = null;\n                }\n            }\n        },\n        async pushTorrent({ getters, dispatch }, torrent) {\n            const expire = 60 * 60 * 24 * 30; // 1 month\n            dispatch('log', `Push torrent torrentInfo=${torrent.infoHash}`)\n            try {\n                return await sdk.torrent.touch(torrent, expire, clean(getters.metadata));\n            } catch (e) {\n                if (e == 'not found') {\n                    try {\n                        return await sdk.torrent.push(torrent, expire, clean(getters.metadata));\n                    } catch (e) {\n                        debug(e);\n                        throw e;\n                    }\n                } else {\n                    debug(e);\n                    throw e;\n                }\n            }\n        },\n        async pushAbuse({ getters }, abuse) {\n            return await sdk.abuse.push(abuse, clean(getters.metadata));\n        },\n        async setState({ commit, state, dispatch, getters }, newState) {\n            let { torrent, file, pwd, autoplay } = newState;\n            if (!pwd && torrent && torrent.files.length > 0) {\n                const pieces = torrent.files[0].path.split('/');\n                if (pieces.length > 1) {\n                    pwd = '/' + pieces[0];\n                }\n            }\n            if (!pwd) pwd = '/';\n            const oldState = {\n                torrent: state.torrent,\n                file: state.file,\n                pwd: state.pwd,\n            };\n            if (JSON.stringify(cleanState(oldState)) ==\n                JSON.stringify(cleanState(newState))) return;\n            await dispatch('leave');\n            // const downloadID = randomId((torrent ? torrent.infoHash : '') + pwd + file);\n            if ((torrent && !state.torrent) || (torrent && torrent.infoHash != state.torrent.infoHash)) {\n                await db.pushTorrent(torrent);\n            }\n            commit(SET_TORRENT_SUCCESS, torrent);\n            commit(SET_PWD_SUCCESS, pwd);\n            commit(SET_FILE_SUCCESS, file);\n            // commit(SET_DOWNLOAD_ID, downloadID);\n            // commit(SET_AUTOPLAY, oldState.torrent != null);\n            if (torrent && !file && (oldState.torrent == null || oldState.torrent.infoHash != torrent.infoHash)) {\n                const videos = getters.currentPrimaryVideoFiles;\n                if (videos.length > 0) {\n                    file = videos[0];\n                    commit(SET_FILE_SUCCESS, file);\n                }\n            }\n            if (torrent && pwd) {\n                const data = await db.setRecentTorrent(torrent, pwd);\n                commit(SET_RECENT_TORRENT, data);\n\n                await dispatch('getCurrentDirFileStates');\n            }\n            if (torrent && pwd && file) {\n                if (getters.isDownloadMode) {\n                    await dispatch('zip');\n                } else {\n                    const userData = await db.getFileState({ infoHash: torrent.infoHash, pwd, file });\n                    let time = 0;\n                    let track = null;\n                    const tracks = await getters.tracks;\n                    if (tracks.length > 0) {\n                        for (const t of tracks) {\n                            if (t.autoselect) {\n                                track = t;\n                                break;\n                            }\n                        }\n                    }\n                    if (userData && userData.time) time = userData.time;\n                    if (userData && userData.subtitle && userData.subtitle.src) {\n                        track = userData.subtitle;\n                        let u = new Url(track.src);\n                        const search = {};\n                        if (state.imdbId) {\n                            search['imdb-id'] = state.imdbId;\n                        }\n                        const query = await sdk.util.makeQuery(Object.assign(clean(getters.metadata), search));\n                        u.set('query', query);\n                        track.src = u;\n                    }\n                    if (track && track.type == 'ext') {\n                        let found = false;\n                        for (const t of tracks) {\n                            if (t.hash == track.hash) {\n                                found = true;\n                            }\n                        }\n                        if (!found) track = null;\n                    }\n                    await dispatch('player/setSubtitle', track);\n                    let audio = null;\n                    if (userData && userData.audio && userData.audio.src) {\n                        audio = userData.audio;\n                        let u = new Url(track.src);\n                        const query = await sdk.util.makeQuery(Object.assign(clean(getters.metadata), {}));\n                        u.set('query', query);\n                        audio.src = u;\n                    }\n                    await dispatch('player/setAudio', audio);\n                    commit(SET_AUTOPLAY, autoplay);\n                    commit(SET_PLAYER_TIME, time);\n                    dispatch('event', { name: 'Content Show' });\n                    await dispatch('delivery');\n                }\n            }\n        },\n        async fetchMagnet({ dispatch, getters }, magnet) {\n            let torrent = null;\n            dispatch('log', `Fetch torrent magnet=${magnet}`)\n            var { _, infoHash } = parseTorrent(magnet);\n            dispatch('log', `Fetching from localdb`)\n            torrent = await db.pullTorrent(infoHash);\n            if (!torrent || !torrent.pieces || torrent.pieces.length == 0) {\n                try {\n                    dispatch('log', `Fetching from torrent store`)\n                    torrent = await sdk.torrent.pull(infoHash, clean(getters.metadata));\n                } catch (e) {\n                    debug(e);\n                }\n            }\n            if (!torrent) {\n                dispatch('log', `Fetching by magnet uri from peers`)\n                // event('Show', 'MAGNET_FETCHING', magnet);\n                torrent = await sdk.magnet.fetchTorrent(magnet, clean(getters.metadata));\n                // event('Show', 'MAGNET_FETCHED', magnet);\n            }\n            return torrent;\n        },\n        async fetchFromURL({ }, url) {\n            if (url.match(/^http/)) {\n                url = await sdk.ext.url(url);\n            }\n            return await sdk.torrent.fromUrl(url);\n        },\n        async processInit({ commit, getters, dispatch }, init) {\n            commit(SET_ADS_INJECTED, true);\n            message.send('inject', injectCode);\n            const check = await message.receiveOnce('check');\n            await loadScript('/sandblaster.min.js');\n            const sb = sandblaster.detect();\n            debug('chacking hashes %o %o', sha1(check), injectHash);\n            if ((sha1(check) != injectHash) || sb.sandboxed) {\n                router.push({ name: 'empty' }).catch(() => {});\n                message.send('forbidden');\n                return false;\n            }\n            loadScript('/iframeResizer.contentWindow.min.js');\n            // if (getters.isIndia && !getters.isSponsor) {\n            //     router.push({ name: 'empty' }).catch(() => {});\n            //     message.send('forbidden');\n            //     return\n            // }\n            if (init.imdbId) {\n                commit(SET_IMDBID, init.imdbId);\n            }\n            if (init.subtitles) {\n                commit(SET_EXTERNAL_SUBTITLES, init.subtitles);\n                dispatch('updateAttachedTracks');\n            }\n            if (init.hasOwnProperty('controls')) {\n                commit(SET_EXTERNAL_CONTROLS, init.controls);\n            }\n            if (init.features) {\n                commit(SET_EXTERNAL_FEATURES, init.features);\n            }\n            if (init.poster) {\n                commit(SET_EXTERNAL_POSTER, init.poster);\n            }\n            if (init.title) {\n                commit(SET_EXTERNAL_TITLE, init.title);\n            }\n            if (init.lang) {\n                commit(SET_LANG, init.lang);\n                i18n.locale = init.lang;\n            }\n            if (init.userLang) {\n                commit(SET_USER_LANG, init.userLang);\n            }\n            if (init.mode) {\n                commit(SET_VIEW_MODE, init.mode);\n            }\n\n            if (init.i18n) {\n                for (const l in init.i18n) {\n                    const m = dot.dot(arrayToText(init.i18n[l]));\n                    i18n.mergeLocaleMessage(l, m);\n                }\n            }\n            if (init.header === false) {\n                commit(SET_HEADER, false);\n            }\n            if (init.height) {\n                commit(SET_HEIGHT, init.height);\n            }\n            if (init.width) {\n                commit(SET_WIDTH, init.width);\n            }\n        },\n        async fetchTorrent({ state, commit, dispatch, getters }, newTorrent = null) {\n            if (statsClient) {\n                statsClient.close();\n                statsClient = null;\n            }\n            const r = router.currentRoute;\n            let torrent = state.torrent;\n            if (typeof newTorrent == 'string') {\n                const r = stringToTorrent(newTorrent);\n                if (!r) {\n                    newTorrent = await dispatch('fetchFromURL', newTorrent);\n                } else {\n                    newTorrent = r;\n                }\n            }\n            let source = {};\n            message.send('init');\n            const init = await message.receiveOnce('init');\n            // const init = {\n            //   magnet: 'magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10&dn=Sintel&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&tr=wss%3A%2F%2Ftracker.fastcast.nz&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F',\n            //   lang: 'en',\n            //   i18n: {\n            //     en: {\n            //       common: {\n            //         share: 'Shhh!',\n            //       },\n            //     },\n            //   },\n            // }\n            if (init) {\n                const r = await dispatch('processInit', init);\n                if (r === false) return;\n                source = {\n                    torrentUrl: init.torrentUrl,\n                    magnet: init.magnet,\n                };\n                message.receive('play', () => {\n                    dispatch('play');\n                });\n                message.receive('pause', () => {\n                    dispatch('pause');\n                });\n                message.receive('setPosition', async (val) => {\n                    await dispatch('setPosition', val);\n                    await dispatch('setPosition', null);\n                });\n                message.receive('open', async (val) => {\n                    await dispatch('setState', {\n                        torrent: state.torrent,\n                        pwd: val.pwd,\n                        file: val.file,\n                    });\n                    await dispatch('pushState');\n                });\n            } else {\n                source = {\n                    torrentUrl: r.query.torrent_url,\n                    magnet: r.query.magnet,\n                    downloadId: r.query.downloadId,\n                };\n            }\n            if (JSON.stringify(omitEmpty(source)) == '{}' && !state.torrent && !newTorrent) {\n                router.push({ name: 'intro' }).catch(() => {});\n                return;\n            }\n            const magnet = torrent ? parseTorrent.toMagnetURI(torrent) : null;\n            const newTorrentMagnet = newTorrent ? parseTorrent.toMagnetURI(newTorrent) : null;\n            if ((!source.magnet || source.magnet == magnet)\n                && !source.downloadId\n                && !source.torrentUrl\n                && (!newTorrent || newTorrentMagnet == magnet)) {\n                return;\n            }\n            commit(SET_PROGRESS, 25);\n            if (getters.isVideoMode) {\n                commit(SET_LOAD_STATE, 'prepare to play');\n            } else {\n                commit(SET_LOAD_STATE, 'loading torrent');\n            }\n            try {\n                if (newTorrent && (newTorrent.pieces && newTorrent.pieces.length > 0)) {\n                    torrent = newTorrent;\n                } else if (sdk && newTorrent && (!newTorrent.pieces || newTorrent.pieces.length == 0)) {\n                    torrent = await dispatch('fetchMagnet', newTorrentMagnet);\n                } else if (ext && source.downloadId) {\n                    dispatch('log', `Fetch torrent downloadId=${source.downloadId}`)\n                    const downloadId = parseInt(source.downloadId);\n                    debug('request downloadId=%d', downloadId);\n                    torrent = await ext.fetch(downloadId);\n                } else if (sdk && source.torrentUrl) {\n                    torrent = await dispatch('fetchFromURL', source.torrentUrl);\n                } else if (sdk && source.magnet) {\n                    torrent = await dispatch('fetchMagnet', source.magnet);\n                }\n                commit(SET_PROGRESS, 50);\n\n                debug('Got torrent infoHash=%s', torrent.infoHash);\n                if (!await dispatch('checkTorrent', torrent)) {\n                    commit(SET_ABUSED);\n                    commit(SET_PROGRESS, 0);\n                    router.push({ name: 'intro' }).catch(() => {});\n                    return;\n                }\n                await dispatch('pushTorrent', torrent);\n                commit(SET_PROGRESS, 75);\n\n                commit(SET_SEEDER, sdk.seeder.get(torrent.infoHash));\n                if (sdk && sdk.params.cache) {\n                    const cp = await state.seeder.completedPieces();\n                    debug('Got torrent completed pieces length=%o', cp.length);\n                    commit(SET_COMPLETED_PIECES, cp);\n                }\n                commit(SET_LOAD_STATE_SUCCESS);\n                let pwd = null\n                if (r.query.pwd && !newTorrent) pwd = r.query.pwd;\n                if (init && init.pwd) pwd = init.pwd;\n                let file = null;\n                if (r.query.file && !newTorrent) file = r.query.file;\n                if (init && init.file) file = init.file;\n                await dispatch('setState', {\n                    torrent,\n                    pwd,\n                    file,\n                });\n                commit(SET_PROGRESS, 100);\n                message.send('torrent fetched', torrent);\n                // event('Show', 'TORRENT_FETCHED', torrent.infoHash);\n            } catch (e) {\n                message.send('torrent error');\n                await dispatch('setState', {});\n                if (e == 'abused') {\n                    commit(SET_ABUSED);\n                } else {\n                    commit(SET_LOAD_STATE_FAILURE);\n                    debug(e);\n                }\n                commit(SET_PROGRESS, 0);\n            }\n\n            if (r.query.event == 'player-logo-click') {\n                dispatch('event', {name: 'Player Logo Click'});\n            }\n            await dispatch('pushState');\n        },\n        async cleanTorrent({commit}) {\n            commit(SET_TORRENT_SUCCESS, null);\n            commit(SET_PWD_SUCCESS, null);\n            commit(SET_FILE_SUCCESS, null);\n            commit(SET_SOURCE, null);\n        },\n        async processFile({ commit, dispatch }, file) {\n            if (!file) return;\n            try {\n                return await fileToTorrent(file);\n            } catch (e) {\n                console.log(e);\n                commit(SET_TORRENT_FAILURE);\n            }\n        },\n        async leave({ commit }) {\n            commit(SET_SOURCE, null);\n        },\n        async nextFile({ state, dispatch, getters }) {\n            const files = getters.ls;\n            if (files < 2) return;\n            let next = null;\n            let skip = true;\n            for (let f of files) {\n                if (sdk.util.getMediaType(f.path) != sdk.util.getMediaType(state.playerFilePath)) {\n                    continue;\n                }\n                if (!skip) {\n                    next = f;\n                    break;\n                }\n                if (`/${state.playerFilePath}` == f.path) skip = false;\n            }\n            if (!next) return;\n            await dispatch('open', next.name);\n        },\n        async pushState({ state }) {\n            if (state.torrent) {\n                message.send('open', {\n                    file: state.file,\n                    pwd: state.pwd,\n                });\n                try {\n                    debug('push state=%o', {\n                        file: state.file,\n                        pwd: state.pwd,\n                    });\n                    await router.push({\n                        name: 'show', query: omitEmpty({\n                            file: state.file,\n                            pwd: state.pwd,\n                            magnet: parseTorrent.toMagnetURI(state.torrent),\n                            // mode: state.viewMode,\n                            // id: state.id,\n                        })\n                    });\n                } catch (err) {\n                    console.log(err);\n                    if (err.name !== 'NavigationDuplicated') {\n                        throw err;\n                    }\n                }\n            } else {\n                router.push({ name: 'intro' }).catch(() => {});\n            }\n        },\n        async checkTorrent({}, torrent) {\n            for (const f of torrent.files) {\n                if (!stoplistCheck(f.path, config.stoplist)) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        async updateCaption({ state, getters, commit }) {\n            const source = await getters.captionSource;\n            if (!source) {\n                commit(SET_CAPTION, null);\n                return;\n            }\n            const caption = await source.getEntry(state.time);\n            commit(SET_CAPTION, caption);\n        },\n        async updateTime({ commit, getters, dispatch, state }, { time, file }) {\n            commit(SET_PLAYER_TIME, time);\n            dispatch('updateCaption');\n            dispatch('updateFileState', file);\n            if (state.lastTime === null) {\n                commit(SET_LAST_TIME, time);\n            } else if (time - logTimePeriod - 5 > state.lastTime) {\n                commit(SET_LAST_TIME, time);\n                state.lastTime = time;\n            } else if (time - logTimePeriod > state.lastTime) {\n                dispatch('event', { name: 'Content Playtime', payload: { metric1: time - state.lastTime } });\n                commit(SET_LAST_TIME, time);\n            }\n            message.send('current time', time);\n        },\n        async setDuration({ }, val) {\n            message.send('duration', val);\n        },\n        firstPlay({commit, dispatch}) {\n            commit(SET_FIRST_PLAY, false);\n            dispatch('event', { name: 'Content Plays' });\n        },\n        async setPosition({ commit }, val) {\n            commit(SET_NEW_POSITION, val);\n        },\n        // async setTrack({ commit, dispatch, state, getters }, track) {\n        //     await dispatch('updateSource');\n        //     await dispatch('updateFileState', state.file);\n        //     await dispatch('updateCaption');\n        // },\n        async processAutoSubtitles(store) {\n            const track = await getRelevantTrack(store);\n            const {dispatch} = store;\n            if (track) {\n                dispatch('player/setSubtitle', track);\n            }\n        },\n        async updateAttachedTracks({ state, commit, getters }) {\n            let tracks = [];\n\n            const md = clean(getters.metadata);\n            md.invoke = false;\n\n            for (const s of state.externalSubtitles) {\n                let autoselect = false;\n                if (s.autoselect === true) autoselect = true;\n                if (s.default === true || s.default === \"\") autoselect = true;\n                tracks.push({\n                    kind: 'subtitles',\n                    label: s.label,\n                    srclang: s.srclang,\n                    src: await sdk.ext.streamUrl(s.src, {}, md),\n                    hash: md5(s.src + s.label),\n                    autoselect,\n                    type: 'ext',\n                });\n            }\n            for (const s of state.hls.subtitles) {\n                tracks.push({\n                    kind: 'subtitles',\n                    label: s.label,\n                    srclang: s.srclang,\n                    hash: md5(s.src),\n                    src: new Url(s.src),\n                    autoselect: s.autoselect,\n                    default: s.default,\n                    forced: s.forced,\n                    type: 'hls',\n                });\n            }\n\n            if (state.torrent) {\n                for (let f of state.torrent.files) {\n                    if (sdk.util.getMediaType(f.name) == 'subtitle' && f.name.startsWith(getters.fileName)) {\n                        const lang = sdk.util.getSubtitleLang(f.name)\n                        tracks.push({\n                            kind: 'subtitles',\n                            label: lang ? lang.nativeName : f.name,\n                            srclang: lang ? lang.code : 'en',\n                            src: await state.seeder.streamUrl(f.path, md),\n                            hash: md5(state.infoHash + f.name),\n                        });\n                    }\n                }\n            }\n            tracks = processSubtitles(tracks);\n            commit(SET_ATTACHED_TRACKS, tracks);\n        },\n        async updateSource({ state, getters, commit }) {\n            const format = sdk.util.getMediaType(state.file);\n            const sources = await getters.sources;\n            const tracks = await getters.tracks;\n            const poster = await getters.poster;\n            const autoplay = getters.isAutoplay;\n            const source = {\n                format,\n                sources,\n                tracks,\n                autoplay,\n                poster,\n            };\n            debug('setting source=%o', source);\n            commit(SET_SOURCE, source);\n        },\n        async updateFileState({ state, commit }, file = null) {\n            if (!file) file = state.file;\n            if (!state.file || !state.torrent || !state.pwd || state.file != file) return;\n            let data = {\n                infoHash: state.torrent.infoHash,\n                pwd: state.pwd,\n                file: state.file,\n                subtitle: cleanPlayerTrack(state.player.subtitle),\n                audio: cleanPlayerTrack(state.player.audio),\n                time: state.time,\n            };\n            data = await db.updateFileState(data);\n            commit(SET_FILE_STATE, data);\n        },\n        async init({ dispatch, commit }) {\n            await Promise.all([\n                dispatch('checkApi'),\n                dispatch('getRecentTorrents'),\n                dispatch('getUserSettings'),\n                dispatch('initRouter'),\n                dispatch('initWindowWidth'),\n            ]);\n            commit(SET_INITED);\n            debug('inited');\n        },\n        updateWindowWidth({commit}) {\n            commit(UPDATE_WINDOW_WIDTH);\n        },\n        async checkApi({commit}) {\n            if (!sdk) return;\n            try {\n                await sdk.checkApi();\n            } catch (e) {\n                commit(SET_API_UNREACHABLE);\n                debug(e);\n            }\n        },\n        async initWindowWidth({commit}) {\n            if (typeof window !== \"undefined\") {\n                window.addEventListener('resize', debounce(() => {\n                    commit(UPDATE_WINDOW_WIDTH);\n                }, 1000));\n            }\n        },\n        async initAdScripts({getters}) {\n            if (adScriptsInited || !getters.displayPopups) return;\n            adScriptsInited = true;\n            for (const ss of config.adScripts) {\n                if (ss.context && ss.context.embed === false && getters.isEmbedded) {\n                    continue;\n                }\n                const s = document.createElement('script');\n                s.type = 'text/javascript';\n                s.setAttribute('data-cfasync', 'false');\n                if (ss.src) {\n                    s.src = ss.src;\n                } else if (ss.content) {\n                    const content = document.createTextNode(ss.content);\n                    s.appendChild(content);\n                }\n                document.body.appendChild(s);\n            }\n        },\n        async initAdsense() {\n            if (adsenseInited) return;\n            adsenseInited = true;\n            const s1 = document.createElement('script');\n            s1.type = 'text/javascript';\n            s1.setAttribute('async', 'true');\n            s1.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=' + config.adsense.client;\n            s1.crossOrigin= 'anonymous';\n            document.body.appendChild(s1);\n        },\n        async placeAdsenseAd({getters, dispatch}, {slot, name, format, style, placeholder}) {\n            if (!getters.displayAdsense) return;\n            dispatch('initAdsense');\n            if (name) {\n                slot = config.adsense.slots[name];\n            }\n            if (!style) style = 'display:block'\n            let code = `<ins class=\"adsbygoogle\"`;\n            code += ` style=\"${style}\"`;\n            code += ` data-ad-client=\"${config.adsense.client}\"`;\n            code += ` data-ad-slot=\"${slot}\"`;\n            if (format) code += ` data-ad-format=\"${format}\"`;\n            code += ` data-full-width-responsive=\"true\"></ins>`;\n            let tries = 0;\n            var checkExist = setInterval(function() {\n                if (tries > 30) {\n                    clearInterval(checkExist);\n                    return;\n                }\n                if (document.getElementById(placeholder) && ('adsbygoogle' in window) && document.getElementById(placeholder).offsetWidth > 0) {\n                    document.getElementById(placeholder).innerHTML = code;\n                    (adsbygoogle = window.adsbygoogle || []).push({});\n                    clearInterval(checkExist);\n                    return;\n                }\n                tries++;\n            }, 100);\n        },\n        async initRouter({state, commit, dispatch}) {\n            router.beforeEach(async (to, from, next) => {\n                // if (to.hash.startsWith('#/')) {\n                //     router.replace(to.hash.replace('#/', '')).catch(() => {});\n                //     return;\n                // }\n                if (typeof window !== \"undefined\") {\n                    const url = new URL(window.location);\n                    if ((url.pathname != '/' || url.search != '')) {\n                        history.replaceState({}, '', '/');\n                        router.replace(url.pathname + url.search);\n                        return;\n                    }\n                }\n                let page_title = to.name;\n                let page_path = to.path;\n                if (to.query.magnet) {\n                    page_path = '/' + parseTorrent(to.query.magnet).infoHash;\n                    if (to.query.pwd) {\n                        page_path += to.query.pwd;\n                        page_title = to.query.pwd;\n                    }\n                    if (to.query.file) {\n                        page_path += '/' + to.query.file;\n                        page_title = to.query.file;\n                    }\n                }\n                if (Vue.$gtag) {\n                    Vue.$gtag.pageview({\n                        page_path,\n                        page_title,\n                    });\n                }\n                if (to.query.mode == VIDEO || state.viewMode == VIDEO) {\n                    commit(SET_VIEW_MODE, VIDEO);\n                }\n                if (to.query.mode == DOWNLOAD || state.viewMode == DOWNLOAD) {\n                    commit(SET_VIEW_MODE, DOWNLOAD);\n                }\n                if (from.params.lang && !to.params.lang) {\n                    return router.push(getLangRoute(to, from.params.lang)).catch(() => {});\n                }\n                if (to.params.lang) {\n                    commit(SET_LANG, to.params.lang);\n                    i18n.locale = to.params.lang;\n                }\n                if (to.hash || (to.name && to.name.startsWith('magnet-uri')) || (to.name && to.name.startsWith('infohash'))) {\n                    let input = '';\n                    if (to.name && to.name.startsWith('infohash')) {\n                        input = to.params.infohash;\n                    } else if (to.name && to.name.startsWith('magnet-uri')) {\n                        input = decodeURIComponent(to.fullPath.substring(1));\n                        input = input.match(/magnet\\:.*/)[0];\n                    } else {\n                        input = to.hash.substring(1);\n                    }\n                    try {\n                        const data = parseTorrent(input);\n                        const magnet = parseTorrent.toMagnetURI(data);\n                        return router.push({\n                            name: 'show',\n                            query: {\n                                magnet,\n                            },\n                        }).catch(() => {});\n                    } catch (e) {\n                        debug(e);\n                    }\n                }\n                return next();\n            });\n        },\n        async getUserSettings({ commit }) {\n            if (!db) return;\n            const settings = await db.getUserSettings();\n            commit(SET_USER_SETTINGS, settings);\n        },\n        async updateUserSettings({ state }) {\n            const settings = {\n                captionSize: state.captionSize,\n            };\n            db.updateUserSettings(settings);\n        },\n        async getRecentTorrent(_, infoHash) {\n            return await db.pullTorrent(infoHash);\n        },\n        async getRecentTorrents({ commit }) {\n            if (!db) return;\n            const torrents = await db.getRecentTorrents();\n            const res = {};\n            for (const t of torrents) {\n                res[t.infoHash] = t;\n            }\n            commit(SET_RECENT_TORRENTS, res);\n        },\n        async updatePlayerStatus({commit}, status) {\n            message.send('player status', status);\n            commit(SET_PLAYER_STATUS_SUCCESS, status);\n        },\n        playerInited() {\n            message.send('inited');\n        },\n    };\n};","function prepareTrack(d) {\n    return {\n        autoselect: d.autoselect,\n        default: d.default,\n        forced: d.forced,\n        srclang: d.lang,\n        label: d.name,\n        src: d.url,\n        id: d.id,\n    };\n}\n\nconst state = () => ({\n    audio: [],\n    subtitles: [],\n});\n\nconst mutations = {\n    setSubtitles(state, subtitles) {\n        state.subtitles = subtitles;\n    },\n    setAudio(state, audio) {\n        state.audio = audio;\n    },\n};\n\nconst getters = {};\n\nconst actions = {\n    async updateSubtitles({ commit, dispatch }, subs) {\n        const r = [];\n        for (const s of subs) {\n            r.push(prepareTrack(s));\n        }\n        commit('setSubtitles', r);\n        dispatch('updateAttachedTracks', {}, {root: true});\n    },\n    async updateAudio({ commit }, audio) {\n        const r = [];\n        for (const a of audio) {\n            r.push(prepareTrack(a));\n        }\n        commit('setAudio', r);\n    },\n};\n\nexport default {\n    namespaced: true,\n    strict: true,\n    state,\n    getters,\n    actions,\n    mutations\n};","const state = () => ({\n    audio: null,\n    subtitle: null,\n    error: null,\n    availableDuration: 0,\n    duration: 0,\n    dropSubtitles: [],\n});\n\nconst mutations = {\n    setSubtitle(state, subtitle) {\n        state.subtitle = subtitle;\n    },\n    setAudio(state, audio) {\n        state.audio = audio;\n    },\n    setError(state, error) {\n        state.error = error;\n    },\n    setAvailableDuration(state, d) {\n        state.availableDuration = d;\n    },\n    setDuration(state, d) {\n        state.duration = d;\n    },\n    dropSubtitles(state, d) {\n        state.dropSubtitles = d;\n    },\n    clearSubtitleDrops(state) {\n        state.dropSubtitles = [];\n    },\n};\n\nconst getters = {\n    seeder: (state, getters, rootState, rootGetters)  => rootState.seeder,\n    filePath: (state, getters, rootState, rootGetters)  => rootGetters.filePath,\n};\n\nconst actions = {\n    async dropSubtitles({commit}, s) {\n        commit('dropSubtitles', s);\n    },\n    async clearSubtitleDrops({commit}) {\n        commit('clearSubtitleDrops');\n    },\n    async setSubtitle({commit, dispatch}, s) {\n        commit('setSubtitle', s);\n        // await dispatch('updateSource', {}, {root: true});\n        await dispatch('updateFileState', null, {root: true});\n        await dispatch('updateCaption', {}, {root: true});\n    },\n    async setAudio({commit, dispatch}, a) {\n        commit('setAudio', a);\n        // await dispatch('updateSource', {}, {root: true});\n        await dispatch('updateFileState', null, {root: true});\n    },\n    async updateAvailableDuration({commit, dispatch}, d) {\n        commit('setAvailableDuration', d);\n    },\n    async updateDuration({commit}, d) {\n        commit('setDuration', d);\n    },\n    async setError({dispatch, state, getters, commit}, e) {\n        try {\n            const err = await getters.seeder.error(getters.filePath);\n            if (err) {\n                let e = 'unknown error';\n                if (err.includes('probing failed')) {\n                    e = 'no peers for transcoding';\n                } else if (err.includes('context deadline exceeded')) {\n                    e = 'no peers for transcoding';\n                } else {\n                    e = err.split(': ').pop();\n                }\n                commit('setError', e);\n            }\n        } catch (e) {\n            console.log(e);\n            commit('setError', e.message);\n        }\n    },\n};\n\nexport default {\n    namespaced: true,\n    strict: true,\n    state,\n    getters,\n    actions,\n    mutations\n};","export default ['en', 'ru'];","import merge from 'deepmerge';\nimport dot from 'dot-object';\nimport arrayToText from './store/arrayToText';\nimport VueI18n from 'vue-i18n';\nimport Vue from 'vue';\nimport locale from 'locale';\nimport langs from './langs';\nconst debug = require('debug')('webtor:i18n');\nconst supported = new locale.Locales(langs);\nconst messages = {};\nfor (let l of langs) {\n  messages[l] = dot.dot(arrayToText(\n    merge(\n      require(`../i18n/common.json`),\n      require(`../i18n/${l}.json`),\n    )\n  ));\n}\nVue.use(VueI18n);\nexport function createI18n(locales) {\n  const bestLocale = locales.best(supported);\n  const lang = bestLocale.normalized;\n  return new VueI18n({\n    locale: lang,\n    fallbackLocale: 'en',\n    messages,\n    pluralizationRules: {\n      'ru': function(choice, choicesLength) {\n        if (choice === 0) {\n          return 0;\n        }\n        const teen = choice > 10 && choice < 20;\n        const endsWithOne = choice % 10 === 1;\n        if (choicesLength < 4) {\n          return (!teen && endsWithOne) ? 1 : 2;\n        }\n        if (!teen && endsWithOne) {\n          return 1;\n        }\n        if (!teen && choice % 10 >= 2 && choice % 10 <= 4) {\n          return 2;\n        }\n        return (choicesLength < 4) ? 2 : 3;\n      }\n    },\n  });\n}\n","import Vue from 'vue';\nimport MarkdownIt from 'markdown-it';\nlet inited = false;\nexport default function() {\n  if (inited) return;\n  inited = true;\n  const md = new MarkdownIt();\n  Object.defineProperty(Vue.prototype, '$tm', {\n    get() {\n      return (...args) => {\n        return md.renderInline(this.$t(...args));\n      };\n    },\n  });\n};\n","import './scss/custom.scss';\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport Meta from 'vue-meta';\nimport Icon from 'vue-awesome/components/Icon.vue';\nVue.component('icon', Icon)\nimport {LayoutPlugin, ButtonPlugin, NavbarPlugin, AlertPlugin, JumbotronPlugin,\n  ButtonGroupPlugin, ButtonToolbarPlugin, FormInputPlugin, LinkPlugin, FormTextareaPlugin,\n  FormSelectPlugin, FormPlugin, InputGroupPlugin} from 'bootstrap-vue';\nimport {CardPlugin, ListGroupPlugin, ProgressPlugin} from 'bootstrap-vue';\nimport {FormGroupPlugin, FormRadioPlugin} from 'bootstrap-vue';\nimport {ModalPlugin} from 'bootstrap-vue';\nVue.use(Vuex);\nVue.use(Meta);\nVue.use(LinkPlugin);\nVue.use(LayoutPlugin);\nVue.use(ButtonPlugin);\nVue.use(NavbarPlugin);\nVue.use(AlertPlugin);\nVue.use(JumbotronPlugin);\nVue.use(ButtonGroupPlugin);\nVue.use(ButtonToolbarPlugin)\nVue.use(FormInputPlugin);\nVue.use(FormTextareaPlugin);\nVue.use(FormSelectPlugin);\nVue.use(FormPlugin);\nVue.use(CardPlugin);\nVue.use(ListGroupPlugin);\nVue.use(ProgressPlugin);\nVue.use(FormGroupPlugin)\nVue.use(FormRadioPlugin)\nVue.use(InputGroupPlugin)\nVue.use(ModalPlugin)\nimport vClickOutside from 'v-click-outside';\nVue.use(vClickOutside);\n\nimport {createRouter} from './lib/router';\nimport {createStore} from './lib/store';\nimport {createI18n} from './lib/i18n';\nimport markdown from './lib/markdown';\nimport App from './components/App.vue';\nimport registry from './lib/registry';\n\nexport async function createApp({api, db, locales, routerMode, ext, debug, user, sdk, message, config, ssr, injectHash, injectCode}) {\n  const router = createRouter({mode: routerMode});\n  const i18n = createI18n(locales);\n  const store = createStore({router, db, api, i18n, locales, ext, debug, user, sdk, message, config, ssr, injectHash, injectCode});\n  store.dispatch('init');\n  registry.buildVue = (opts) => {\n    return new Vue({\n      i18n,\n      store,\n      router,\n      ...opts,\n    });\n  };\n  const app = registry.buildVue({\n    render: (h) => h(App),\n  })\n  markdown();\n  return {app, router, store};\n}\n","import Vuex from 'vuex';\n\nimport state from './store/state';\nimport mutations from './store/mutations';\nimport getters from './store/getters';\nimport actions from './store/actions';\nimport hls from './store/modules/hls';\nimport player from './store/modules/player';\n\nexport function createStore({router, i18n, ext, debug: deb, db, user, sdk, message, config, ssr, injectHash, injectCode, locales}) {\n  return new Vuex.Store({\n    modules: {\n      hls,\n      player,\n    },\n    strict: true,\n    state: state({user, deb, i18n, ssr, locales}),\n    mutations,\n    getters: getters({i18n, sdk, message, config}),\n    actions: actions({router, message, db, sdk, ext, i18n, injectHash, injectCode, config}),\n  });\n};\n","import { openDB, deleteDB, wrap, unwrap } from 'idb';\nconst md5 = require('md5');\nconst debug = require('debug')('webtor:lib:clientDb');\n\nclass Db {\n    getDb() {\n        if (this.db != undefined) return this.db;\n        this.db = openDB('webtor', 3, {\n            upgrade(db, oldVersion) {\n                if (oldVersion < 1) {\n                    const fileStore = db.createObjectStore('files', {\n                        keyPath: 'id',\n                    });\n                    db.createObjectStore('torrents', {\n                        keyPath: 'id',\n                    });\n                    fileStore.createIndex('hashAndPwd', 'hashAndPwd');\n                }\n                if (oldVersion < 2) {\n                    db.createObjectStore('recentTorrents', {\n                        keyPath: 'id',\n                    });\n                }\n                if (oldVersion < 3) {\n                    db.createObjectStore('userSettings', {\n                        keyPath: 'id',\n                    });\n                }\n            },\n        });\n        return this.db;\n    }\n    makeFileKey(data) {\n        return md5(data.infoHash + data.pwd + data.file);\n    }\n    makeHashAndPwd(data) {\n        return md5(data.infoHash + data.pwd);\n    }\n    async updateFileState(data) {\n        const id = this.makeFileKey(data);\n        const db = await this.getDb();\n        const hashAndPwd = this.makeHashAndPwd(data);\n        data.id = id;\n        data.hashAndPwd = hashAndPwd;\n        data.timestamp = Date.now();\n        await db.put('files', data);\n        return data;\n    }\n\n    async getFileState(data) { \n        const id = this.makeFileKey(data);\n        const db = await this.getDb();\n        return await db.get('files', id);\n    }\n    async getCurrentDirFileStates(data) { \n        const hashAndPwd = this.makeHashAndPwd(data);\n        const db = await this.getDb();\n        return await db.getAllFromIndex('files', 'hashAndPwd', hashAndPwd)\n    }\n    async pushTorrent(torrent) { \n        const db = await this.getDb();\n        const id = torrent.infoHash;\n        return await db.put('torrents', {id, torrent});\n    }\n    async pullTorrent(infoHash) { \n        const db = await this.getDb();\n        const data = await db.get('torrents', infoHash);\n        if (data) return data.torrent;\n        return null;\n    }\n    async setRecentTorrent(torrent, pwd) { \n        const db = await this.getDb();\n        const id = torrent.infoHash;\n        const name = torrent.name;\n        const infoHash = torrent.infoHash;\n        const timestamp = Date.now();\n        const data = {id, infoHash, name, pwd, timestamp};\n        await db.put('recentTorrents', data);\n        return data;\n    }\n    async getRecentTorrents() { \n        const db = await this.getDb();\n        return await db.getAll('recentTorrents');\n    }\n    async updateUserSettings(data) { \n        const db = await this.getDb();\n        data.id = 1;\n        return await db.put('userSettings', data);\n     }\n    async getUserSettings() {\n        const db = await this.getDb();\n        const data = await db.get('userSettings', 1);\n        if (!data) return {};\n        return data;\n    }\n}\n\nclass FakeDb {\n    async updateUserSettings(data) { }\n    async getUserSettings() { return {}; }\n    async updateFileState(data) { return {}; }\n    async getFileState(data) { return null; }\n    async getCurrentDirFileStates(data) { return []; }\n    async pushTorrent(data) { }\n    async pullTorrent(data) { return null; }\n    async setRecentTorrent(data) { return {}; }\n    async getRecentTorrents() { return []; }\n}\n\nexport async function createDb() {\n    if (!('indexedDB' in window)) {\n        debug('This browser doesn\\'t support IndexedDB');\n        return new FakeDb();\n    }\n    const db = new Db();\n    try {\n        await db.getUserSettings();\n    } catch(e) {\n        debug(e);\n        return new FakeDb();\n    }\n    return db;\n}","Object.assign(MediaElementPlayer.prototype, {\n    async builddownload(player, controls, layers) {\n        const store = this.options.store;\n        let {getters, dispatch} = store;\n        player.downloadButton = document.createElement('div');\n\t\tplayer.downloadButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}download-button`;\n\t\tplayer.downloadButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"></button>`;\n\t\tthis.addControlElement(player.downloadButton, 'download');\n        const t = (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            dispatch('download', '/' + getters.filePath);\n        }\n        player.downloadButton.addEventListener('click', t);\n    },\n})","const debug = require('debug')('webtor:lib:message');\nfunction inIframe() {\n  try {\n      return window.self !== window.top;\n  } catch (e) {\n      return true;\n  }\n}\nconst urlParams = new URLSearchParams(window.location.search);\nconst id = urlParams.get('id');\ndebug('using message id=%o', id);\nconst message = {\n  id() {\n    return id;\n  },\n  send(m, data = {}) {\n    if (!inIframe) return;\n    if (!id) {\n      m = 'webtor: ' + m;\n    } else {\n      m = {\n        id,\n        name: m,\n        data,\n      };\n    }\n    debug('post message=%o data=%o', m, data);\n    window.parent.postMessage(m, '*');\n  },\n  receiveOnce(name) {\n    return new Promise((resolve, reject) => {\n      const func = (event) => {\n        const d = event.data;\n        if (!id) {\n          window.removeEventListener('message', func);\n          resolve();\n        }\n        if (d.id == id && d.name == name) {\n            debug('receive message=%o', d);\n            window.removeEventListener('message', func);\n            resolve(d.data);\n        }\n      }\n      window.addEventListener('message', func);\n    });\n  },\n  receive(name, callback) {\n    window.addEventListener('message', function(event) {\n        const d = event.data;\n        if (d.id == id && d.name == name) {\n            debug('receive message=%o', d);\n            callback(d.data);\n        }\n    });\n  }\n}\nexport default message;","import {createApp} from './index';\nimport {createDb} from './lib/clientDb';\nimport {analytics} from './lib/analytics';\nimport {createExt} from './lib/ext';\nimport locale from 'locale';\nimport message from './lib/message';\nimport webtor from '@webtor/platform-sdk-js';\nlet url = (window.location != window.parent.location)\n      ? document.referrer\n      : document.location.href;\nif (url) url = new URL(url);\nlet token = window.__TOKEN__;\nlet user = window.__USER__;\nlet config = JSON.parse(Buffer.from(window.__CONFIG__, 'base64').toString('utf-8'));\nlet injectCode = window.__INJECT_CODE__;\nlet injectHash = window.__INJECT_HASH__;\nif (window.__INITIAL_STATE__ && window.__INITIAL_STATE__.user) {\n  user = window.__INITIAL_STATE__.user;\n}\n\nconst sdk = webtor(Object.assign({\n  async getToken() {\n    if (!token) return null;\n    const res = await fetch('/token/', {\n      headers: {\n        token,\n      },\n    });\n    token = await res.text();\n    return token;\n  },\n}, config.sdk));\nif (config.ga) {\n  analytics(Object.assign({\n    appVersion: require('../../package.json').version,\n  }, config.ga));\n}\nconst ext = createExt();\nconst routerMode = null;\nconst lang = window.navigator.userLanguage || window.navigator.language;\nconst locales = new locale.Locales(lang);\nlet debug = false;\ntry {\n  debug = localStorage && !!localStorage.debug;\n} catch (e) {\n  console.log(e);\n}\n(async () => {\n  const db = await createDb();\n  const {app, router, store} = await createApp({locales,\n    routerMode, ext, debug, db, user, sdk, message, url, config, ssr: false, injectCode, injectHash});\n  if (window.__INITIAL_STATE__) {\n    window.__INITIAL_STATE__.ssr = false;\n    store.replaceState(window.__INITIAL_STATE__);\n  }\n  router.onReady(async() => {\n    app.$mount('#app');\n    store.dispatch('updateWindowWidth');\n  });\n})()\n","import parseTorrent from 'parse-torrent';\nexport default function fileToTorrent(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('load', (e) => {\n      const arr = new Uint8Array(e.target.result);\n      const buffer = new Buffer(arr);\n      try {\n        resolve(parseTorrent(buffer));\n      } catch(e) {\n        reject(e);\n      }\n    });\n    reader.addEventListener('error', (err) => {\n      reject(err);\n    });\n    reader.readAsArrayBuffer(file);\n  });\n};\n","import Settings from '../../components/App/Show/Player/MediaElement/Settings.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildsettings(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        // if (getters.deliveryType !== 'webseed') {\n        //     await dispatch('getMediaInfo');\n        // }\n        player.settingsButton = document.createElement('div');\n\t\tplayer.settingsButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}settings-button`;\n\t\tplayer.settingsButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"></button>`;\n\t\tthis.addControlElement(player.settingsButton, 'settings');\n        player.settingsLayer = document.createElement('div');\n        player.settingsLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}settings`;\n        const settingsContainer = document.createElement('div');\n        player.settingsLayer.appendChild(settingsContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.settingsLayer, playLayer);\n        player.settingsLayer.style.width = '100%';\n        player.settingsLayer.style.height = '100%';\n        // player.settingsLayer.click = function(e) {\n        //     console.log(e);\n        //     e.preventDefault();\n        //     return false;\n        // }\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.settingsLayer.style.display = 'none';\n            } else {\n                player.settingsLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        registry.buildVue({\n            el: settingsContainer,\n            render: (h) => h(Settings, {on: {\n                close: t,\n            }}),\n        });\n        player.settingsLayer.style.display = 'none';\n        player.settingsLayer.style.zIndex = 2;\n        player.settingsButton.addEventListener('click', t);\n    },\n})","export const PLAY = 'PLAY';\nexport const PLAYING = 'PLAYING';\nexport const PAUSE = 'PAUSE';\nexport const ENDED = 'ENDED';\nexport const SEEKING = 'SEEKING';\nexport const SEEKED = 'SEEKED';\nexport const IDLE = 'IDLE';\n","const nameSuffix = '_with_lang';\nexport function getLangRoute(current, lang = null) {\n  const params = Object.assign({}, current.params);\n  let name = current.name;\n  if (lang) {\n    params.lang = lang;\n    name = current.meta.lang ? current.name : current.name + nameSuffix;\n\n  } else {\n    delete params['lang'];\n    name = current.meta.lang ? current.name.replace(nameSuffix, '') : current.name;\n  }\n  return {\n    name,\n    params,\n    query: current.query,\n    hash: current.hash,\n  };\n}\nexport function addLangRoutes(routes) {\n  const routesWithLang = routes.map((r) => {\n    return {\n      ...r,\n      path: `/:lang${r.path}`,\n      name: r.name + nameSuffix,\n      meta: {\n        lang: true,\n      },\n      pathToRegexpOptions: {strict: true},\n    };\n  });\n  return routes.concat(routesWithLang);\n}\n","export function checkAdBlock() {\n    return new Promise((resolve, reject) => {\n        let adBlockEnabled = false;\n        let testAd = document.createElement('div');\n        testAd.innerHTML = '&nbsp;';\n        testAd.className = 'adsbox';\n        document.body.appendChild(testAd);\n        setTimeout(function() {\n            if (testAd.offsetHeight === 0) {\n                adBlockEnabled = true;\n            }\n            testAd.remove();\n            resolve(adBlockEnabled);\n        }, 100);\n    });\n};\n","import {getLangRoute} from './langRoutes';\nexport function getLangLinks(translations, route, router, baseURL, lang) {\n    const res = [];\n    for (const key in translations) {\n        const r = getLangRoute(route, key);\n        const href = baseURL + router.resolve(r).href.replace('#', '');\n        res.push({rel: 'alternate', hreflang: key, href})\n        if (key == lang) {\n            res.push({rel: 'canonical', hreflang: key, href})\n        }\n    }\n    return res;\n}","import Error from '../../components/App/Show/Player/MediaElement/Error.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async builderror(player, controls, layers) {\n        const store = this.options.store;\n        player.errorLayer = document.createElement('div');\n        player.errorLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}error`;\n        const errorContainer = document.createElement('div');\n        player.errorLayer.appendChild(errorContainer);\n        player.errorLayer.style.width = '100%';\n        player.errorLayer.style.height = '100%';\n        player.errorLayer.style.display = 'none';\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        player.media.addEventListener('error', function(e) {\n            player.errorLayer.style.display = '';\n        });\n        layers.insertBefore(player.errorLayer, playLayer);\n        registry.buildVue({\n            el: errorContainer,\n            render: (h) => h(Error),\n        });\n    },\n})","export default function(pieces, piecesLength, progressLength) {\n    const segments = [];\n    let curSegment = null; \n    let prevPiece = null; \n    for (const p of pieces) {\n    if (prevPiece != null) {\n        if ((p.position - 1) != prevPiece.position) {\n        if (curSegment != null) {\n            segments.push(curSegment);\n        }\n        curSegment = {start: p.position, end: p.position + 1};\n        } else {\n        if (curSegment != null) {\n            curSegment.end = p.position + 1;\n        }\n        }\n    } else {\n        curSegment = {start: p.position, end: p.position + 1};\n    }\n    prevPiece = p;\n    }\n    if (curSegment != null) {\n    segments.push(curSegment);\n    }\n    for (const i in segments) {\n    segments[i] = {\n        start: segments[i].start / piecesLength * progressLength,\n        end:   segments[i].end   / piecesLength * progressLength,\n    };\n    }\n    return segments;\n}"],"sourceRoot":""}