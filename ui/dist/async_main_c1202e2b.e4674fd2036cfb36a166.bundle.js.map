{"version":3,"sources":["webpack:///./ui/src/lib/ext.js","webpack:///./ui/src/lib/mediaelement-plugins/logo.js","webpack:///./ui/src/lib/mediaelement-plugins/browse.js","webpack:///./ui/src/lib/analytics.js","webpack:///./ui/src/lib/mediaelement-plugins/chromecast/player.js","webpack:///./ui/src/lib/mediaelement-plugins/chromecast.js","webpack:///./ui/src/md/DMCA.md","webpack:///./ui/src/lib/mediaelement-plugins/embed.js","webpack:///./ui/src/lib/store/mutationTypes.js","webpack:///./ui/src/lib/mediaelement-plugins/continue.js","webpack:///./ui/src/lib/mediaelement-plugins/advancedtracks.js","webpack:///./ui/src/lib/mediaelement-plugins/captions.js","webpack:///./ui/src/lib/store/caption.js","webpack:///./ui/src/lib/mediaelement-plugins/availableprogress.js","webpack:///./ui/src/lib/registry.js","webpack:///./ui/src/lib/router.js","webpack:///./ui/src/lib/store/helpers.js","webpack:///./ui/src/lib/store/state.js","webpack:///./ui/src/lib/store/viewModeTypes.js","webpack:///./ui/src/lib/store/mutations.js","webpack:///./ui/src/lib/store/fileUtils.js","webpack:///./ui/src/lib/store/getters.js","webpack:///./ui/src/lib/relevantTrack.js","webpack:///./ui/src/lib/stoplistCheck.js","webpack:///./ui/src/lib/store/stringToTorrent.js","webpack:///./ui/src/lib/store/arrayToText.js","webpack:///./ui/src/lib/store/actions.js","webpack:///./ui/src/lib/store/modules/hls.js","webpack:///./ui/src/lib/store/modules/player.js","webpack:///./ui/src/lib/langs.js","webpack:///./ui/src/lib/i18n.js","webpack:///./ui/src/lib/markdown.js","webpack:///./ui/src/index.js","webpack:///./ui/src/lib/store.js","webpack:///./ui/src/lib/clientDb.js","webpack:///./ui/src/lib/mediaelement-plugins/download.js","webpack:///./ui/src/lib/message.js","webpack:///./ui/src/real_client.js","webpack:///./ui/src/lib/store/fileToTorrent.js","webpack:///./ui/src/lib/mediaelement-plugins/settings.js","webpack:///./ui/src/lib/store/playerStatusTypes.js","webpack:///./ui/src/lib/langRoutes.js","webpack:///./ui/src/lib/adblock.js","webpack:///./ui/src/lib/langLinks.js","webpack:///./ui/src/lib/mediaelement-plugins/error.js","webpack:///./ui/src/lib/piecesToSegments.js"],"names":["debug","require","Ext","init","Promise","resolve","reject","window","__webtorInjected","addEventListener","event","source","data","webtorInjected","downloadId","this","torrent","ab","Uint8Array","buffer","Buffer","byteLength","view","i","length","parseTorrent","infoHash","e","postMessage","createExt","Object","assign","MediaElementPlayer","prototype","player","controls","layers","route","options","logoButton","document","createElement","className","classPrefix","innerHTML","fullPath","container","appendChild","store","state","getters","dispatch","currentVideoFiles","browseLayer","browseContainer","style","width","height","playLayer","querySelector","insertBefore","registry","buildVue","el","render","h","Browse","on","hide","display","show","zIndex","play","analytics","id","appId","appVersion","appName","Vue","use","VueGtag","config","params","send_page_view","ChromecastPlayer","constructor","controller","media","t","endedMedia","cast","framework","RemotePlayerEventType","IS_PAUSED_CHANGED","paused","pause","IS_MUTED_CHANGED","setMuted","isMuted","volume","IS_MEDIA_LOADED_CHANGED","mejs","Utils","createEvent","dispatchEvent","VOLUME_LEVEL_CHANGED","volumeLevel","DURATION_CHANGED","CURRENT_TIME_CHANGED","getCurrentTime","getDuration","setTimeout","load","isPaused","value","originalNode","readyState","setCurrentTime","setVolume","getVolume","src","setSrc","getSrc","currentTime","seek","getOriginalDuration","setVolumeLevel","playOrPause","castSession","CastContext","getInstance","getCurrentSession","tracks","children","url","type","counter","total","child","tag","tagName","toLowerCase","getAttribute","chrome","Track","TrackType","TEXT","trackContentId","absolutizeUrl","trackContentType","subtype","TextTrackType","SUBTITLES","name","language","customData","push","mediaInfo","MediaInfo","textTrackStyle","TextTrackStyle","metadata","GenericMediaMetadata","streamType","StreamType","Live","hlsSegmentFormat","duration","title","subtitle","poster","images","request","LoadRequest","loadMedia","then","tracksInfo","EditTracksInfoRequest","getMediaSession","editTracksInfo","console","error","log","_getErrorMessage","muteOrUnmute","description","message","code","ErrorCode","API_NOT_INITIALIZED","CANCEL","CHANNEL_ERROR","EXTENSION_MISSING","INVALID_PARAMETER","RECEIVER_UNAVAILABLE","SESSION_ERROR","TIMEOUT","isAvailable","_initializeCastPlayer","s","body","castButton","context","session","setOptions","receiverApplicationId","DEFAULT_MEDIA_RECEIVER_APP_ID","autoJoinPolicy","AutoJoinPolicy","PAGE_SCOPED","androidReceiverCompatible","remotePlayer","RemotePlayer","remotePlayerController","RemotePlayerController","IS_CONNECTED_CHANGED","_switchToCastPlayer","bind","endSession","proxy","isConnected","_setupCastPlayer","_setDefaultPlayer","loadedChromecast","indexOf","getSessionState","DefaultPlayer","currentMediaTime","module","exports","embedButton","addControlElement","embedLayer","embedContainer","toggle","Settings","close","SET_TORRENT_SUCCESS","SET_PWD_SUCCESS","SET_FILE_SUCCESS","SET_SOURCE","SET_PLAYER_STATUS_SUCCESS","SET_PLAYER_FILE_PATH_SUCCESS","SET_PLAYER_SOURCE_URL_SUCCESS","SET_TORRENT_FAILURE","CLEAR_TORRENT_LOAD_ERROR","SET_STAT_SUCCESS","SET_LOAD_STATE","SET_LOAD_STATE_SUCCESS","SET_LOAD_STATE_FAILURE","SET_DELIVERY_FAILURE","CLEAR_DELIVERY_FAILURE","SET_DELIVERY_TOKEN","SET_DOWNLOAD_ID","SET_LANG","SET_USER_LANG","SET_ABUSED","SET_MEDIA_INFO","SET_PLAYER_TIME","SET_CURRENT_DIR_FILE_STATES","SET_FILE_STATE","SET_RECENT_TORRENTS","SET_RECENT_TORRENT","SET_DOWNLOAD_PATH","SET_ADBLOCK_ENABLED","SET_VIEW_MODE","SET_THEME","SET_EXTERNAL_FEATURES","SET_EXTERNAL_SUBTITLES","SET_ATTACHED_TRACKS","SET_EXTERNAL_POSTER","SET_EXTERNAL_CONTROLS","SET_AUTOPLAY","SET_CAPTION","SET_PLAYER_CONTROLS_SHOWN","SET_PLAYER_FULLSCREEN","SET_HEADER","SET_EXTERNAL_TITLE","SET_WIDTH","SET_HEIGHT","SET_IMDBID","SET_COMPLETED_PIECES","CHANGE_CAPTION_SIZE","SET_USER_SETTINGS","SET_ADS_INJECTED","SET_PLAYER_NATIVE_FULLSCREEN","SET_NEW_POSITION","SET_SEEDER","SET_ZIP_DOWNLOAD","SET_LAST_TIME","SET_FIRST_PLAY","SET_IS_CACHED","SET_NAME","SET_DOWNLOAD_STAT","DROP_DOWNLOAD_STAT","SET_DOWNLOAD_TYPE","UPDATE_WINDOW_WIDTH","SET_INITED","SET_PROGRESS","SET_API_UNREACHABLE","time","lock","apply","continueLayer","continueContainer","hideAndPlay","restartWatch","continueWatch","Continue","props","tracksButton","tracksLayer","tracksContainer","Tracks","captionsLayer","captionsContainer","firstChild","Captions","retryFetch","fetch","retries","retryDelay","attempt","response","Math","pow","retryOn","status","async","getHLSFragments","srcUrl","res","text","parentUrl","substring","lastIndexOf","fragments","lines","split","num","fragment","ended","l","m","match","parseFloat","undefined","content","f","prom","start","convertSMPTEtoSeconds","SMPTE","TypeError","decimalLen","replace","secs","multiplier","reverse","Number","toFixed","parse","str","exec","trackText","$","filter","querySelectorAll","styleNode","getElementById","attr","entries","styles","removeAttribute","attributes","_temp","stop","eq","_style","trim","parseDFXP","pattern","timecode","identifier","settings","parseWebVTT","sanitize","html","div","scripts","getElementsByTagName","remove","allElements","n","attributesObj","Array","slice","call","j","startsWith","searchTrackPosition","mid","lo","hi","BasicSource","getEntry","HLSSource","fetching","entriesByFragment","lastTime","lastIndex","lookAhead","throttle","trailing","findFragment","end","temp","concat","importEntries","preload","loadFragments","makeBasicSource","getCaptionSource","decodeURIComponent","atob","map","c","charCodeAt","toString","join","makeHLSSource","slider","self","AvailabeProgress","VueRouter","routes","addLangRoutes","path","component","md5","randomId","prefix","Date","now","clean","cleanState","pwd","file","cleanPlayerTrack","track","href","processSubtitles","subs","sort","a","b","srclang","same","label","y","idx","parseInt","user","deb","i18n","router","ssr","locales","inited","windowWidth","progress","features","p2pProgress","fullscreen","subtitles","continue","playpause","timeline","chromecast","browse","download","captions","embed","autoSubtitles","isCached","zipDownload","adsInjected","completedPieces","imdbId","autoplay","firstPlay","playerControlsShown","playerFullScreen","playerNativeFullScreen","caption","captionSize","externalSubtitles","externalPoster","externalTitle","header","adblock","apiUnreachable","viewMode","theme","version","VERSION","baseURL","sponsorURL","authURL","userID","downloadID","downloadPath","fileHistory","playerStatus","IDLE","playerFilePath","playerSourceUrl","wrongFormat","deliveryFailure","loadState","deliveryToken","abused","stats","errors","loadError","lang","locale","userLang","normalized","fallbackLocale","fallbackLang","currentDirFileState","recentTorrents","newPosition","seeder","attachedTracks","downloadStats","downloadType","innerWidth","val","k","mode","set","p","delete","alterSource","SEEKING","ENDED","token","states","torrents","ls","tree","addBranch","parts","part","shift","files","pathParts","pwdParts","currentDir","pwdPart","pop","upPath","item","localeCompare","pathParse","sdk","gtagDimensions","fileExt","deliveryType","mediaType","isAutoplay","isAdblock","isSponsor","filePath","isEmbedded","gtagDownloadDimensions","torrentFile","isVideoMode","isDownloadMode","iOS","includes","navigator","platform","userAgent","showShare","showLogo","showDownload","showStatus","selfHosted","preroll","isIndia","country","underPlayerBanner","warnBanner","shareLink","location","origin","magnetURI","toMagnetURI","blogUrl","backersUrl","technologyUrl","md","translations","messages","util","getMediaType","currentVideoFilesWithFriendlyNames","friendlyName","mm","padStart","currentPrimaryVideoFiles","v","currentInfoHash","isDemo","displayAds","ads","displayPopups","displayAdsense","adsense","displayAdfox","displayPrerolls","isWindows","deepLevel","getDeliveryType","fileName","ext","substr","downloadFile","base","downloadSize","role","sources","streamUrl","getMimeType","invoke","captionSource","openSubtitlesTracks","search","os","openSubtitles","send","o","format","getLang","kind","nativeName","hash","default","autoselect","hasLogin","patreon","apiUrl","normalizeLang","getRelevantTrackFromTracks","getRelevantTrackForLang","findKeyword","endsWith","findKeywordSpaces","replaceAll","findKeywordWithPipes","findKeywordWithPlus","found","stoplist","Url","arrayToText","obj","isArray","cloneDeep","loadScript","statsClient","adsenseInited","adScriptsInited","sha1","db","injectHash","injectCode","adblockEnabled","commit","changeCaptionSize","getMediaInfo","PLAYING","PAUSE","getCurrentDirFileStates","statesObj","zipUrl","downloadUrl","buf","toTorrentFile","blob","Blob","URL","createObjectURL","click","revokeObjectURL","onMessage","onEnd","zipUrlWithProgress","downloadUrlWithProgress","payload","$gtag","downloadEvent","touch","abuse","newState","pieces","oldState","JSON","stringify","pushTorrent","videos","setRecentTorrent","userData","getFileState","u","query","makeQuery","audio","magnet","_","pullTorrent","pull","fetchTorrent","fromUrl","check","receiveOnce","sb","sandblaster","detect","sandboxed","catch","hasOwnProperty","dot","mergeLocaleMessage","newTorrent","r","currentRoute","stringToTorrent","torrentUrl","receive","torrent_url","omitEmpty","newTorrentMagnet","get","cache","cp","fileToTorrent","next","skip","err","stoplistCheck","metric1","getRelevantTrack","hls","forced","getSubtitleLang","updateFileState","all","updateWindowWidth","checkApi","debounce","ss","adScripts","setAttribute","s1","client","crossOrigin","slot","placeholder","slots","tries","checkExist","setInterval","offsetWidth","adsbygoogle","clearInterval","beforeEach","to","from","pathname","history","replaceState","page_title","page_path","pageview","getLangRoute","input","infohash","getUserSettings","updateUserSettings","getRecentTorrents","playerInited","prepareTrack","d","namespaced","strict","actions","root","mutations","setSubtitles","setAudio","availableDuration","dropSubtitles","rootState","rootGetters","setSubtitle","setError","setAvailableDuration","setDuration","clearSubtitleDrops","supported","Locales","langs","merge","VueI18n","createApp","api","routerMode","createRouter","best","pluralizationRules","choice","choicesLength","teen","endsWithOne","createI18n","Vuex","Store","modules","createStore","opts","app","App","MarkdownIt","defineProperty","args","renderInline","$t","markdown","Icon","Meta","LinkPlugin","LayoutPlugin","ButtonPlugin","NavbarPlugin","AlertPlugin","JumbotronPlugin","ButtonGroupPlugin","ButtonToolbarPlugin","FormInputPlugin","FormTextareaPlugin","FormSelectPlugin","FormPlugin","CardPlugin","ListGroupPlugin","ProgressPlugin","FormGroupPlugin","FormRadioPlugin","InputGroupPlugin","ModalPlugin","vClickOutside","Db","getDb","openDB","upgrade","oldVersion","fileStore","createObjectStore","keyPath","createIndex","makeFileKey","makeHashAndPwd","hashAndPwd","timestamp","put","getAllFromIndex","getAll","FakeDb","createDb","downloadButton","stopPropagation","preventDefault","inIframe","top","URLSearchParams","parent","func","removeEventListener","callback","referrer","__TOKEN__","__USER__","__CONFIG__","__INJECT_CODE__","__INJECT_HASH__","__INITIAL_STATE__","webtor","headers","ga","userLanguage","localStorage","onReady","$mount","reader","FileReader","arr","target","result","readAsArrayBuffer","settingsButton","settingsLayer","settingsContainer","PLAY","SEEKED","current","meta","routesWithLang","pathToRegexpOptions","checkAdBlock","adBlockEnabled","testAd","offsetHeight","getLangLinks","key","rel","hreflang","errorLayer","errorContainer","Error","piecesLength","progressLength","segments","curSegment","prevPiece","position"],"mappings":"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","file":"async_main_c1202e2b.e4674fd2036cfb36a166.bundle.js","sourcesContent":["import parseTorrent from 'parse-torrent';\nconst debug = require('debug')('webtor:lib:ext');\nclass Ext {\n  init() {\n    return new Promise((resolve, reject) => {\n      if (window.__webtorInjected) return resolve();\n      debug('wait for initialization');\n      window.addEventListener('message', (event) => {\n        if (event.source != window)\n          return;\n\n        if (event.data.webtorInjected) return resolve();\n      });\n    });\n  }\n  async fetch(downloadId) {\n    await this.init();\n    debug('request downloadId=%d', downloadId);\n    return new Promise((resolve, reject) => {\n      window.addEventListener('message', (event) => {\n        if (event.source != window)\n          return;\n\n        if (event.data.torrent) {\n          const ab = new Uint8Array(event.data.torrent.data);\n          const buffer = new Buffer(ab.byteLength);\n          const view = new Uint8Array(ab);\n          for (let i = 0; i < buffer.length; ++i) {\n            buffer[i] = view[i];\n          }\n          try {\n          const torrent = parseTorrent(buffer);\n          debug('resolve torrent infoHash=%s', torrent.infoHash);\n          resolve(torrent);\n          } catch (e) {\n            reject(e);\n          }\n        }\n      });\n      window.postMessage({downloadId}, '*');\n    });\n  }\n}\nexport function createExt() {\n  return new Ext();\n}\n","// import registry from '../registry';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildlogo(player, controls, layers) {\n        // const store = this.options.store;\n        // let {getters, dispatch} = store;\n        const route = this.options.route;\n        const logoButton = document.createElement('div');\n        logoButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}logo-button`;\n        logoButton.innerHTML =\n            `<a title=\"Download at webtor.io\" class=\"banner\" target=\"_blank\" href=\"/#${route.fullPath + '&event=player-logo-click'}\"><span class=\"pre\">download at</span><span class=\"text\">webtor</span></a>`;\n        player.container.appendChild(logoButton);\n    },\n})","import Browse from '../../components/App/Show/Player/MediaElement/Browse.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildbrowse(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        if (getters.currentVideoFiles.length < 2) return;\n        player.browseLayer = document.createElement('div');\n        player.browseLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}browse`;\n        const browseContainer = document.createElement('div');\n        player.browseLayer.appendChild(browseContainer);\n        player.browseLayer.style.width  = '100%';\n        player.browseLayer.style.height = '100%';\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n\n        layers.insertBefore(player.browseLayer, playLayer);\n        registry.buildVue({\n            el: browseContainer,\n            render: (h) => h(Browse, {on: {\n                hide() {\n                    player.browseLayer.style.display = 'none';\n                },\n                show() {\n                    player.browseLayer.style.display = '';\n                },\n            }}),\n        });\n        player.browseLayer.style.zIndex = 2;\n        player.browseLayer.addEventListener('click', function() {\n            player.play();\n            player.browseLayer.style.display = 'none';\n        });\n    },\n})","import Vue from 'vue';\nimport VueGtag from 'vue-gtag';\n\nexport function analytics({id, appId, appVersion, appName}) {\n  Vue.use(VueGtag, {\n    config: {\n      id: id,\n      appName,\n      appId,\n      appVersion,\n      params: {\n        send_page_view: false,\n      },\n    },\n  });\n};\n","'use strict';\n\nexport default class ChromecastPlayer {\n\n\t/**\n\t *\n\t * @param {cast.framework.RemotePlayer} player\n\t * @param {cast.framework.RemotePlayerController} controller\n\t * @param {MediaElement} media\n\t * @param {Object} options\n\t */\n\tconstructor (player, controller, media, options) {\n\t\tconst t = this;\n\t\tt.player = player;\n\t\tt.controller = controller;\n\t\tt.media = media;\n\t\tt.endedMedia = false;\n\n\t\t// Add event listeners for player changes which may occur outside sender app\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED, () => {\n\t\t\tif (t.paused) {\n\t\t\t\tt.pause();\n\t\t\t} else {\n\t\t\t\tt.play();\n\t\t\t}\n\t\t\tt.endedMedia = false;\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, () => {\n\t\t\tt.setMuted(t.player.isMuted);\n\t\t\tt.volume = 0;\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('loadedmetadata', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, () => {\n\t\t\tt.volume = t.player.volumeLevel;\n\t\t\tconst event = mejs.Utils.createEvent('volumechange', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('timeupdate', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED, () => {\n\t\t\tconst event = mejs.Utils.createEvent('timeupdate', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\n\t\t\tif (t.getCurrentTime() >= t.getDuration()) {\n\t\t\t\tt.endedMedia = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst event = mejs.Utils.createEvent('ended', t.media);\n\t\t\t\t\tt.media.dispatchEvent(event);\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t});\n\t\tt.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, () => {\n\t\t\tt.setMuted(t.player.isMuted)\n\t\t});\n\n\t\tt.load();\n\t\treturn t;\n\t}\n\n\tget paused() {\n\t\treturn this.player.isPaused;\n\t}\n\n\tset muted (value) {\n\t\tthis.setMuted(value);\n\t}\n\n\tget muted () {\n\t\treturn this.player.isMuted;\n\t}\n\n\tget ended () {\n\t\treturn this.endedMedia;\n\t}\n\n\tget readyState () {\n\t\treturn this.media.originalNode.readyState;\n\t}\n\n\tset currentTime (value) {\n\t\tthis.setCurrentTime(value);\n\t}\n\n\tget currentTime () {\n\t\treturn this.getCurrentTime();\n\t}\n\n\tget duration () {\n\t\treturn this.getDuration();\n\t}\n\n\tset volume (value) {\n\t\tthis.setVolume(value);\n\t}\n\n\tget volume () {\n\t\treturn this.getVolume();\n\t}\n\n\tset src (src) {\n\t\tthis.setSrc(src);\n\t}\n\n\tget src () {\n\t\treturn this.getSrc();\n\t}\n\n\tgetSrc () {\n\t\treturn this.media.originalNode.src;\n\t}\n\n\tsetSrc (value) {\n\t\tthis.media.originalNode.src = typeof value === 'string' ? value : value[0].src;\n\t\tthis.load();\n\t}\n\n\tsetCurrentTime (value) {\n\t\tthis.player.currentTime = value;\n\t\tthis.controller.seek();\n\t\tconst event = mejs.Utils.createEvent('timeupdate', this.media);\n\t\tthis.media.dispatchEvent(event);\n\t}\n\n\tgetCurrentTime () {\n\t\treturn this.player.currentTime;\n\t}\n\n\tgetOriginalDuration () {\n\t\treturn this.media.getDuration();\n\t}\n\n\tgetDuration () {\n\t\treturn this.getOriginalDuration();\n\t}\n\n\tsetVolume (value) {\n\t\tthis.player.volumeLevel = value;\n\t\tthis.controller.setVolumeLevel();\n\t\tconst event = mejs.Utils.createEvent('volumechange', this.media);\n\t\tthis.media.dispatchEvent(event);\n\t}\n\n\tgetVolume () {\n\t\treturn this.player.volumeLevel;\n\t}\n\n\tplay () {\n\t\tif (this.player.isPaused) {\n\t\t\tthis.controller.playOrPause();\n\t\t\tconst event = mejs.Utils.createEvent('play', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}\n\t}\n\n\tpause () {\n\t\tif (!this.player.isPaused) {\n\t\t\tthis.controller.playOrPause();\n\t\t\tconst event = mejs.Utils.createEvent('pause', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}\n\t}\n\n\tload () {\n\t\tconst t = this;\n\t\tconst castSession = cast.framework.CastContext.getInstance().getCurrentSession();\n        const tracks = [];\n        const children = t.media.originalNode.children;\n\n        let url = null;\n        let type = null;\n\n        let counter = 1;\n\n        for (let i = 0, total = children.length; i < total; i++) {\n            const child = children[i];\n            const tag = child.tagName.toLowerCase();\n\n            if (tag === 'track' && (child.getAttribute('kind') === 'subtitles' || child.getAttribute('kind') === 'captions')) {\n                const el = new chrome.cast.media.Track(counter, chrome.cast.media.TrackType.TEXT);\n                el.trackContentId = mejs.Utils.absolutizeUrl(child.getAttribute('src'));\n                el.trackContentType = 'text/vtt';\n                el.subtype = chrome.cast.media.TextTrackType.SUBTITLES;\n                el.name = child.getAttribute('label');\n                el.language = child.getAttribute('srclang');\n                el.customData = null;\n                tracks.push(el);\n                counter++;\n            }\n            if (tag === 'source' && url === null) {\n                url = child.getAttribute('src');\n                // type = child.getAttribute('type');\n            }\n        }\n        type = 'application/x-mpegurl';\n\n\t\tconst mediaInfo = new chrome.cast.media.MediaInfo(url, type);\n\n        mediaInfo.textTrackStyle = new chrome.cast.media.TextTrackStyle();\n        mediaInfo.tracks = tracks;\n\n\t\tmediaInfo.metadata = new chrome.cast.media.GenericMediaMetadata();\n\t\tmediaInfo.streamType = chrome.cast.media.StreamType.Live;\n        mediaInfo.hlsSegmentFormat = 'ts';\n\t\tmediaInfo.customData = null;\n\t\tmediaInfo.duration = null;\n\t\t// mediaInfo.currentTime = t.isLive ? Infinity : 0;\n\n\t\tif (t.media.originalNode.getAttribute('data-cast-title')) {\n\t\t\tmediaInfo.metadata.title = t.media.originalNode.getAttribute('data-cast-title');\n\t\t}\n\n\t\tif (t.media.originalNode.getAttribute('data-cast-description')) {\n\t\t\tmediaInfo.metadata.subtitle = t.media.originalNode.getAttribute('data-cast-description');\n\t\t}\n\n\t\tif (t.media.originalNode.getAttribute('poster') || t.media.originalNode.getAttribute('data-cast-poster')) {\n\t\t\tconst poster = t.media.originalNode.getAttribute('poster') || t.media.originalNode.getAttribute('data-cast-poster');\n\t\t\tmediaInfo.metadata.images = [\n\t\t\t\t{'url': mejs.Utils.absolutizeUrl(poster)}\n\t\t\t];\n\t\t}\n\n\t\tconst request = new chrome.cast.media.LoadRequest(mediaInfo);\n\n\t\tcastSession.loadMedia(request).then(() => {\n\t\t\t// Autoplay media in the current position\n\t\t\tconst currentTime = t.media.originalNode.currentTime;\n\t\t\tt.setCurrentTime(currentTime);\n\t\t\tt.play();\n\t\t\tif (tracks.length > 0) {\n\t\t\t\tconst tracksInfo = new chrome.cast.media.EditTracksInfoRequest([1]);\n\t\t\t\tcastSession.getMediaSession().editTracksInfo(tracksInfo, () => {\n\t\t\t\t}, (e) => {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst event = mejs.Utils.createEvent('play', t.media);\n\t\t\tt.media.dispatchEvent(event);\n\t\t}, (error) => {\n            console.log(error);\n\t\t\tt._getErrorMessage(error);\n\t\t});\n\t}\n\n\tsetMuted (value) {\n\t\tif (value === true && !this.player.isMuted) {\n\t\t\tthis.controller.muteOrUnmute();\n\t\t} else if (value === false && this.player.isMuted) {\n\t\t\tthis.controller.muteOrUnmute();\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tconst event = mejs.Utils.createEvent('volumechange', this.media);\n\t\t\tthis.media.dispatchEvent(event);\n\t\t}, 50);\n\t}\n\n\t_getErrorMessage (error) {\n\n\t\tconst description = error.description ? ` : ${error.description}` : '.';\n\n\t\tlet message;\n\n\t\tswitch (error.code) {\n\t\t\tcase chrome.cast.ErrorCode.API_NOT_INITIALIZED:\n\t\t\t\tmessage = `The API is not initialized${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.CANCEL:\n\t\t\t\tmessage = `The operation was canceled by the user${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.CHANNEL_ERROR:\n\t\t\t\tmessage = `A channel to the receiver is not available${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.EXTENSION_MISSING:\n\t\t\t\tmessage = `The Cast extension is not available${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.INVALID_PARAMETER:\n\t\t\t\tmessage = `The parameters to the operation were not valid${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:\n\t\t\t\tmessage = `No receiver was compatible with the session request${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.SESSION_ERROR:\n\t\t\t\tmessage = `A session could not be created, or a session was invalid${description}`;\n\t\t\t\tbreak;\n\t\t\tcase chrome.cast.ErrorCode.TIMEOUT:\n\t\t\t\tmessage = `The operation timed out${description}`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmessage = `Unknown error: ${error}`;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconsole.error(message);\n\t}\n}\n\nwindow.ChromecastPlayer = ChromecastPlayer;","import ChromecastPlayer from './chromecast/player';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildchromecast(player, controls, layers) {\n        const t = this;\n        window['__onGCastApiAvailable'] = function(isAvailable) {\n            if (isAvailable) {\n                t._initializeCastPlayer();\n            }\n        };\n        if (window.cast) {\n            t._initializeCastPlayer();\n        } else {\n            const s = document.createElement('script');\n            s.type = 'text/javascript';\n            s.src = 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1';\n            document.body.appendChild(s);\n        }\n        player.castButton = document.createElement('div');\n\t\tplayer.castButton.className = `${t.options.classPrefix}button ${t.options.classPrefix}cast-button`;\n\t\tplayer.castButton.innerHTML =\n\t\t\t`<google-cast-launcher id=\"castbutton\"></google-cast-launcher>`;\n        player.container.appendChild(player.castButton);\n    },\n\t/**\n\t *\n\t * @private\n\t */\n     _initializeCastPlayer () {\n\t\tconst t = this;\n\n\t\tconst\n\t\t\tcontext = cast.framework.CastContext.getInstance(),\n\t\t\tsession = context.getCurrentSession()\n\t\t;\n\n        context.setOptions({\n            receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n            autoJoinPolicy: chrome.cast.AutoJoinPolicy.PAGE_SCOPED,\n            androidReceiverCompatible: true,\n        });\n\n\t\tt.remotePlayer = new cast.framework.RemotePlayer();\n\t\tt.remotePlayerController = new cast.framework.RemotePlayerController(t.remotePlayer);\n\t\tt.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED, t._switchToCastPlayer.bind(this));\n\n\t\tif (session) {\n\t\t\tsession.endSession(true);\n\t\t\t// t._switchToCastPlayer();\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t_switchToCastPlayer () {\n\t\tconst t = this;\n\n\t\tif (t.proxy) {\n\t\t\tt.proxy.pause();\n\t\t}\n\t\tif (cast && cast.framework) {\n\t\t\tif (t.remotePlayer.isConnected) {\n\t\t\t\tt._setupCastPlayer();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tt._setDefaultPlayer();\n\t},\n\t/**\n\t *\n\t * @private\n\t */\n\t_setupCastPlayer () {\n\t\tconst\n\t\t\tt = this,\n\t\t\tcontext = cast.framework.CastContext.getInstance(),\n\t\t\tcastSession = context.getCurrentSession()\n\t\t;\n\n\t\tif (t.loadedChromecast === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tt.loadedChromecast = true;\n\n\t\tt.proxy = new ChromecastPlayer(t.remotePlayer, t.remotePlayerController, t.media, t.options);\n\n\t\t// If no Cast was setup correctly, make sure it is\n\t\tt.media.addEventListener('loadedmetadata', () => {\n\t\t\tif (['SESSION_ENDING', 'SESSION_ENDED', 'NO_SESSION'].indexOf(castSession.getSessionState()) === -1 &&\n\t\t\t\tt.proxy instanceof DefaultPlayer) {\n\t\t\t\tt.proxy.pause();\n\t\t\t\tt.proxy = new ChromecastPlayer(t.remotePlayer, t.remotePlayerController, t.media, t.options);\n\t\t\t}\n\t\t});\n\n\t\tt.media.addEventListener('timeupdate', () => {\n\t\t\tt.currentMediaTime = t.getCurrentTime();\n\t\t});\n\t}\n})","module.exports = \"<p>YOURSITE respects the intellectual property of others. YOURSITE takes matters of Intellectual Property very seriously and is committed to meeting the needs of content owners while helping them manage publication of their content online.</p>\\n<p>It should be noted that YOURSITE is a simple search engine of videos available at a wide variety websites.\\nIf you believe that your copyrighted work has been copied in a way that constitutes copyright infringement and is accessible on this site, you may notify our copyright agent, as set forth in the Digital Millennium Copyright Act of 1998 (DMCA). For your complaint to be valid under the DMCA, you must provide the following information when providing notice of the claimed copyright infringement:</p>\\n<p>A physical or electronic signature of a person authorized to act on behalf of the copyright owner Identification of the copyrighted work claimed to have been infringed\\nIdentification of the material that is claimed to be infringing or to be the subject of the infringing activity and that is to be removed\\nInformation reasonably sufficient to permit the service provider to contact the complaining party, such as an address, telephone number, and, if available, an electronic mail address\\nA statement that the complaining party &quot;in good faith believes that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or law&quot;\\nA statement that the &quot;information in the notification is accurate&quot;, and &quot;under penalty of perjury, the complaining party is authorized to act on behalf of the owner of an exclusive right that is allegedly infringed&quot;\\nThe above information must be submitted as a written, faxed or emailed notification to the following Designated Agent:</p>\\n<p>Attn: DMCA Office</p>\\n<p>Contact Us : http://www.watchdogsecurity.online</p>\\n<p>WE CAUTION YOU THAT UNDER FEDERAL LAW, IF YOU KNOWINGLY MISREPRESENT THAT ONLINE MATERIAL IS INFRINGING, YOU MAY BE SUBJECT TO HEAVY CIVIL PENALTIES. THESE INCLUDE MONETARY DAMAGES, COURT COSTS, AND ATTORNEYS FEES INCURRED BY US, BY ANY COPYRIGHT OWNER, OR BY ANY COPYRIGHT OWNER&#39;S LICENSEE THAT IS INJURED AS A RESULT OF OUR RELYING UPON YOUR MISREPRESENTATION. YOU MAY ALSO BE SUBJECT TO CRIMINAL PROSECUTION FOR PERJURY.</p>\\n<p>This information should not be construed as legal advice, for further details on the information required for valid DMCA notifications, see 17 U.S.C. 512(c)(3).</p>\\n\";","import Settings from '../../components/App/Show/Player/MediaElement/Embed.vue';\nimport registry from '../registry';\nObject.assign(MediaElementPlayer.prototype, {\n    async buildembed(player, controls, layers) {\n        // const store = this.options.store;\n        // let {getters, dispatch} = store;\n        player.embedButton = document.createElement('div');\n        player.embedButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}embed-button`;\n        player.embedButton.innerHTML =\n            `<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\">&lt;<span class=\"slash\">/</span>&gt;</button>`;\n        this.addControlElement(player.embedButton, 'embed');\n        player.embedLayer = document.createElement('div');\n        player.embedLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}embed`;\n        const embedContainer = document.createElement('div');\n        player.embedLayer.appendChild(embedContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.embedLayer, playLayer);\n        player.embedLayer.style.width = '100%';\n        player.embedLayer.style.height = '100%';\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.embedLayer.style.display = 'none';\n            } else {\n                player.embedLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        registry.buildVue({\n            el: embedContainer,\n            render: (h) => h(Settings, {on: {\n                close: t,\n            }}),\n        });\n        player.embedLayer.style.display = 'none';\n        player.embedLayer.style.zIndex = 2;\n        player.embedButton.addEventListener('click', t);\n    },\n})","export const SET_TORRENT_SUCCESS = 'SET_TORRENT_SUCCESS';\nexport const SET_PWD_SUCCESS = 'SET_PWD_SUCCESS';\nexport const SET_FILE_SUCCESS = 'SET_FILE_SUCCESS';\nexport const SET_SOURCE = 'SET_SOURCE';\nexport const SET_PLAYER_STATUS_SUCCESS = 'SET_PLAYER_STATUS_SUCCESS';\nexport const SET_PLAYER_FILE_PATH_SUCCESS = 'SET_PLAYER_FILE_PATH_SUCCESS';\nexport const SET_PLAYER_SOURCE_URL_SUCCESS = 'SET_PLAYER_SOURCE_URL_SUCCESS';\nexport const SET_TORRENT_FAILURE = 'SET_TORRENT_FAILURE';\nexport const CLEAR_TORRENT_LOAD_ERROR = 'CLEAR_TORRENT_LOAD_ERROR';\nexport const SET_STAT_SUCCESS = 'SET_STAT_SUCCESS';\nexport const SET_LOAD_STATE = 'SET_LOAD_STATE';\nexport const SET_LOAD_STATE_SUCCESS = 'SET_LOAD_STATE_SUCCESS';\nexport const SET_LOAD_STATE_FAILURE = 'SET_LOAD_STATE_FAILURE';\nexport const SET_DELIVERY_FAILURE = 'SET_DELIVERY_FAILURE';\nexport const CLEAR_DELIVERY_FAILURE = 'CLEAR_DELIVERY_FAILURE';\nexport const SET_DELIVERY_TOKEN = 'SET_DELIVERY_TOKEN';\nexport const SET_DOWNLOAD_ID = 'SET_DOWNLOAD_ID';\nexport const SET_LANG = 'SET_LANG';\nexport const SET_USER_LANG = 'SET_USER_LANG';\nexport const SET_ABUSED = 'SET_ABUSED';\nexport const SET_MEDIA_INFO = 'SET_MEDIA_INFO';\nexport const SET_PLAYER_TIME = 'SET_PLAYER_TIME';\nexport const SET_CURRENT_DIR_FILE_STATES = 'SET_CURRENT_DIR_FILE_STATES';\nexport const SET_FILE_STATE = 'SET_FILE_STATE';\nexport const SET_RECENT_TORRENTS = 'SET_RECENT_TORRENTS';\nexport const SET_RECENT_TORRENT = 'SET_RECENT_TORRENT';\nexport const SET_AUDIO_SETTING = 'SET_AUDIO_SETTING';\nexport const SET_SUBTITLE_SETTING = 'SET_SUBTITLE_SETTING';\nexport const DROP_AUDIO_SETTING = 'DROP_AUDIO_SETTING';\nexport const DROP_SUBTITLE_SETTING = 'DROP_SUBTITLE_SETTING';\nexport const SET_ACTION = 'SET_ACTION';\nexport const SET_DOWNLOAD_PATH = 'SET_DOWNLOAD_PATH';\nexport const SET_ADBLOCK_ENABLED = 'SET_ADBLOCK_ENABLED';\nexport const SET_VIEW_MODE = 'SET_VIEW_MODE';\nexport const SET_THEME = 'SET_THEME';\nexport const SET_ID = 'SET_ID';\nexport const SET_EXTERNAL_FEATURES = 'SET_EXTERNAL_FEATURES';\nexport const SET_EXTERNAL_SUBTITLES = 'SET_EXTERNAL_SUBTITLES';\nexport const SET_ATTACHED_TRACKS = 'SET_ATTACHED_TRACKS';\nexport const SET_EXTERNAL_POSTER = 'SET_EXTERNAL_POSTER';\nexport const SET_EXTERNAL_CONTROLS = 'SET_EXTERNAL_CONTROLS';\nexport const SET_AUTOPLAY = 'SET_AUTOPLAY';\nexport const SET_CAPTION = 'SET_CAPTION';\nexport const SET_PLAYER_CONTROLS_SHOWN = 'SET_PLAYER_CONTROLS_SHOWN';\nexport const SET_PLAYER_FULLSCREEN = 'SET_PLAYER_FULLSCREEN';\nexport const SET_HEADER = 'SET_HEADER';\nexport const SET_EXTERNAL_TITLE = 'SET_EXTERNAL_TITLE';\nexport const SET_WIDTH = 'SET_WIDTH';\nexport const SET_HEIGHT = 'SET_HEIGHT';\nexport const SET_IMDBID = 'SET_IMDBID';\nexport const SET_COMPLETED_PIECES = 'SET_COMPLETED_PIECES';\nexport const CHANGE_CAPTION_SIZE = 'SET_CAPTION_SIZE';\nexport const SET_USER_SETTINGS = 'SET_USER_SETTINGS';\nexport const SET_ADS_INJECTED = 'SET_ADS_INJECTED';\nexport const SET_PLAYER_NATIVE_FULLSCREEN = 'SET_PLAYER_NATIVE_FULLSCREEN';\nexport const SET_NEW_POSITION = 'SET_NEW_POSITION';\nexport const SET_SEEDER = 'SET_SEEDER';\nexport const SET_ZIP_DOWNLOAD = 'SET_ZIP_DOWNLOAD';\nexport const SET_LAST_TIME = 'SET_LAST_TIME';\nexport const SET_FIRST_PLAY = 'SET_FIRST_PLAY';\nexport const SET_IS_CACHED = 'SET_IS_CACHED';\nexport const SET_NAME = 'SET_NAME';\nexport const SET_DOWNLOAD_STAT = 'SET_DOWNLOAD_STAT';\nexport const DROP_DOWNLOAD_STAT = 'DROP_DOWNLOAD_STAT';\nexport const SET_DOWNLOAD_TYPE = 'SET_DOWNLOAD_TYPE';\nexport const UPDATE_WINDOW_WIDTH = 'UPDATE_WINDOW_WIDTH';\nexport const SET_INITED = 'SET_INITED';\nexport const SET_PROGRESS = 'SET_PROGRESS';\nexport const SET_API_UNREACHABLE = 'SET_API_UNREACHABLE';\n","import Continue from '../../components/App/Show/Player/MediaElement/Continue.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildcontinue(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        if (state.time <= 60) {\n            player.currentTime = 0;\n            return;\n        }\n        const time = state.time; \n        const play = player.play;\n        let lock = true;\n        player.play = () => {\n            if (!lock) {\n                play.apply(player);\n            }\n        }\n        player.pause();\n        player.continueLayer = document.createElement('div');\n        player.continueLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}continue`;\n        const continueContainer = document.createElement('div');\n        player.continueLayer.appendChild(continueContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n\n        layers.insertBefore(player.continueLayer, playLayer);\n        // playLayer.style.display = 'none';\n        // let toggle = false;\n        function hideAndPlay() {\n            lock = false;\n            player.play();\n            player.continueLayer.style.display = 'none';\n        }\n        function restartWatch() {\n            if (!player) return;\n            player.currentTime = 0;\n            hideAndPlay();\n        }\n        function continueWatch() {\n            player.currentTime = time - 5;\n            hideAndPlay();\n        }\n        registry.buildVue({\n            el: continueContainer,\n            render: (h) => h(Continue, {\n                on: {\n                    continueWatch,\n                    restartWatch,\n                },\n                props: {\n                    time,\n                },\n            }),\n        });\n        player.continueLayer.style.zIndex = 2;\n        playLayer.style.display = 'none';\n    },\n})","import Tracks from '../../components/App/Show/Player/MediaElement/Tracks.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildadvancedtracks(player, controls, layers) {\n        player.tracksButton = document.createElement('div');\n\t\tplayer.tracksButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}captions-button`;\n\t\tplayer.tracksButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"></button>`;\n\t\tthis.addControlElement(player.tracksButton, 'tracks');\n        player.tracksLayer = document.createElement('div');\n        player.tracksLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}tracks`;\n        const tracksContainer = document.createElement('div');\n        player.tracksLayer.appendChild(tracksContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.tracksLayer, playLayer);\n        player.tracksLayer.style.width = '100%';\n        player.tracksLayer.style.height = '100%';\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.tracksLayer.style.display = 'none';\n            } else {\n                player.tracksLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        const show = () => {\n            player.tracksLayer.style.display = '';\n            toggle = true;\n        }\n        const close = () => {\n            player.tracksLayer.style.display = 'none';\n            toggle = false;\n        }\n        const v = registry.buildVue({\n            el: tracksContainer,\n            render: (h) => h(Tracks, {\n                props: {\n                    player: player,\n                },\n                on: {\n                    close,\n                    show,\n                }\n            }),\n        });\n        player.tracksLayer.style.display = 'none';\n        player.tracksLayer.style.zIndex = 2;\n        player.tracksButton.addEventListener('click', t);\n\n    },\n})","import Captions from '../../components/App/Show/Player/MediaElement/Tracks/Captions.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildcaptions(player, controls, layers) {\n\t\tplayer.captionsLayer = document.createElement('div');\n\t\tplayer.captionsLayer.className = `${this.options.classPrefix}captions-layer ${this.options.classPrefix}layer`;\n        const captionsContainer = document.createElement('div');\n        player.captionsLayer.appendChild(captionsContainer);\n\t\tlayers.insertBefore(player.captionsLayer, layers.firstChild);\n        player.captionsLayer.style.width = '100%';\n        player.captionsLayer.style.height = '100%';\n        player.captionsLayer.addEventListener('click', function() {\n            player.pause();\n        });\n        registry.buildVue({\n            el: captionsContainer,\n            render: (h) => h(Captions),\n        });\n    },\n})","const debug = require('debug')('webtor:lib:captions');\nimport throttle from 'lodash/throttle';\nconst debugFetch = function(url) {\n    debug('fetch caption url=%o', url);\n    return fetch(url);\n}\nconst retryFetch = require('fetch-retry')(debugFetch, {\n    retries: 5,\n    retryDelay: function(attempt, error, response) {\n        return Math.pow(2, attempt) * 1000;\n    },\n    retryOn: function(attempt, error, response) {\n        if (error !== null || response.status >= 500) {\n            debug('got captions error retry count=%o', attempt);\n            return true;\n        }\n    },\n});\nasync function getHLSFragments(srcUrl) {\n    const res = await(retryFetch(srcUrl));\n    const src = await res.text();\n    const parentUrl = srcUrl.substring(0, srcUrl.lastIndexOf( \"/\" ) + 1);\n    const fragments = [];\n    const lines = src.split(\"\\n\");\n    let current = 0;\n    let num = 0;\n    let fragment = {};\n    let ended = false;\n    for (const l of lines) {\n        const m = l.match('#EXTINF:([0-9\\.]+),');\n        if (l == '#EXT-X-ENDLIST') {\n            ended = true;\n        }\n        if (m) {\n            fragment.num = num;\n            fragment.length = parseFloat(m[1]);\n            num++;\n        }\n        if (l.match('^[^#]')) {\n            fragment.name = l;\n            fragment.src = parentUrl + fragment.name;\n        }\n        if (fragment.name !== undefined) {\n            fragments.push(fragment);\n            fragment.content = function(f) {\n                let prom = null;\n                return function() {\n                    if (prom === null) {\n                        prom = new Promise(async function(resolve, reject) {\n                            const res = await(retryFetch(f.src));\n                            const src = await res.text();\n                            resolve(src);\n                        });\n                    }\n                    return prom;\n                }\n            }(fragment);\n            fragment = {start: current};\n        }\n    }\n    return {fragments, ended};\n}\n\nfunction convertSMPTEtoSeconds(SMPTE) {\n\n\tif (typeof SMPTE !== 'string') {\n\t\tthrow new TypeError('Argument must be a string value');\n\t}\n\n\tSMPTE = SMPTE.replace(',', '.');\n\n\tconst decimalLen = ~SMPTE.indexOf('.') ? SMPTE.split('.')[1].length : 0;\n\n\tlet\n\t\tsecs = 0,\n\t\tmultiplier = 1\n\t;\n\n\tSMPTE = SMPTE.split(':').reverse();\n\n\tfor (let i = 0, total = SMPTE.length; i < total; i++) {\n\t\tmultiplier = 1;\n\t\tif (i > 0) {\n\t\t\tmultiplier = Math.pow(60, i);\n\t\t}\n\t\tsecs += Number(SMPTE[i]) * multiplier;\n\t}\n\treturn Number(secs.toFixed(decimalLen));\n}\n\nfunction parseDFXP(trackText) {\n    trackText = $(trackText).filter('tt');\n    const\n        container = trackText.firstChild,\n        lines = container.querySelectorAll('p'),\n        styleNode = trackText.getElementById(`${container.attr('style')}`),\n        entries = []\n    ;\n\n    let styles;\n\n    if (styleNode.length) {\n        styleNode.removeAttribute('id');\n        const attributes = styleNode.attributes;\n        if (attributes.length) {\n            styles = {};\n            for (let i = 0, total = attributes.length; i < total; i++) {\n                styles[attributes[i].name.split(\":\")[1]] = attributes[i].value;\n            }\n        }\n    }\n\n    for (let i = 0, total = lines.length; i < total; i++) {\n        let\n            style,\n            _temp = {\n                start: null,\n                stop: null,\n                style: null,\n                text: null\n            }\n        ;\n\n        if (lines.eq(i).attr('begin')) {\n            _temp.start = convertSMPTEtoSeconds(lines.eq(i).attr('begin'));\n        }\n        if (!_temp.start && lines.eq(i - 1).attr('end')) {\n            _temp.start = convertSMPTEtoSeconds(lines.eq(i - 1).attr('end'));\n        }\n        if (lines.eq(i).attr('end')) {\n            _temp.stop = convertSMPTEtoSeconds(lines.eq(i).attr('end'));\n        }\n        if (!_temp.stop && lines.eq(i + 1).attr('begin')) {\n            _temp.stop = convertSMPTEtoSeconds(lines.eq(i + 1).attr('begin'));\n        }\n\n        if (styles) {\n            style = '';\n            for (let _style in styles) {\n                style += `${_style}:${styles[_style]};`;\n            }\n        }\n        if (style) {\n            _temp.style = style;\n        }\n        if (_temp.start === 0) {\n            _temp.start = 0.200;\n        }\n        _temp.text = lines.eq(i).innerHTML.trim().replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n        entries.push(_temp);\n    }\n    return entries;\n}\n\nfunction parseWebVTT(trackText) {\n    const\n        lines = trackText.split(/\\r?\\n/),\n        entries = [],\n        pattern = /^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/\n    ;\n    let\n        timecode,\n        text,\n        identifier\n    ;\n\n    for (let i = 0, total = lines.length; i < total; i++) {\n        timecode = pattern.exec(lines[i]);\n\n        if (timecode && i < lines.length) {\n            if ((i - 1) >= 0 && lines[i - 1] !== '') {\n                identifier = lines[i - 1];\n            }\n            i++;\n            // grab all the (possibly multi-line) text that follows\n            text = lines[i];\n            i++;\n            while (lines[i] !== '' && i < lines.length) {\n                text = `${text}\\n${lines[i]}`;\n                i++;\n            }\n            text = text.trim().replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n            entries.push({\n                identifier: identifier,\n                start: (convertSMPTEtoSeconds(timecode[1]) === 0) ? 0.200 : convertSMPTEtoSeconds(timecode[1]),\n                stop: convertSMPTEtoSeconds(timecode[3]),\n                text: text,\n                settings: timecode[5]\n            });\n        }\n        identifier = '';\n    }\n    return entries;\n}\n\nfunction parse(str) {\n    return typeof str === 'string' && (/<tt\\s+xml/ig).exec(str) ?\n        parseDFXP(str) : parseWebVTT(str);\n}\n\nfunction sanitize(html) {\n    const div = document.createElement('div');\n    div.innerHTML = html;\n\n    // Remove all `<script>` tags first\n    const scripts = div.getElementsByTagName('script');\n    let i = scripts.length;\n    while (i--) {\n        scripts[i].remove();\n    }\n\n    // Loop the elements and remove anything that contains value=\"javascript:\" or an `on*` attribute\n    // (`onerror`, `onclick`, etc.)\n    const allElements = div.getElementsByTagName('*');\n    for (let i = 0, n = allElements.length; i < n; i++) {\n        const\n            attributesObj = allElements[i].attributes,\n            attributes = Array.prototype.slice.call(attributesObj)\n        ;\n\n        for (let j = 0, total = attributes.length; j < total; j++) {\n            if (attributes[j].name.startsWith('on') || attributes[j].value.startsWith('javascript')) {\n                allElements[i].remove();\n            } else if (attributes[j].name === 'style') {\n                allElements[i].removeAttribute(attributes[j].name);\n            }\n        }\n\n    }\n    return div.innerHTML;\n}\n\nfunction isDataURI(url) {\n    return url.match(/^data:(?:.+?\\/.+?)?(?:;.+?=.+?)*(?:;base64)?,.*$/);\n}\nfunction b64DecodeUnicode(str) {\n    // Going backwards: from bytestream, to percent-encoding, to original string.\n    return decodeURIComponent(atob(str).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n}\n\nfunction searchTrackPosition(tracks, currentTime) {\n    let\n        lo = 0,\n        hi = tracks.length - 1,\n        mid,\n        start,\n        stop\n    ;\n\n    while (lo <= hi) {\n        mid = ((lo + hi) >> 1);\n        start = tracks[mid].start;\n        stop = tracks[mid].stop;\n\n        if (currentTime >= start && currentTime < stop) {\n            return mid;\n        } else if (start < currentTime) {\n            lo = mid + 1;\n        } else if (start > currentTime) {\n            hi = mid - 1;\n        }\n    }\n\n    return -1;\n}\n\nclass BasicSource {\n    constructor(src) {\n        this.entries = parse(src);\n    }\n    getEntry(time) {\n        const i = searchTrackPosition(this.entries, time)\n        if (i > -1) return this.entries[i];\n        return null;\n    }\n}\n\nclass HLSSource {\n    constructor(src) {\n        this.src = src;\n        this.fragments = [];\n        this.fetching = false;\n        this.ended = false;\n        this.entries = [];\n        this.entriesByFragment = [];\n        this.lastTime = 0;\n        this.lastIndex = 0;\n        this.lookAhead = 60*5;\n        this.getHLSFragments = throttle(getHLSFragments, 5000, {\n            trailing: false,\n        });\n    }\n    findFragment(time) {\n        for (const f of this.fragments) {\n            if (time > f.start && time < f.end) {\n                return f;\n            }\n        }\n    }\n    async importEntries(f) {\n        if (f.num in this.entriesByFragment) return;\n        const c = await f.content();\n        const entries = parse(c);\n        this.entriesByFragment[f.num] = entries;\n        if (entries.length == 0) return;\n        let temp = [];\n        for (const e of this.entriesByFragment) {\n            if (e) temp = temp.concat(e);\n        }\n        this.entries = temp;\n    }\n    async preload(time) {\n        let i;\n        for (i = this.lastIndex; i < this.fragments.length && this.lastTime < time + this.lookAhead; i++) {\n            await this.importEntries(this.fragments[i]);\n            this.lastTime = this.entries.slice(-1)[0].start;\n        }\n        this.lastIndex = i;\n    }\n    async loadFragments(time) {\n        if (this.lastTime >= time + this.lookAhead) return;\n        if (!this.ended) {\n            const {fragments, ended} = await this.getHLSFragments(this.src);\n            this.fragments = fragments;\n            this.ended = ended;\n        }\n        await this.preload(time);\n    }\n    async getEntry(time) {\n        this.loadFragments(time);\n        const i = searchTrackPosition(this.entries, time)\n        if (i > -1) return this.entries[i];\n        return null;\n    }\n}\n\nfunction makeBasicSource(src) {\n    return new BasicSource(src);\n}\n\nfunction makeHLSSource(src) {\n    return new HLSSource(src);\n}\n\nasync function getCaptionSource(src) {\n    if (!src) {\n        return null;\n    } else if (isDataURI(src)) {\n        return makeBasicSource(b64DecodeUnicode(src.split(',')[1]));\n    } else if (src.match(/\\.(srt|vtt)/)) {\n        const res = await(retryFetch(src));\n        const data = await res.text();\n        return makeBasicSource(data);\n    } else if (src.match(/\\.m3u8/)) {\n        return makeHLSSource(src);\n    }\n}\n\nexport {getCaptionSource, sanitize};","import AvailabeProgress from '../../components/App/Show/Player/MediaElement/AvailabeProgress.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildavailableprogress(player, controls, layers) {\n        const store = this.options.store;\n        const slider = player.slider;\n        const el = document.createElement('span');\n        // el.className = `${this.options.classPrefix}time-available`;\n        slider.appendChild(el);\n        // player.errorLayer = document.createElement('div');\n        // player.errorLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}error`;\n        // const errorContainer = document.createElement('div');\n        // player.errorLayer.appendChild(errorContainer);\n        // player.errorLayer.style.width = '100%';\n        // player.errorLayer.style.height = '100%';\n        // player.errorLayer.style.display = 'none';\n        // const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // player.media.addEventListener('error', function(e) {\n        //     player.errorLayer.style.display = '';\n        // });\n        // layers.insertBefore(player.errorLayer, playLayer);\n        const self = this;\n        registry.buildVue({\n            el,\n            render: (h) => h(AvailabeProgress, {\n                props: {\n                    options: self.options,\n                }\n            }),\n        });\n    },\n})","const registry = {};\nexport default registry;","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\nimport {addLangRoutes} from './langRoutes';\nconst routes = addLangRoutes([\n  {path: '/', name: 'intro', component: () => import('../components/App/Intro.vue')},\n  {path: '/show', name: 'show', component: () => import('../components/App/Show.vue')},\n  {path: '/support', name: 'support', component: () => import('../components/App/Support.vue')},\n  {path: '/dmca', name: 'dmca', component: () => import('../components/App/DMCA.vue')},\n  {path: '/magnet-to-torrent', name: 'magnet2torrent', component: () => import('../components/App/Tools/Magnet2Torrent.vue')},\n  {path: '/torrent-to-magnet', name: 'torrent2magnet', component: () => import('../components/App/Tools/Torrent2Magnet.vue')},\n  {path: '/torrent-to-ddl', name: 'torrent2ddl', component: () => import('../components/App/Tools/Torrent2DDL.vue')},\n  {path: '/empty', name: 'empty', component: () => import('../components/App/Empty.vue')},\n  {path: '/:magnet(magnet\\:.*)', name: 'magnet-uri', component: () => import('../components/App/Show.vue')},\n  {path: '/:infohash([0-9a-fA-F]{40})', name: 'infohash', component: () => import('../components/App/Show.vue')},\n]);\n\nexport function createRouter({mode}) {\n  return new VueRouter({\n    mode,\n    routes,\n  });\n}\n","const md5 = require('md5');\n\nexport function randomId(prefix = '') {\n  return md5(prefix + Date.now().toString());\n}\n\nexport function clean(data) {\n  return Object.assign({}, data);\n}\n\nexport function cleanState({name, pwd, file, torrent}) {\n  return {\n    name,\n    pwd,\n    file,\n    torrent: torrent ? torrent.infoHash : null,\n  };\n}\n\nexport function cleanPlayerTrack(track) {\n  if (!track || !track.src) return track;\n  const res = Object.assign({}, track);\n  let href = '';\n  if (typeof res.src === 'object') {\n    href = res.src.href;\n  } else {\n      href = res.src;\n  }\n  res.src = href.split(\"?\")[0];\n  return res;\n}\n\nexport function processSubtitles(subs) {\n  subs = subs.sort((a, b) => {\n    a = a.srclang;\n    b = b.srclang;\n    if (a > b) return 1;\n    if (a < b) return -1;\n    return 0;\n  });\n  let same = [];\n  for (const i in subs) {\n    if (i == 0) continue;\n    if (subs[i].label == subs[i - 1].label) {\n      if (same.length == 0) {\n        same.push(subs[i - 1]);\n      }\n      same.push(subs[i]);\n    } else {\n      if (same.length > 0) {\n        for (const y in same) {\n          const idx = parseInt(y) + 1;\n          same[y].label = same[y].label + ' #' + idx;\n        }\n      }\n      same = [];\n    }\n  }\n  return subs;\n}","import {DEFAULT} from './viewModeTypes';\nimport {IDLE} from './playerStatusTypes';\nimport {randomId} from './helpers';\nexport default function({user, deb, i18n, router, ssr, locales}) {\n    return {\n        ssr,\n        inited: false,\n        windowWidth: 0,\n        name: null,\n        controls: true,\n        progress: 0,\n        features: {\n            p2pProgress: true,\n            title: true,\n            settings: true,\n            fullscreen: true,\n            subtitles: true,\n            continue: true,\n            playpause: true,\n            currentTime: true,\n            timeline: true,\n            duration: true,\n            volume: true,\n            chromecast: true,\n            browse: true,\n            download: true,\n            captions: true,\n            embed: true,\n            autoSubtitles: true,\n        },\n        isCached: false,\n        lastTime: null,\n        zipDownload: false,\n        adsInjected: false,\n        completedPieces: [],\n        width: null,\n        height: null,\n        imdbId: null,\n        autoplay: false,\n        firstPlay: true,\n        playerControlsShown: true,\n        playerFullScreen: false,\n        playerNativeFullScreen: false,\n        caption: null,\n        captionSize: 0,\n        externalSubtitles: [],\n        externalPoster: '',\n        externalTitle: null,\n        header: true,\n        adblock: false,\n        apiUnreachable: false,\n        viewMode: DEFAULT,\n        theme: null,\n        user,\n        version: VERSION,\n        subtitle: null,\n        time: 0,\n        mediaInfo: null,\n        debug: deb,\n        baseURL: 'https://webtor.io',\n        sponsorURL: 'https://www.patreon.com/bePatron?u=24145874',\n        authURL: '/auth/patreon',\n        userID: randomId(),\n        downloadID: null,\n        torrent: null,\n        file: null,\n        downloadPath: null,\n        pwd: '/',\n        fileHistory: null,\n        playerStatus: IDLE,\n        playerFilePath: null,\n        playerSourceUrl: null,\n        wrongFormat: false,\n        deliveryFailure: false,\n        loadState: false,\n        deliveryToken: null,\n        abused: false,\n        stats: {},\n        errors: {},\n        source: [],\n        loadError: false,\n        lang: i18n.locale,\n        userLang: locales.length > 0 && locales[0].normalized ? locales[0].normalized : i18n.fallbackLocale,\n        fallbackLang: i18n.fallbackLocale,\n        currentDirFileState: {},\n        recentTorrents: {},\n        newPosition: null,\n        seeder: null,\n        attachedTracks: [],\n        downloadStats: {},\n        downloadType: null,\n    };\n};","export const DEFAULT = 'default';\nexport const VIDEO = 'video';\nexport const DOWNLOAD = 'download';\n","import Vue from 'vue';\nimport {SET_TORRENT_SUCCESS, SET_PWD_SUCCESS,\n        SET_FILE_SUCCESS, SET_SOURCE, SET_PLAYER_STATUS_SUCCESS,\n        SET_PLAYER_FILE_PATH_SUCCESS, SET_TORRENT_FAILURE,\n        CLEAR_TORRENT_LOAD_ERROR, SET_STAT_SUCCESS,\n        SET_LOAD_STATE, SET_LOAD_STATE_SUCCESS, SET_DELIVERY_FAILURE,\n        CLEAR_DELIVERY_FAILURE, SET_DELIVERY_TOKEN, SET_LOAD_STATE_FAILURE,\n        SET_DOWNLOAD_ID, SET_LANG, SET_ABUSED, SET_MEDIA_INFO,\n        SET_PLAYER_TIME, SET_CURRENT_DIR_FILE_STATES, SET_FILE_STATE,\n        SET_RECENT_TORRENTS, SET_RECENT_TORRENT,\n        SET_ADBLOCK_ENABLED, SET_VIEW_MODE, SET_THEME,\n        SET_EXTERNAL_SUBTITLES, SET_EXTERNAL_POSTER, SET_AUTOPLAY, SET_CAPTION, SET_PLAYER_CONTROLS_SHOWN,\n        SET_PLAYER_FULLSCREEN, SET_HEADER, SET_EXTERNAL_TITLE, SET_HEIGHT, SET_WIDTH, SET_IMDBID,\n        SET_COMPLETED_PIECES, CHANGE_CAPTION_SIZE, SET_USER_SETTINGS, SET_PLAYER_SOURCE_URL_SUCCESS,\n        SET_ADS_INJECTED, SET_PLAYER_NATIVE_FULLSCREEN, SET_EXTERNAL_FEATURES, SET_EXTERNAL_CONTROLS,\n        SET_NEW_POSITION, SET_DOWNLOAD_PATH, SET_SEEDER, SET_ZIP_DOWNLOAD,\n        SET_ATTACHED_TRACKS, SET_LAST_TIME, SET_FIRST_PLAY, SET_IS_CACHED, SET_NAME,\n        SET_DOWNLOAD_STAT, DROP_DOWNLOAD_STAT, SET_DOWNLOAD_TYPE, UPDATE_WINDOW_WIDTH, SET_INITED, SET_PROGRESS,\n        SET_USER_LANG, SET_API_UNREACHABLE,\n       } from './mutationTypes';\nimport {PLAYING, PAUSE, SEEKING, ENDED, IDLE} from './playerStatusTypes';\nconst debug = require('debug')('webtor:lib:store');\nexport default {\n    [SET_INITED](state) {\n        state.inited = true;\n    },\n    [UPDATE_WINDOW_WIDTH](state) {\n        debug('update window width=%o', window.innerWidth);\n        state.windowWidth = window.innerWidth;\n    },\n    [SET_NAME](state, val) {\n        state.name = val;\n    },\n    [SET_PROGRESS](state, val) {\n        state.progress = val;\n    },\n    [SET_IS_CACHED](state, val) {\n        state.isCached = val;\n    },\n    [SET_ATTACHED_TRACKS](state, val) {\n        state.attachedTracks = val;\n    },\n    [CHANGE_CAPTION_SIZE](state, val) {\n        if (state.captionSize + val < 0) {\n            return;\n        }\n        state.captionSize = state.captionSize + val;\n    },\n    [SET_ZIP_DOWNLOAD](state, val) {\n        state.zipDownload = val;\n    },\n    [SET_ADS_INJECTED](state, val) {\n        state.adsInjected = val;\n    },\n    [SET_COMPLETED_PIECES](state, val) {\n        state.completedPieces = val;\n    },\n    [SET_WIDTH](state, val) {\n        state.width = val;\n    },\n    [SET_HEIGHT](state, val) {\n        state.height = val;\n    },\n    [SET_IMDBID](state, val) {\n        state.imdbId = val;\n    },\n    [SET_EXTERNAL_SUBTITLES](state, subtitles) {\n        state.externalSubtitles = subtitles;\n    },\n    [SET_HEADER](state, val) {\n        state.header = val;\n    },\n    [SET_EXTERNAL_TITLE](state, val) {\n        state.externalTitle = val;\n    },\n    [SET_EXTERNAL_FEATURES](state, val) {\n        const features = {};\n        for (const k in state.features) {\n            features[k] = state.controls;\n        }\n        state.features = Object.assign(features, val);\n    },\n    [SET_EXTERNAL_CONTROLS](state, val) {\n        state.controls = val;\n    },\n    [SET_AUTOPLAY](state, val) {\n        state.autoplay = val;\n    },\n    [SET_CAPTION](state, val) {\n        state.caption = val;\n    },\n    [SET_NEW_POSITION](state, val) {\n        state.newPosition = val;\n    },\n    [SET_PLAYER_CONTROLS_SHOWN](state, val) {\n        state.playerControlsShown = val;\n    },\n    [SET_PLAYER_FULLSCREEN](state, val) {\n        state.playerFullScreen = val;\n    },\n    [SET_PLAYER_NATIVE_FULLSCREEN](state, val) {\n        state.playerNativeFullScreen = val;\n    },\n    [SET_EXTERNAL_POSTER](state, poster) {\n        state.externalPoster = poster;\n    },\n    [SET_VIEW_MODE](state, mode) {\n        state.viewMode = mode;\n    },\n    [SET_THEME](state, theme) {\n        state.theme = theme;\n    },\n    [SET_ADBLOCK_ENABLED](state) {\n        state.adblock = true;\n    },\n    [SET_API_UNREACHABLE](state) {\n        state.apiUnreachable = true;\n    },\n    [SET_LOAD_STATE](state, text) {\n        state.loadState = text;\n    },\n    [SET_ABUSED](state) {\n        state.loadState = false;\n        state.abused = true;\n    },\n    [SET_LOAD_STATE_SUCCESS](state) {\n        state.loadState = false;\n        state.loadError = false;\n    },\n    [SET_LOAD_STATE_FAILURE](state) {\n        state.loadState = false;\n        state.loadError = true;\n    },\n    [SET_MEDIA_INFO](state, data) {\n        state.mediaInfo = data;\n    },\n    [SET_PLAYER_TIME](state, data) {\n        state.time = data;\n    },\n    [SET_FILE_STATE](state, data) {\n        Vue.set(state.currentDirFileState, data.file, data);\n    },\n    [SET_DOWNLOAD_STAT](state, {p, m}) {\n        Vue.set(state.downloadStats, p, m);\n    },\n    [DROP_DOWNLOAD_STAT](state, p) {\n        Vue.delete(state.downloadStats, p);\n    },\n    [SET_TORRENT_SUCCESS](state, torrent) {\n        if (state.torrent && torrent\n            && torrent.infoHash == state.torrent.infoHash) {\n            return;\n        }\n        state.torrent = torrent;\n        state.file = null;\n        state.pwd = '/';\n        state.source = null;\n        state.alterSource = null;\n        state.playerStatus = null;\n        state.playerFilePath = null;\n        state.wrongFormat = false;\n        state.loadError = false;\n        state.deliveryFailure = false;\n        state.stats = false;\n        state.errors = {};\n        if (state.torrent) {\n            state.abused = false;\n        }\n        state.mediaInfo = null;\n        state.playerStatus = IDLE;\n    },\n    [SET_PWD_SUCCESS](state, pwd) {\n        if (state.pwd == pwd) return;\n        if (!pwd) {\n            state.pwd = '/';\n        } else {\n            state.pwd = pwd;\n        }\n        state.file = null;\n        state.wrongFormat = false;\n        state.deliveryFailure = false;\n        state.playerStatus = IDLE;\n    },\n    [SET_DOWNLOAD_PATH](state, path) {\n        state.downloadPath = path;\n    },\n    [SET_DOWNLOAD_TYPE](state, type) {\n        state.downloadType = type;\n    },\n    [SET_FILE_SUCCESS](state, path) {\n        if (state.file == path) return;\n        state.file = path;\n        state.wrongFormat = false;\n        state.deliveryFailure = false;\n        state.mediaInfo = null;\n        state.caption = null;\n        state.playerStatus = IDLE;\n    },\n    [SET_LANG](state, lang) {\n        state.lang = lang;\n    },\n    [SET_USER_LANG](state, lang) {\n        state.userLang = lang;\n    },\n    [SET_DOWNLOAD_ID](state, id) {\n        state.downloadID = id;\n    },\n    [SET_SOURCE](state, source) {\n        // if (state.playerFilePath != state.filePath) {\n        //   state.playerFilePath = null;\n        // }\n        state.caption = null;\n        state.source = source;\n        state.playerFullScreen = false;\n        state.playerControlsShown = true;\n    },\n    [SET_PLAYER_STATUS_SUCCESS](state, status) {\n        state.playerStatus = status;\n        if (status == SEEKING || status == ENDED) {\n            state.lastTime = null;\n        }\n    },\n    [SET_LAST_TIME](state, time) {\n        state.lastTime = time;\n    },\n    [SET_PLAYER_FILE_PATH_SUCCESS](state, path) {\n        state.playerFilePath = path;\n    },\n    [SET_PLAYER_SOURCE_URL_SUCCESS](state, url) {\n        state.playerSourceUrl = url;\n    },\n    [SET_TORRENT_FAILURE](state) {\n        state.wrongFormat = true;\n    },\n    [SET_DELIVERY_FAILURE](state, { header: { path }, message, data }) {\n        Vue.set(state.errors, `/${path}`, message);\n        state.deliveryFailure = { message, data };\n    },\n    [CLEAR_TORRENT_LOAD_ERROR](state) {\n        state.wrongFormat = false;\n    },\n    [CLEAR_DELIVERY_FAILURE](state) {\n        state.deliveryFailure = false;\n    },\n    [SET_DELIVERY_TOKEN](state, token) {\n        state.deliveryToken = token;\n    },\n    [SET_STAT_SUCCESS](state, data) {\n        state.stats = data;\n    },\n    [SET_CURRENT_DIR_FILE_STATES](state, states) {\n        state.currentDirFileState = states;\n    },\n    [SET_RECENT_TORRENTS](state, torrents) {\n        state.recentTorrents = torrents;\n    },\n    [SET_USER_SETTINGS](state, settings) {\n        if (settings.captionSize) {\n            state.captionSize = settings.captionSize;\n        }\n        if (settings.theme && !state.theme) {\n            state.theme = settings.theme;\n        }\n    },\n    [SET_RECENT_TORRENT](state, data) {\n        Vue.set(state.recentTorrents, data.infoHash, data);\n    },\n    [SET_RECENT_TORRENT](state, data) {\n        Vue.set(state.recentTorrents, data.infoHash, data);\n    },\n    [SET_SEEDER](state, seeder) {\n        state.seeder = seeder;\n    },\n    [SET_FIRST_PLAY](state, val) {\n        state.firstPlay = val;\n    },\n};","export function ls(torrent, pwd, file = null) {\n  if (torrent == null) return [];\n  let tree = {};\n  const addBranch = (tree, parts, file) => {\n    if (parts.length == 0) return file;\n    const part = parts.shift();\n    if (tree[part] == undefined) {\n      tree[part] = addBranch({}, parts, file);\n    } else {\n      tree[part] = addBranch(tree[part], parts, file);\n    }\n    return tree;\n  };\n  for (let file of torrent.files) {\n    const pathParts = file.path.split('/');\n    tree = addBranch(tree, pathParts, file);\n  }\n  let pwdParts = pwd.substring(1).split('/');\n  if (pwdParts[0] == '') pwdParts = [];\n  let currentDir = tree;\n  for (let pwdPart of pwdParts) {\n    currentDir = currentDir[pwdPart];\n  }\n  const res = [];\n  if (!file) {\n    res.push({\n      name: '.',\n      type: 'dir',\n      path: '/',\n    });\n    pwdParts.pop();\n    let upPath = '/';\n    if (pwdParts.length > 0) {\n      upPath = '/' + pwdParts.join('/');\n    }\n    res.push({\n      name: '..',\n      type: 'dir',\n      path: upPath,\n    });\n  }\n  for (let t in currentDir) {\n    if (file && file != t) continue;\n    let item = {};\n    item.name = t;\n    if (pwd == '/') {\n      item.path = `/${t}`;\n    } else {\n      item.path = `${pwd}/${t}`;\n    }\n    if (currentDir[t].length !== undefined) {\n      item.type = 'file';\n      item.length = currentDir[t].length;\n    } else {\n      item.type = 'dir';\n    }\n    res.push(item);\n  }\n  return res.sort((a, b) => a.name.localeCompare(b.name));\n};\n","import {VIDEO, DOWNLOAD} from './viewModeTypes';\nimport {ls} from './fileUtils';\nconst pathParse = require('path-parse');\nimport {getCaptionSource} from './caption';\nconst md5 = require('md5');\nimport parseTorrent from 'parse-torrent';\nimport {clean, processSubtitles, randomId} from './helpers';\n\nexport default function ({i18n, sdk, message, config}) {\n    return {\n        gtagDimensions(state, getters) {\n            return {\n                'dimension1': getters.fileExt.replace(/^\\./, '').toLowerCase(), // Content Type\n                'dimension2': getters.deliveryType == 'transcode', // Content Transcoded?\n                'dimension3': getters.mediaType, // Content Format\n                'dimension4': getters.isAutoplay, // Autoplay?\n                'dimension5': state.file, // Content Name\n                'dimension6': state.torrent.infoHash, // Torrent Infohash\n                'dimension8': getters.isAdblock, // Adblock Enabled?\n                'dimension9': getters.isSponsor, // Is Sponsor?\n                'dimension10': getters.filePath, // Content Path\n                'dimension11': getters.isEmbedded, // Content Path\n            };\n        },\n        gtagDownloadDimensions(state, getters) {\n            return {\n                'dimension6': state.torrent.infoHash, // Torrent Infohash\n                'dimension8': getters.isAdblock, // Adblock Enabled?\n                'dimension9': getters.isSponsor, // Is Sponsor?\n            };\n        },\n        sdk: () => sdk,\n        torrentFile: (state) => ls(state.torrent, state.pwd, state.file)[0],\n        title: (state) => 'Webtor.io',\n        isEmbedded: (state, getters) => getters.isVideoMode || getters.isDownloadMode,\n        iOS() {\n            if (typeof window === 'undefined') return false;\n            return [\n              'iPad Simulator',\n              'iPhone Simulator',\n              'iPod Simulator',\n              'iPad',\n              'iPhone',\n              'iPod'\n            ].includes(window.navigator.platform)\n            // iPad on iOS 13 detection\n            || (window.navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n        },\n        showShare: (state, getters) => !getters.isEmbedded,\n        showLogo: (state, getters) => !getters.isEmbedded,\n        showDownload: (state, getters) => !getters.isEmbedded,\n        showStatus: (state, getters) => !getters.isEmbedded,\n        selfHosted: () => config.selfHosted,\n        isAutoplay: (state) => state.autoplay,\n        isVideoMode: (state) => state.viewMode == VIDEO,\n        isDownloadMode: (state) => state.viewMode == DOWNLOAD,\n        preroll: (state) => state.preroll,\n        isIndia: (state) => state.country == 'IN',\n        underPlayerBanner: (state) => state.underPlayerBanner,\n        warnBanner: (state) => state.warnBanner,\n        shareLink: (state) => {\n            return window.location.origin + '/' + state.torrent.infoHash;\n        },\n        magnetURI: (state) => {\n            return parseTorrent.toMagnetURI(state.torrent);\n        },\n        blogUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/post/`;\n        },\n        backersUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/backers/`;\n        },\n        technologyUrl: (state) => {\n            const lang = state.lang;\n            return `https://blog.webtor.io/${lang}/technology/`;\n        },\n        metadata: (state) => {\n            const md = {};\n            if (state.userID) {\n                md['user-id'] = state.userID;\n            }\n            return md;\n        },\n        translations: (state) => i18n.messages,\n        ls: (state) => ls(state.torrent, state.pwd),\n        currentVideoFiles: (state, getters) => {\n            const res = [];\n            for (const f of getters.ls) {\n                if (sdk.util.getMediaType(f.name) == 'video') {\n                    res.push(f.name);\n                }\n            }\n            return res;\n        },\n        currentVideoFilesWithFriendlyNames: (state, getters) => {\n            const res = [];\n            for (const name of getters.currentVideoFiles) {\n                let friendlyName = pathParse(name).name;\n                if (friendlyName.match(/s\\d+/i) && friendlyName.match(/e\\d+/i)) {\n                    const mm = friendlyName.match(/e(\\d+)/i);\n                    const num = (parseInt(mm[1]) + '').padStart(2, '0');\n                    friendlyName = i18n.t('common.episode') + ' ' + num;\n                }\n                res.push({\n                    name,\n                    friendlyName,\n                });\n            }\n            return res;\n        },\n        currentPrimaryVideoFiles: (state, getters) => {\n            return getters.currentVideoFiles.filter((v) => !v.match(/sample/i));\n        },\n        currentInfoHash: (state) => {\n            return state.torrent ? state.torrent.infoHash : null;\n        },\n        isDemo: (state, getters) => {\n            return getters.currentInfoHash == '08ada5a7a6183aae1e09d831df6748d566095a10';\n        },\n        displayAds: (state, getters) => {\n            if (getters.isDemo) return false;\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            return true;\n        },\n        displayPopups: (state, getters) => {\n            return getters.displayAds;\n        },\n        displayAdsense: (state, getters) => {\n            if (config.adsense == false) return false;\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            if (getters.isEmbedded) return false;\n            return true;\n        },\n        displayAdfox: (state, getters) => {\n            if (config.ads == false) return false;\n            if (getters.isSponsor) return false;\n            if (getters.isEmbedded) return false;\n            return true;\n        },\n        displayPrerolls: (state, getters) => {\n            return false;\n            // return getters.displayAds && getters.mediaType == 'video';\n        },\n        isAdblock: (state) => {\n            return state.adblock;\n        },\n        isWindows: (state) => {\n            return navigator.platform.indexOf('Win') > -1;\n        },\n        currentDir: (state) => {\n            if (state.pwd == '/') return null;\n            return state.pwd.split('/').slice(-1).pop();\n        },\n        deepLevel: (state) => {\n            return state.pwd.split('/').length - 1;\n        },\n        deliveryType: (state) => {\n            return sdk.util.getDeliveryType(state.file);\n        },\n        mediaType: (state) => {\n            return sdk.util.getMediaType(state.file);\n        },\n        fileName: (state) => {\n            return pathParse(state.file).name;\n        },\n        fileExt: (state) => {\n            return pathParse(state.file).ext;\n        },\n        filePath: (state) => {\n            if (state.file == null) return state.pwd;\n            if (state.pwd == '/') {\n                return state.file;\n            } else {\n                return state.pwd.substr(1) + '/' + state.file;\n            }\n        },\n        downloadFile: (state) => {\n            if (!state.downloadPath) return null;\n            return pathParse(state.downloadPath).base;\n        },\n        downloadSize: (state) => {\n            let l = 0;\n            for (const f of state.torrent.files) {\n                if (('/' + f.path).startsWith(state.downloadPath)) {\n                    l += f.length;\n                }\n            }\n            return l;\n        },\n        isSponsor: (state) => {\n            if (!state.user) return false;\n            return state.user && state.user.role && state.user.role != 'NOBODY';\n        },\n        sources: async (state, getters) => {\n            const src = await state.seeder.streamUrl(getters.filePath, clean(getters.metadata));\n            // const src = new Url('https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8');\n            // const src = new Url('http://localhost:8080/index.m3u8');\n            const type = sdk.util.getMimeType(src);\n            const title = 'main';\n            return [{\n                src,\n                type,\n                title,\n            }];\n        },\n        poster: async (state, getters) => {\n            const md = clean(getters.metadata);\n            md.invoke = false;\n            if (state.externalPoster) {\n                return await sdk.ext.streamUrl(state.externalPoster, {}, md);\n            }\n            for (let f of state.torrent.files) {\n                if (sdk.util.getMediaType(f.name) == 'image' && f.name.startsWith(getters.fileName)) {\n                    return await state.seeder.streamUrl(f.path, md);\n                }\n            }\n            const videos = getters.currentPrimaryVideoFiles;\n            if (videos.length == 1) {\n                const files = getters.ls;\n                for (const f of files) {\n                    if (sdk.util.getMediaType(f.name) == 'image' && f.name.match(/poster/)) {\n                        return await state.seeder.streamUrl(f.path, md);\n                    }\n                }\n            }\n            return null;\n        },\n        captionSource(state) {\n            if (!state.player.subtitle) return null;\n            let src = state.player.subtitle.src;\n            if (!src) return null;\n            if (src.href) src = src.href;\n            return getCaptionSource(src);\n        },\n        openSubtitlesTracks: async (state, getters) => {\n            let tracks = [];\n            const search = {};\n            if (state.imdbId) {\n                search['imdb-id'] = state.imdbId;\n            }\n            const os = await state.seeder.openSubtitles(getters.filePath, Object.assign(clean(getters.metadata), search));\n            message.send('open subtitles', os);\n            for (const o of os) {\n                if (!['srt', 'vtt'].includes(o.format)) continue;\n                const lang = sdk.util.getLang(o.srclang)\n                tracks.push({\n                    kind: 'subtitles',\n                    label: lang.nativeName != \"\" ? lang.nativeName : o.label,\n                    srclang: o.srclang,\n                    src: o.src,\n                    hash: md5(o.hash + o.id),\n                });\n            }\n            tracks = processSubtitles(tracks);\n            return tracks;\n        },\n        async tracks(state, getters) {\n            let tracks = [];\n            if (state.player.subtitle) {\n                tracks = [state.player.subtitle];\n            } else {\n                tracks = state.attachedTracks;\n            }\n            let res = [];\n            for (const t of tracks) {\n                res.push(clean(t));\n            }\n            for (const t of res) {\n                if (state.player.subtitle && t.hash == state.player.subtitle.hash) {\n                    t.default = true;\n                    break;\n                } else if (t.autoselect) {\n                    t.default = true;\n                    break;\n                }\n            }\n            return res;\n        },\n        hasLogin() {\n            return config.patreon;\n        },\n        apiUrl() {\n            return config.sdk.apiUrl;\n        }\n    };\n};","function normalizeLang(lang) {\n    return lang.split('_')[0].toLowerCase();\n}\nfunction getRelevantTrackFromTracks(lang, tracks) {\n    lang = normalizeLang(lang);\n    for (const t of tracks) {\n        if (normalizeLang(t.srclang) == lang) {\n            return t;\n        }\n    }\n    return null;\n}\nasync function getRelevantTrackForLang({state, getters}, lang) {\n    let track = null;\n    track = getRelevantTrackFromTracks(lang, state.attachedTracks);\n    if (track) {\n        track.source = 'attached';\n    }\n    if (!track) {\n        const tracks = await getters.openSubtitlesTracks;\n        if (tracks) {\n            track = getRelevantTrackFromTracks(lang, tracks);\n            if (track) {\n                track.source = 'openSubtitles';\n            }\n        }\n    }\n    return track;\n}\nexport default async function getRelevantTrack(store) {\n    const {state} = store;\n    let track = null;\n    track = await getRelevantTrackForLang(store, state.userLang);\n    if (!track) {\n        track = await getRelevantTrackForLang(store, state.fallbackLang);\n    }\n    return track;\n}","const debug = require('debug')('webtor:lib:stoplistCheck');\nfunction findKeyword(k, s) {\n    return k == s || k.startsWith(s + \" \") || k.endsWith(\" \" + s) || k.includes(\" \" + s + \" \");\n}\n\nfunction findKeywordSpaces(k, s) {\n    return findKeyword(k, s) || findKeyword(k, s.replaceAll(/\\s+/g, ''));\n}\n\nfunction findKeywordWithPipes(k, s) {\n    const parts = s.split('|');\n    for (const p of parts) {\n        if (findKeywordSpaces(k, p)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction findKeywordWithPlus(k, s) {\n    const parts = s.split('+');\n    let found = true;\n    for (const p of parts) {\n        if (!findKeywordWithPipes(k, p)) {\n            found = false;\n        }\n    }\n    return found;\n}\nexport default function(str, stoplist) {\n    const k = str.toLowerCase().replaceAll(/[^\\w]/g, ' ').replaceAll(/(\\d+)/g, ' $1 ').replaceAll(/\\s+/g, ' ');\n    for (const s of stoplist) {\n        if (s == \"\") continue; \n        if (findKeywordWithPlus(k, s)) {\n            return false;\n        }\n    }\n    return true;\n}","import parseTorrent from 'parse-torrent';\nconst Url = require('url-parse');\nexport default function stringToTorrent(s) {\n    if (s.match(/^magnet/) || s.match(/^[a-fA-F0-9]{40}$/)) {\n        return parseTorrent(s);\n    }\n    const u = Url(s, true);\n    for (const k in u.query) {\n        const t = stringToTorrent(u.query[k]);\n        if (t) return t;\n    }\n    return false;\n}","export default function arrayToText(obj) {\n  for (let k in obj) {\n    if (Array.isArray(obj[k])) {\n      obj[k] = obj[k].join('\\n');\n    } else if (typeof obj[k] === 'object') {\n      obj[k] = arrayToText(obj[k]);\n    }\n  }\n  return obj;\n};\n","import {SET_TORRENT_SUCCESS, SET_PWD_SUCCESS,\n        SET_FILE_SUCCESS, SET_SOURCE, SET_PLAYER_STATUS_SUCCESS,\n        SET_TORRENT_FAILURE,\n        SET_STAT_SUCCESS,\n        SET_LOAD_STATE, SET_LOAD_STATE_SUCCESS,\n        SET_LOAD_STATE_FAILURE,\n        SET_LANG, SET_ABUSED, SET_MEDIA_INFO,\n        SET_PLAYER_TIME, SET_CURRENT_DIR_FILE_STATES, SET_FILE_STATE,\n        SET_RECENT_TORRENTS, SET_RECENT_TORRENT,\n        SET_ADBLOCK_ENABLED, SET_VIEW_MODE,\n        SET_EXTERNAL_SUBTITLES, SET_EXTERNAL_POSTER, SET_AUTOPLAY, SET_CAPTION, \n        SET_HEADER, SET_EXTERNAL_TITLE, SET_HEIGHT, SET_WIDTH, SET_IMDBID,\n        SET_COMPLETED_PIECES, CHANGE_CAPTION_SIZE, SET_USER_SETTINGS, \n        SET_ADS_INJECTED, SET_EXTERNAL_FEATURES,\n        SET_NEW_POSITION, SET_SEEDER, SET_ZIP_DOWNLOAD,\n        SET_ATTACHED_TRACKS, SET_LAST_TIME, SET_FIRST_PLAY, SET_IS_CACHED, SET_EXTERNAL_CONTROLS,\n        SET_DOWNLOAD_PATH, SET_DOWNLOAD_STAT, DROP_DOWNLOAD_STAT, SET_DOWNLOAD_TYPE,\n        UPDATE_WINDOW_WIDTH, SET_INITED, SET_PROGRESS, SET_USER_LANG, SET_API_UNREACHABLE,\n       } from './mutationTypes';\nimport {PLAYING, PAUSE} from './playerStatusTypes';\nimport {VIDEO, DOWNLOAD} from './viewModeTypes';\nimport {clean, cleanPlayerTrack, cleanState, randomId, processSubtitles} from './helpers';\nimport parseTorrent from 'parse-torrent';\nimport omitEmpty from 'omit-empty';\nimport fileToTorrent from './fileToTorrent';\nimport {getLangRoute} from './../langRoutes';\nimport getRelevantTrack from './../relevantTrack';\nimport stoplistCheck from '../stoplistCheck';\nimport stringToTorrent from './stringToTorrent';\nconst debug = require('debug')('webtor:lib:store');\nconst md5 = require('md5');\nconst Url = require('url-parse');\nconst cloneDeep = require('clone-deep');\nconst loadScript = require('load-script2');\nimport dot from 'dot-object';\nimport arrayToText from './arrayToText';\nimport Vue from 'vue';\nimport state from './state';\nlet logTimePeriod = 15;\nlet statsClient;\nlet adsenseInited = false;\nlet adScriptsInited = false;\nimport debounce from 'lodash/debounce';\nconst sha1 = require('sha1');\nexport default function({router, message, db, sdk, ext, i18n, injectHash, injectCode, config}) {\n    return {\n        log({}, message) {\n            debug(message);\n        },\n        adblockEnabled: ({ commit }) => {\n            // event('Show', 'ADBLOCK_ENABLED');\n            commit(SET_ADBLOCK_ENABLED);\n        },\n        changeCaptionSize: ({ commit, dispatch }, val) => {\n            commit(CHANGE_CAPTION_SIZE, val);\n            dispatch('updateUserSettings');\n        },\n        getMediaInfo: async ({ commit, state, getters }) => {\n            if (getters.deliveryType == 'webseed') return;\n            const md = clean(getters.metadata);\n            md.invoke = false;\n            const data = await state.seeder.mediaInfo(getters.filePath, md);\n            commit(SET_MEDIA_INFO, data);\n        },\n        async play({ commit, dispatch }) {\n            dispatch('stats');\n            commit(SET_PLAYER_STATUS_SUCCESS, PLAYING);\n        },\n        async pause({ commit }) {\n            commit(SET_PLAYER_STATUS_SUCCESS, PAUSE);\n        },\n        async cd({ dispatch, state }, pwd) {\n            if (pwd == state.pwd) return;\n            dispatch('log', `Change directory path=${pwd}`)\n            // event('Show', 'CD', pwd);\n            await dispatch('setState', {\n                torrent: state.torrent,\n                pwd,\n            });\n            await dispatch('pushState');\n        },\n        async getCurrentDirFileStates({ commit, state }) {\n            const states = await db.getCurrentDirFileStates({\n                infoHash: state.torrent.infoHash,\n                pwd: state.pwd,\n            });\n            const statesObj = {};\n            for (const s of states) {\n                statesObj[s.file] = s;\n            }\n            commit(SET_CURRENT_DIR_FILE_STATES, statesObj);\n        },\n        async open({ dispatch, state, commit }, file) {\n            dispatch('log', `Open path file=${file}`)\n            await dispatch('setState', {\n                torrent: state.torrent,\n                pwd: state.pwd,\n                file,\n                autoplay: true,\n            });\n\n            await dispatch('pushState');\n        },\n        async hideDownload({commit}) {\n            commit(SET_DOWNLOAD_TYPE, null);\n            commit(SET_DOWNLOAD_PATH, null);\n        },\n        async download({ dispatch, state, getters, commit }, path) {\n            commit(SET_DOWNLOAD_TYPE, 'file');\n            commit(SET_DOWNLOAD_PATH, path);\n        },\n        async downloadUrl({ state, getters }) {\n            let url = null;\n            if (state.downloadType == 'zip') {\n                url = await state.seeder.zipUrl(state.downloadPath, clean(getters.metadata));\n            } else {\n                url = await state.seeder.downloadUrl(state.downloadPath, clean(getters.metadata));\n            }\n            return url;\n        },\n        async proceedTorrentDownload({ dispatch, state, getters, commit }) {\n            const torrent = cloneDeep(state.torrent);\n            const buf = parseTorrent.toTorrentFile(torrent);\n            // https://stackoverflow.com/a/9834261\n            const blob = new Blob([buf.buffer]);\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.style.display = 'none';\n            a.href = url;\n            // the filename you want\n            a.download = torrent.name + '.torrent';\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n        },\n        async proceedDownload({ dispatch, state, getters, commit }) {\n            let onMessage = (p, m) => {\n                commit(SET_DOWNLOAD_STAT, {p: p, m});\n            };\n            let onEnd = (p, res) => {\n                // setTimeout(() => {\n                //     commit(DROP_DOWNLOAD_STAT, p);\n                // }, 10000);\n            };\n            let url = null;\n            if (state.downloadType == 'zip') {\n                url = await state.seeder.zipUrlWithProgress(state.downloadPath, onMessage, onEnd, clean(getters.metadata));\n                dispatch('downloadEvent', 'Content Zip Download');\n            } else {\n                url = await state.seeder.downloadUrlWithProgress(state.downloadPath, onMessage, onEnd, clean(getters.metadata));\n                dispatch('downloadEvent', 'Content Download');\n            }\n            dispatch('log', `Download path=${state.downloadPath} type=${state.downloadType} url=${url.href}`)\n            dispatch('stats');\n            window.location = url.href;\n        },\n        event({ getters }, { name, payload = {} }) {\n            const data = Object.assign({}, getters.gtagDimensions, payload);\n            if (Vue.$gtag !== undefined) Vue.$gtag.event(name, data);\n        },\n        downloadEvent({ getters }, name) {\n            const data = Object.assign({}, getters.gtagDownloadDimensions, { 'dimension10': state.downloadPath });\n            if (Vue.$gtag !== undefined) Vue.$gtag.event(name, data);\n        },\n        async zip({ dispatch, state, getters, commit }) {\n            if (!state.torrent) return;\n            let path = state.pwd;\n            if (path == '/') {\n                path = '/' + state.torrent.name;\n            }\n            debug('zip invoked path=%o', path);\n            commit(SET_DOWNLOAD_TYPE, 'zip');\n            commit(SET_DOWNLOAD_PATH, path);\n        },\n        async delivery({ commit, state, getters, dispatch }) {\n            if (!state.torrent || !state.file) return;\n            const filePath = getters.filePath;\n            const src = await state.seeder.streamUrl(filePath, clean(getters.metadata));\n            dispatch('log', `Deliver content file=${filePath} url=${src}`)\n            dispatch('updateSource');\n            dispatch('stats');\n        },\n        async stats({ state, getters, commit }) {\n            const filePath = getters.filePath;\n            const isCached = await state.seeder.isCached(filePath, clean(getters.metadata));\n            commit(SET_IS_CACHED, isCached);\n            if (state.features.p2pProgress && !isCached && !statsClient) {\n                try {\n                    statsClient = state.seeder.stats('', (path, data) => {\n                        // var t0 = performance.now()\n                        commit(SET_STAT_SUCCESS, data);\n                        // var t1 = performance.now()\n                        // console.log(`Call to SET_STAT_SUCCESS took ${(t1 - t0)} milliseconds count ${data.length}.`)\n                    }, clean(getters.metadata));\n                } catch (e) {\n                    debug(e);\n                    statsClient = null;\n                }\n            }\n        },\n        async pushTorrent({ getters, dispatch }, torrent) {\n            const expire = 60 * 60 * 24 * 30; // 1 month\n            dispatch('log', `Push torrent torrentInfo=${torrent.infoHash}`)\n            try {\n                return await sdk.torrent.touch(torrent, expire, clean(getters.metadata));\n            } catch (e) {\n                if (e == 'not found') {\n                    try {\n                        return await sdk.torrent.push(torrent, expire, clean(getters.metadata));\n                    } catch (e) {\n                        debug(e);\n                        throw e;\n                    }\n                } else {\n                    debug(e);\n                    throw e;\n                }\n            }\n        },\n        async pushAbuse({ getters }, abuse) {\n            return await sdk.abuse.push(abuse, clean(getters.metadata));\n        },\n        async setState({ commit, state, dispatch, getters }, newState) {\n            let { torrent, file, pwd, autoplay } = newState;\n            if (!pwd && torrent && torrent.files.length > 0) {\n                const pieces = torrent.files[0].path.split('/');\n                if (pieces.length > 1) {\n                    pwd = '/' + pieces[0];\n                }\n            }\n            if (!pwd) pwd = '/';\n            const oldState = {\n                torrent: state.torrent,\n                file: state.file,\n                pwd: state.pwd,\n            };\n            if (JSON.stringify(cleanState(oldState)) ==\n                JSON.stringify(cleanState(newState))) return;\n            await dispatch('leave');\n            // const downloadID = randomId((torrent ? torrent.infoHash : '') + pwd + file);\n            if ((torrent && !state.torrent) || (torrent && torrent.infoHash != state.torrent.infoHash)) {\n                await db.pushTorrent(torrent);\n            }\n            commit(SET_TORRENT_SUCCESS, torrent);\n            commit(SET_PWD_SUCCESS, pwd);\n            commit(SET_FILE_SUCCESS, file);\n            // commit(SET_DOWNLOAD_ID, downloadID);\n            // commit(SET_AUTOPLAY, oldState.torrent != null);\n            if (torrent && !file && (oldState.torrent == null || oldState.torrent.infoHash != torrent.infoHash)) {\n                const videos = getters.currentPrimaryVideoFiles;\n                if (videos.length > 0) {\n                    file = videos[0];\n                    commit(SET_FILE_SUCCESS, file);\n                }\n            }\n            if (torrent && pwd) {\n                const data = await db.setRecentTorrent(torrent, pwd);\n                commit(SET_RECENT_TORRENT, data);\n\n                await dispatch('getCurrentDirFileStates');\n            }\n            if (torrent && pwd && file) {\n                if (getters.isDownloadMode) {\n                    await dispatch('zip');\n                } else {\n                    const userData = await db.getFileState({ infoHash: torrent.infoHash, pwd, file });\n                    let time = 0;\n                    let track = null;\n                    const tracks = await getters.tracks;\n                    if (tracks.length > 0) {\n                        for (const t of tracks) {\n                            if (t.autoselect) {\n                                track = t;\n                                break;\n                            }\n                        }\n                    }\n                    if (userData && userData.time) time = userData.time;\n                    if (userData && userData.subtitle && userData.subtitle.src) {\n                        track = userData.subtitle;\n                        let u = new Url(track.src);\n                        const search = {};\n                        if (state.imdbId) {\n                            search['imdb-id'] = state.imdbId;\n                        }\n                        const query = await sdk.util.makeQuery(Object.assign(clean(getters.metadata), search));\n                        u.set('query', query);\n                        track.src = u;\n                    }\n                    if (track && track.type == 'ext') {\n                        let found = false;\n                        for (const t of tracks) {\n                            if (t.hash == track.hash) {\n                                found = true;\n                            }\n                        }\n                        if (!found) track = null;\n                    }\n                    await dispatch('player/setSubtitle', track);\n                    let audio = null;\n                    if (userData && userData.audio && userData.audio.src) {\n                        audio = userData.audio;\n                        let u = new Url(track.src);\n                        const query = await sdk.util.makeQuery(Object.assign(clean(getters.metadata), {}));\n                        u.set('query', query);\n                        audio.src = u;\n                    }\n                    await dispatch('player/setAudio', audio);\n                    commit(SET_AUTOPLAY, autoplay);\n                    commit(SET_PLAYER_TIME, time);\n                    dispatch('event', { name: 'Content Show' });\n                    await dispatch('delivery');\n                }\n            }\n        },\n        async fetchMagnet({ dispatch, getters }, magnet) {\n            let torrent = null;\n            dispatch('log', `Fetch torrent magnet=${magnet}`)\n            var { _, infoHash } = parseTorrent(magnet);\n            dispatch('log', `Fetching from localdb`)\n            torrent = await db.pullTorrent(infoHash);\n            if (!torrent || !torrent.pieces || torrent.pieces.length == 0) {\n                try {\n                    dispatch('log', `Fetching from torrent store`)\n                    torrent = await sdk.torrent.pull(infoHash, clean(getters.metadata));\n                } catch (e) {\n                    debug(e);\n                }\n            }\n            if (!torrent) {\n                dispatch('log', `Fetching by magnet uri from peers`)\n                // event('Show', 'MAGNET_FETCHING', magnet);\n                torrent = await sdk.magnet.fetchTorrent(magnet, clean(getters.metadata));\n                // event('Show', 'MAGNET_FETCHED', magnet);\n            }\n            return torrent;\n        },\n        async fetchFromURL({ }, url) {\n            if (url.match(/^http/)) {\n                url = await sdk.ext.url(url);\n            }\n            return await sdk.torrent.fromUrl(url);\n        },\n        async processInit({ commit, getters, dispatch }, init) {\n            commit(SET_ADS_INJECTED, true);\n            message.send('inject', injectCode);\n            const check = await message.receiveOnce('check');\n            await loadScript('/sandblaster.min.js');\n            const sb = sandblaster.detect();\n            debug('chacking hashes %o %o', sha1(check), injectHash);\n            if ((sha1(check) != injectHash) || sb.sandboxed) {\n                router.push({ name: 'empty' }).catch(() => {});\n                message.send('forbidden');\n                return false;\n            }\n            loadScript('/iframeResizer.contentWindow.min.js');\n            // if (getters.isIndia && !getters.isSponsor) {\n            //     router.push({ name: 'empty' }).catch(() => {});\n            //     message.send('forbidden');\n            //     return\n            // }\n            if (init.imdbId) {\n                commit(SET_IMDBID, init.imdbId);\n            }\n            if (init.subtitles) {\n                commit(SET_EXTERNAL_SUBTITLES, init.subtitles);\n                dispatch('updateAttachedTracks');\n            }\n            if (init.hasOwnProperty('controls')) {\n                commit(SET_EXTERNAL_CONTROLS, init.controls);\n            }\n            if (init.features) {\n                commit(SET_EXTERNAL_FEATURES, init.features);\n            }\n            if (init.poster) {\n                commit(SET_EXTERNAL_POSTER, init.poster);\n            }\n            if (init.title) {\n                commit(SET_EXTERNAL_TITLE, init.title);\n            }\n            if (init.lang) {\n                commit(SET_LANG, init.lang);\n                i18n.locale = init.lang;\n            }\n            if (init.userLang) {\n                commit(SET_USER_LANG, init.userLang);\n            }\n            if (init.mode) {\n                commit(SET_VIEW_MODE, init.mode);\n            }\n\n            if (init.i18n) {\n                for (const l in init.i18n) {\n                    const m = dot.dot(arrayToText(init.i18n[l]));\n                    i18n.mergeLocaleMessage(l, m);\n                }\n            }\n            if (init.header === false) {\n                commit(SET_HEADER, false);\n            }\n            if (init.height) {\n                commit(SET_HEIGHT, init.height);\n            }\n            if (init.width) {\n                commit(SET_WIDTH, init.width);\n            }\n        },\n        async fetchTorrent({ state, commit, dispatch, getters }, newTorrent = null) {\n            if (statsClient) {\n                statsClient.close();\n                statsClient = null;\n            }\n            const r = router.currentRoute;\n            let torrent = state.torrent;\n            if (typeof newTorrent == 'string') {\n                const r = stringToTorrent(newTorrent);\n                if (!r) {\n                    newTorrent = await dispatch('fetchFromURL', newTorrent);\n                } else {\n                    newTorrent = r;\n                }\n            }\n            let source = {};\n            message.send('init');\n            const init = await message.receiveOnce('init');\n            // const init = {\n            //   magnet: 'magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10&dn=Sintel&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&tr=wss%3A%2F%2Ftracker.fastcast.nz&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F',\n            //   lang: 'en',\n            //   i18n: {\n            //     en: {\n            //       common: {\n            //         share: 'Shhh!',\n            //       },\n            //     },\n            //   },\n            // }\n            if (init) {\n                const r = await dispatch('processInit', init);\n                if (r === false) return;\n                source = {\n                    torrentUrl: init.torrentUrl,\n                    magnet: init.magnet,\n                };\n                message.receive('play', () => {\n                    dispatch('play');\n                });\n                message.receive('pause', () => {\n                    dispatch('pause');\n                });\n                message.receive('setPosition', async (val) => {\n                    await dispatch('setPosition', val);\n                    await dispatch('setPosition', null);\n                });\n                message.receive('open', async (val) => {\n                    await dispatch('setState', {\n                        torrent: state.torrent,\n                        pwd: val.pwd,\n                        file: val.file,\n                    });\n                    await dispatch('pushState');\n                });\n            } else {\n                source = {\n                    torrentUrl: r.query.torrent_url,\n                    magnet: r.query.magnet,\n                    downloadId: r.query.downloadId,\n                };\n            }\n            if (JSON.stringify(omitEmpty(source)) == '{}' && !state.torrent && !newTorrent) {\n                router.push({ name: 'intro' }).catch(() => {});\n                return;\n            }\n            const magnet = torrent ? parseTorrent.toMagnetURI(torrent) : null;\n            const newTorrentMagnet = newTorrent ? parseTorrent.toMagnetURI(newTorrent) : null;\n            if ((!source.magnet || source.magnet == magnet)\n                && !source.downloadId\n                && !source.torrentUrl\n                && (!newTorrent || newTorrentMagnet == magnet)) {\n                return;\n            }\n            commit(SET_PROGRESS, 25);\n            if (getters.isVideoMode) {\n                commit(SET_LOAD_STATE, 'prepare to play');\n            } else {\n                commit(SET_LOAD_STATE, 'loading torrent');\n            }\n            try {\n                if (newTorrent && (newTorrent.pieces && newTorrent.pieces.length > 0)) {\n                    torrent = newTorrent;\n                } else if (sdk && newTorrent && (!newTorrent.pieces || newTorrent.pieces.length == 0)) {\n                    torrent = await dispatch('fetchMagnet', newTorrentMagnet);\n                } else if (ext && source.downloadId) {\n                    dispatch('log', `Fetch torrent downloadId=${source.downloadId}`)\n                    const downloadId = parseInt(source.downloadId);\n                    debug('request downloadId=%d', downloadId);\n                    torrent = await ext.fetch(downloadId);\n                } else if (sdk && source.torrentUrl) {\n                    torrent = await dispatch('fetchFromURL', source.torrentUrl);\n                } else if (sdk && source.magnet) {\n                    torrent = await dispatch('fetchMagnet', source.magnet);\n                }\n                commit(SET_PROGRESS, 50);\n\n                debug('Got torrent infoHash=%s', torrent.infoHash);\n                if (!await dispatch('checkTorrent', torrent)) {\n                    commit(SET_ABUSED);\n                    commit(SET_PROGRESS, 0);\n                    router.push({ name: 'intro' }).catch(() => {});\n                    return;\n                }\n                await dispatch('pushTorrent', torrent);\n                commit(SET_PROGRESS, 75);\n\n                commit(SET_SEEDER, sdk.seeder.get(torrent.infoHash));\n                if (sdk && sdk.params.cache) {\n                    const cp = await state.seeder.completedPieces();\n                    debug('Got torrent completed pieces length=%o', cp.length);\n                    commit(SET_COMPLETED_PIECES, cp);\n                }\n                commit(SET_LOAD_STATE_SUCCESS);\n                let pwd = null\n                if (r.query.pwd && !newTorrent) pwd = r.query.pwd;\n                if (init && init.pwd) pwd = init.pwd;\n                let file = null;\n                if (r.query.file && !newTorrent) file = r.query.file;\n                if (init && init.file) file = init.file;\n                await dispatch('setState', {\n                    torrent,\n                    pwd,\n                    file,\n                });\n                commit(SET_PROGRESS, 100);\n                message.send('torrent fetched', torrent);\n                // event('Show', 'TORRENT_FETCHED', torrent.infoHash);\n            } catch (e) {\n                message.send('torrent error');\n                await dispatch('setState', {});\n                if (e == 'abused') {\n                    commit(SET_ABUSED);\n                } else {\n                    commit(SET_LOAD_STATE_FAILURE);\n                    debug(e);\n                }\n                commit(SET_PROGRESS, 0);\n            }\n\n            if (r.query.event == 'player-logo-click') {\n                dispatch('event', {name: 'Player Logo Click'});\n            }\n            await dispatch('pushState');\n        },\n        async cleanTorrent({commit}) {\n            commit(SET_TORRENT_SUCCESS, null);\n            commit(SET_PWD_SUCCESS, null);\n            commit(SET_FILE_SUCCESS, null);\n            commit(SET_SOURCE, null);\n        },\n        async processFile({ commit, dispatch }, file) {\n            if (!file) return;\n            try {\n                return await fileToTorrent(file);\n            } catch (e) {\n                console.log(e);\n                commit(SET_TORRENT_FAILURE);\n            }\n        },\n        async leave({ commit }) {\n            commit(SET_SOURCE, null);\n        },\n        async nextFile({ state, dispatch, getters }) {\n            const files = getters.ls;\n            if (files < 2) return;\n            let next = null;\n            let skip = true;\n            for (let f of files) {\n                if (sdk.util.getMediaType(f.path) != sdk.util.getMediaType(state.playerFilePath)) {\n                    continue;\n                }\n                if (!skip) {\n                    next = f;\n                    break;\n                }\n                if (`/${state.playerFilePath}` == f.path) skip = false;\n            }\n            if (!next) return;\n            await dispatch('open', next.name);\n        },\n        async pushState({ state }) {\n            if (state.torrent) {\n                message.send('open', {\n                    file: state.file,\n                    pwd: state.pwd,\n                });\n                try {\n                    debug('push state=%o', {\n                        file: state.file,\n                        pwd: state.pwd,\n                    });\n                    await router.push({\n                        name: 'show', query: omitEmpty({\n                            file: state.file,\n                            pwd: state.pwd,\n                            magnet: parseTorrent.toMagnetURI(state.torrent),\n                            // mode: state.viewMode,\n                            // id: state.id,\n                        })\n                    });\n                } catch (err) {\n                    console.log(err);\n                    if (err.name !== 'NavigationDuplicated') {\n                        throw err;\n                    }\n                }\n            } else {\n                router.push({ name: 'intro' }).catch(() => {});\n            }\n        },\n        async checkTorrent({}, torrent) {\n            for (const f of torrent.files) {\n                if (!stoplistCheck(f.path, config.stoplist)) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        async updateCaption({ state, getters, commit }) {\n            const source = await getters.captionSource;\n            if (!source) {\n                commit(SET_CAPTION, null);\n                return;\n            }\n            const caption = await source.getEntry(state.time);\n            commit(SET_CAPTION, caption);\n        },\n        async updateTime({ commit, getters, dispatch, state }, { time, file }) {\n            commit(SET_PLAYER_TIME, time);\n            dispatch('updateCaption');\n            dispatch('updateFileState', file);\n            if (state.lastTime === null) {\n                commit(SET_LAST_TIME, time);\n            } else if (time - logTimePeriod - 5 > state.lastTime) {\n                commit(SET_LAST_TIME, time);\n                state.lastTime = time;\n            } else if (time - logTimePeriod > state.lastTime) {\n                dispatch('event', { name: 'Content Playtime', payload: { metric1: time - state.lastTime } });\n                commit(SET_LAST_TIME, time);\n            }\n            message.send('current time', time);\n        },\n        async setDuration({ }, val) {\n            message.send('duration', val);\n        },\n        firstPlay({commit, dispatch}) {\n            commit(SET_FIRST_PLAY, false);\n            dispatch('event', { name: 'Content Plays' });\n        },\n        async setPosition({ commit }, val) {\n            commit(SET_NEW_POSITION, val);\n        },\n        // async setTrack({ commit, dispatch, state, getters }, track) {\n        //     await dispatch('updateSource');\n        //     await dispatch('updateFileState', state.file);\n        //     await dispatch('updateCaption');\n        // },\n        async processAutoSubtitles(store) {\n            const track = await getRelevantTrack(store);\n            const {dispatch} = store;\n            if (track) {\n                dispatch('player/setSubtitle', track);\n            }\n        },\n        async updateAttachedTracks({ state, commit, getters }) {\n            let tracks = [];\n\n            const md = clean(getters.metadata);\n            md.invoke = false;\n\n            for (const s of state.externalSubtitles) {\n                let autoselect = false;\n                if (s.autoselect === true) autoselect = true;\n                if (s.default === true || s.default === \"\") autoselect = true;\n                tracks.push({\n                    kind: 'subtitles',\n                    label: s.label,\n                    srclang: s.srclang,\n                    src: await sdk.ext.streamUrl(s.src, {}, md),\n                    hash: md5(s.src + s.label),\n                    autoselect,\n                    type: 'ext',\n                });\n            }\n            for (const s of state.hls.subtitles) {\n                tracks.push({\n                    kind: 'subtitles',\n                    label: s.label,\n                    srclang: s.srclang,\n                    hash: md5(s.src),\n                    src: new Url(s.src),\n                    autoselect: s.autoselect,\n                    default: s.default,\n                    forced: s.forced,\n                    type: 'hls',\n                });\n            }\n\n            if (state.torrent) {\n                for (let f of state.torrent.files) {\n                    if (sdk.util.getMediaType(f.name) == 'subtitle' && f.name.startsWith(getters.fileName)) {\n                        const lang = sdk.util.getSubtitleLang(f.name)\n                        tracks.push({\n                            kind: 'subtitles',\n                            label: lang ? lang.nativeName : f.name,\n                            srclang: lang ? lang.code : 'en',\n                            src: await state.seeder.streamUrl(f.path, md),\n                            hash: md5(state.infoHash + f.name),\n                        });\n                    }\n                }\n            }\n            tracks = processSubtitles(tracks);\n            commit(SET_ATTACHED_TRACKS, tracks);\n        },\n        async updateSource({ state, getters, commit }) {\n            const format = sdk.util.getMediaType(state.file);\n            const sources = await getters.sources;\n            const tracks = await getters.tracks;\n            const poster = await getters.poster;\n            const autoplay = getters.isAutoplay;\n            const source = {\n                format,\n                sources,\n                tracks,\n                autoplay,\n                poster,\n            };\n            debug('setting source=%o', source);\n            commit(SET_SOURCE, source);\n        },\n        async updateFileState({ state, commit }, file = null) {\n            if (!file) file = state.file;\n            if (!state.file || !state.torrent || !state.pwd || state.file != file) return;\n            let data = {\n                infoHash: state.torrent.infoHash,\n                pwd: state.pwd,\n                file: state.file,\n                subtitle: cleanPlayerTrack(state.player.subtitle),\n                audio: cleanPlayerTrack(state.player.audio),\n                time: state.time,\n            };\n            data = await db.updateFileState(data);\n            commit(SET_FILE_STATE, data);\n        },\n        async init({ dispatch, commit }) {\n            await Promise.all([\n                dispatch('checkApi'),\n                dispatch('getRecentTorrents'),\n                dispatch('getUserSettings'),\n                dispatch('initRouter'),\n                dispatch('initWindowWidth'),\n            ]);\n            commit(SET_INITED);\n            debug('inited');\n        },\n        updateWindowWidth({commit}) {\n            commit(UPDATE_WINDOW_WIDTH);\n        },\n        async checkApi({commit}) {\n            if (!sdk) return;\n            try {\n                await sdk.checkApi();\n            } catch (e) {\n                commit(SET_API_UNREACHABLE);\n                debug(e);\n            }\n        },\n        async initWindowWidth({commit}) {\n            if (typeof window !== \"undefined\") {\n                window.addEventListener('resize', debounce(() => {\n                    commit(UPDATE_WINDOW_WIDTH);\n                }, 1000));\n            }\n        },\n        async initAdScripts({getters}) {\n            if (adScriptsInited || !getters.displayPopups) return;\n            adScriptsInited = true;\n            for (const ss of config.adScripts) {\n                if (ss.context && ss.context.embed === false && getters.isEmbedded) {\n                    continue;\n                }\n                const s = document.createElement('script');\n                s.type = 'text/javascript';\n                s.setAttribute('data-cfasync', 'false');\n                s.src = ss.src;\n                document.body.appendChild(s);\n            }\n        },\n        async initAdsense() {\n            if (adsenseInited) return;\n            adsenseInited = true;\n            const s1 = document.createElement('script');\n            s1.type = 'text/javascript';\n            s1.setAttribute('async', 'true');\n            s1.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=' + config.adsense.client;\n            s1.crossOrigin= 'anonymous';\n            document.body.appendChild(s1);\n        },\n        async placeAdsenseAd({getters, dispatch}, {slot, name, format, style, placeholder}) {\n            if (!getters.displayAdsense) return;\n            dispatch('initAdsense');\n            if (name) {\n                slot = config.adsense.slots[name];\n            }\n            if (!style) style = 'display:block'\n            let code = `<ins class=\"adsbygoogle\"`;\n            code += ` style=\"${style}\"`;\n            code += ` data-ad-client=\"${config.adsense.client}\"`;\n            code += ` data-ad-slot=\"${slot}\"`;\n            if (format) code += ` data-ad-format=\"${format}\"`;\n            code += ` data-full-width-responsive=\"true\"></ins>`;\n            let tries = 0;\n            var checkExist = setInterval(function() {\n                if (tries > 30) {\n                    clearInterval(checkExist);\n                    return;\n                }\n                if (document.getElementById(placeholder) && ('adsbygoogle' in window) && document.getElementById(placeholder).offsetWidth > 0) {\n                    document.getElementById(placeholder).innerHTML = code;\n                    (adsbygoogle = window.adsbygoogle || []).push({});\n                    clearInterval(checkExist);\n                    return;\n                }\n                tries++;\n            }, 100);\n        },\n        async initRouter({state, commit, dispatch}) {\n            router.beforeEach(async (to, from, next) => {\n                // if (to.hash.startsWith('#/')) {\n                //     router.replace(to.hash.replace('#/', '')).catch(() => {});\n                //     return;\n                // }\n                if (typeof window !== \"undefined\") {\n                    const url = new URL(window.location);\n                    if ((url.pathname != '/' || url.search != '')) {\n                        history.replaceState({}, '', '/');\n                        router.replace(url.pathname + url.search);\n                        return;\n                    }\n                }\n                let page_title = to.name;\n                let page_path = to.path;\n                if (to.query.magnet) {\n                    page_path = '/' + parseTorrent(to.query.magnet).infoHash;\n                    if (to.query.pwd) {\n                        page_path += to.query.pwd;\n                        page_title = to.query.pwd;\n                    }\n                    if (to.query.file) {\n                        page_path += '/' + to.query.file;\n                        page_title = to.query.file;\n                    }\n                }\n                if (Vue.$gtag) {\n                    Vue.$gtag.pageview({\n                        page_path,\n                        page_title,\n                    });\n                }\n                if (to.query.mode == VIDEO || state.viewMode == VIDEO) {\n                    commit(SET_VIEW_MODE, VIDEO);\n                }\n                if (to.query.mode == DOWNLOAD || state.viewMode == DOWNLOAD) {\n                    commit(SET_VIEW_MODE, DOWNLOAD);\n                }\n                if (from.params.lang && !to.params.lang) {\n                    return router.push(getLangRoute(to, from.params.lang)).catch(() => {});\n                }\n                if (to.params.lang) {\n                    commit(SET_LANG, to.params.lang);\n                    i18n.locale = to.params.lang;\n                }\n                if (to.hash || (to.name && to.name.startsWith('magnet-uri')) || (to.name && to.name.startsWith('infohash'))) {\n                    let input = '';\n                    if (to.name && to.name.startsWith('infohash')) {\n                        input = to.params.infohash;\n                    } else if (to.name && to.name.startsWith('magnet-uri')) {\n                        input = decodeURIComponent(to.fullPath.substring(1));\n                        input = input.match(/magnet\\:.*/)[0];\n                    } else {\n                        input = to.hash.substring(1);\n                    }\n                    try {\n                        const data = parseTorrent(input);\n                        const magnet = parseTorrent.toMagnetURI(data);\n                        return router.push({\n                            name: 'show',\n                            query: {\n                                magnet,\n                            },\n                        }).catch(() => {});\n                    } catch (e) {\n                        debug(e);\n                    }\n                }\n                return next();\n            });\n        },\n        async getUserSettings({ commit }) {\n            if (!db) return;\n            const settings = await db.getUserSettings();\n            commit(SET_USER_SETTINGS, settings);\n        },\n        async updateUserSettings({ state }) {\n            const settings = {\n                captionSize: state.captionSize,\n            };\n            db.updateUserSettings(settings);\n        },\n        async getRecentTorrent(_, infoHash) {\n            return await db.pullTorrent(infoHash);\n        },\n        async getRecentTorrents({ commit }) {\n            if (!db) return;\n            const torrents = await db.getRecentTorrents();\n            const res = {};\n            for (const t of torrents) {\n                res[t.infoHash] = t;\n            }\n            commit(SET_RECENT_TORRENTS, res);\n        },\n        async updatePlayerStatus({commit}, status) {\n            message.send('player status', status);\n            commit(SET_PLAYER_STATUS_SUCCESS, status);\n        },\n        playerInited() {\n            message.send('inited');\n        },\n    };\n};","function prepareTrack(d) {\n    return {\n        autoselect: d.autoselect,\n        default: d.default,\n        forced: d.forced,\n        srclang: d.lang,\n        label: d.name,\n        src: d.url,\n        id: d.id,\n    };\n}\n\nconst state = () => ({\n    audio: [],\n    subtitles: [],\n});\n\nconst mutations = {\n    setSubtitles(state, subtitles) {\n        state.subtitles = subtitles;\n    },\n    setAudio(state, audio) {\n        state.audio = audio;\n    },\n};\n\nconst getters = {};\n\nconst actions = {\n    async updateSubtitles({ commit, dispatch }, subs) {\n        const r = [];\n        for (const s of subs) {\n            r.push(prepareTrack(s));\n        }\n        commit('setSubtitles', r);\n        dispatch('updateAttachedTracks', {}, {root: true});\n    },\n    async updateAudio({ commit }, audio) {\n        const r = [];\n        for (const a of audio) {\n            r.push(prepareTrack(a));\n        }\n        commit('setAudio', r);\n    },\n};\n\nexport default {\n    namespaced: true,\n    strict: true,\n    state,\n    getters,\n    actions,\n    mutations\n};","const state = () => ({\n    audio: null,\n    subtitle: null,\n    error: null,\n    availableDuration: 0,\n    duration: 0,\n    dropSubtitles: [],\n});\n\nconst mutations = {\n    setSubtitle(state, subtitle) {\n        state.subtitle = subtitle;\n    },\n    setAudio(state, audio) {\n        state.audio = audio;\n    },\n    setError(state, error) {\n        state.error = error;\n    },\n    setAvailableDuration(state, d) {\n        state.availableDuration = d;\n    },\n    setDuration(state, d) {\n        state.duration = d;\n    },\n    dropSubtitles(state, d) {\n        state.dropSubtitles = d;\n    },\n    clearSubtitleDrops(state) {\n        state.dropSubtitles = [];\n    },\n};\n\nconst getters = {\n    seeder: (state, getters, rootState, rootGetters)  => rootState.seeder,\n    filePath: (state, getters, rootState, rootGetters)  => rootGetters.filePath,\n};\n\nconst actions = {\n    async dropSubtitles({commit}, s) {\n        commit('dropSubtitles', s);\n    },\n    async clearSubtitleDrops({commit}) {\n        commit('clearSubtitleDrops');\n    },\n    async setSubtitle({commit, dispatch}, s) {\n        commit('setSubtitle', s);\n        // await dispatch('updateSource', {}, {root: true});\n        await dispatch('updateFileState', null, {root: true});\n        await dispatch('updateCaption', {}, {root: true});\n    },\n    async setAudio({commit, dispatch}, a) {\n        commit('setAudio', a);\n        // await dispatch('updateSource', {}, {root: true});\n        await dispatch('updateFileState', null, {root: true});\n    },\n    async updateAvailableDuration({commit, dispatch}, d) {\n        commit('setAvailableDuration', d);\n    },\n    async updateDuration({commit}, d) {\n        commit('setDuration', d);\n    },\n    async setError({dispatch, state, getters, commit}, e) {\n        try {\n            const err = await getters.seeder.error(getters.filePath);\n            if (err) {\n                let e = 'unknown error';\n                if (err.includes('probing failed')) {\n                    e = 'no peers for transcoding';\n                } else if (err.includes('context deadline exceeded')) {\n                    e = 'no peers for transcoding';\n                } else {\n                    e = err.split(': ').pop();\n                }\n                commit('setError', e);\n            }\n        } catch (e) {\n            console.log(e);\n            commit('setError', e.message);\n        }\n    },\n};\n\nexport default {\n    namespaced: true,\n    strict: true,\n    state,\n    getters,\n    actions,\n    mutations\n};","export default ['en', 'ru'];","import merge from 'deepmerge';\nimport dot from 'dot-object';\nimport arrayToText from './store/arrayToText';\nimport VueI18n from 'vue-i18n';\nimport Vue from 'vue';\nimport locale from 'locale';\nimport langs from './langs';\nconst debug = require('debug')('webtor:i18n');\nconst supported = new locale.Locales(langs);\nconst messages = {};\nfor (let l of langs) {\n  messages[l] = dot.dot(arrayToText(\n    merge(\n      require(`../i18n/common.json`),\n      require(`../i18n/${l}.json`),\n    )\n  ));\n}\nVue.use(VueI18n);\nexport function createI18n(locales) {\n  const bestLocale = locales.best(supported);\n  const lang = bestLocale.normalized;\n  return new VueI18n({\n    locale: lang,\n    fallbackLocale: 'en',\n    messages,\n    pluralizationRules: {\n      'ru': function(choice, choicesLength) {\n        if (choice === 0) {\n          return 0;\n        }\n        const teen = choice > 10 && choice < 20;\n        const endsWithOne = choice % 10 === 1;\n        if (choicesLength < 4) {\n          return (!teen && endsWithOne) ? 1 : 2;\n        }\n        if (!teen && endsWithOne) {\n          return 1;\n        }\n        if (!teen && choice % 10 >= 2 && choice % 10 <= 4) {\n          return 2;\n        }\n        return (choicesLength < 4) ? 2 : 3;\n      }\n    },\n  });\n}\n","import Vue from 'vue';\nimport MarkdownIt from 'markdown-it';\nlet inited = false;\nexport default function() {\n  if (inited) return;\n  inited = true;\n  const md = new MarkdownIt();\n  Object.defineProperty(Vue.prototype, '$tm', {\n    get() {\n      return (...args) => {\n        return md.renderInline(this.$t(...args));\n      };\n    },\n  });\n};\n","import './scss/custom.scss';\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport Meta from 'vue-meta';\nimport Icon from 'vue-awesome/components/Icon.vue';\nVue.component('icon', Icon)\nimport {LayoutPlugin, ButtonPlugin, NavbarPlugin, AlertPlugin, JumbotronPlugin,\n  ButtonGroupPlugin, ButtonToolbarPlugin, FormInputPlugin, LinkPlugin, FormTextareaPlugin,\n  FormSelectPlugin, FormPlugin, InputGroupPlugin} from 'bootstrap-vue';\nimport {CardPlugin, ListGroupPlugin, ProgressPlugin} from 'bootstrap-vue';\nimport {FormGroupPlugin, FormRadioPlugin} from 'bootstrap-vue';\nimport {ModalPlugin} from 'bootstrap-vue';\nVue.use(Vuex);\nVue.use(Meta);\nVue.use(LinkPlugin);\nVue.use(LayoutPlugin);\nVue.use(ButtonPlugin);\nVue.use(NavbarPlugin);\nVue.use(AlertPlugin);\nVue.use(JumbotronPlugin);\nVue.use(ButtonGroupPlugin);\nVue.use(ButtonToolbarPlugin)\nVue.use(FormInputPlugin);\nVue.use(FormTextareaPlugin);\nVue.use(FormSelectPlugin);\nVue.use(FormPlugin);\nVue.use(CardPlugin);\nVue.use(ListGroupPlugin);\nVue.use(ProgressPlugin);\nVue.use(FormGroupPlugin)\nVue.use(FormRadioPlugin)\nVue.use(InputGroupPlugin)\nVue.use(ModalPlugin)\nimport vClickOutside from 'v-click-outside';\nVue.use(vClickOutside);\n\nimport {createRouter} from './lib/router';\nimport {createStore} from './lib/store';\nimport {createI18n} from './lib/i18n';\nimport markdown from './lib/markdown';\nimport App from './components/App.vue';\nimport registry from './lib/registry';\n\nexport async function createApp({api, db, locales, routerMode, ext, debug, user, sdk, message, config, ssr, injectHash, injectCode}) {\n  const router = createRouter({mode: routerMode});\n  const i18n = createI18n(locales);\n  const store = createStore({router, db, api, i18n, locales, ext, debug, user, sdk, message, config, ssr, injectHash, injectCode});\n  store.dispatch('init');\n  registry.buildVue = (opts) => {\n    return new Vue({\n      i18n,\n      store,\n      router,\n      ...opts,\n    });\n  };\n  const app = registry.buildVue({\n    render: (h) => h(App),\n  })\n  markdown();\n  return {app, router, store};\n}\n","import Vuex from 'vuex';\n\nimport state from './store/state';\nimport mutations from './store/mutations';\nimport getters from './store/getters';\nimport actions from './store/actions';\nimport hls from './store/modules/hls';\nimport player from './store/modules/player';\n\nexport function createStore({router, i18n, ext, debug: deb, db, user, sdk, message, config, ssr, injectHash, injectCode, locales}) {\n  return new Vuex.Store({\n    modules: {\n      hls,\n      player,\n    },\n    strict: true,\n    state: state({user, deb, i18n, ssr, locales}),\n    mutations,\n    getters: getters({i18n, sdk, message, config}),\n    actions: actions({router, message, db, sdk, ext, i18n, injectHash, injectCode, config}),\n  });\n};\n","import { openDB, deleteDB, wrap, unwrap } from 'idb';\nconst md5 = require('md5');\nconst debug = require('debug')('webtor:lib:clientDb');\n\nclass Db {\n    getDb() {\n        if (this.db != undefined) return this.db;\n        this.db = openDB('webtor', 3, {\n            upgrade(db, oldVersion) {\n                if (oldVersion < 1) {\n                    const fileStore = db.createObjectStore('files', {\n                        keyPath: 'id',\n                    });\n                    db.createObjectStore('torrents', {\n                        keyPath: 'id',\n                    });\n                    fileStore.createIndex('hashAndPwd', 'hashAndPwd');\n                }\n                if (oldVersion < 2) {\n                    db.createObjectStore('recentTorrents', {\n                        keyPath: 'id',\n                    });\n                }\n                if (oldVersion < 3) {\n                    db.createObjectStore('userSettings', {\n                        keyPath: 'id',\n                    });\n                }\n            },\n        });\n        return this.db;\n    }\n    makeFileKey(data) {\n        return md5(data.infoHash + data.pwd + data.file);\n    }\n    makeHashAndPwd(data) {\n        return md5(data.infoHash + data.pwd);\n    }\n    async updateFileState(data) {\n        const id = this.makeFileKey(data);\n        const db = await this.getDb();\n        const hashAndPwd = this.makeHashAndPwd(data);\n        data.id = id;\n        data.hashAndPwd = hashAndPwd;\n        data.timestamp = Date.now();\n        await db.put('files', data);\n        return data;\n    }\n\n    async getFileState(data) { \n        const id = this.makeFileKey(data);\n        const db = await this.getDb();\n        return await db.get('files', id);\n    }\n    async getCurrentDirFileStates(data) { \n        const hashAndPwd = this.makeHashAndPwd(data);\n        const db = await this.getDb();\n        return await db.getAllFromIndex('files', 'hashAndPwd', hashAndPwd)\n    }\n    async pushTorrent(torrent) { \n        const db = await this.getDb();\n        const id = torrent.infoHash;\n        return await db.put('torrents', {id, torrent});\n    }\n    async pullTorrent(infoHash) { \n        const db = await this.getDb();\n        const data = await db.get('torrents', infoHash);\n        if (data) return data.torrent;\n        return null;\n    }\n    async setRecentTorrent(torrent, pwd) { \n        const db = await this.getDb();\n        const id = torrent.infoHash;\n        const name = torrent.name;\n        const infoHash = torrent.infoHash;\n        const timestamp = Date.now();\n        const data = {id, infoHash, name, pwd, timestamp};\n        await db.put('recentTorrents', data);\n        return data;\n    }\n    async getRecentTorrents() { \n        const db = await this.getDb();\n        return await db.getAll('recentTorrents');\n    }\n    async updateUserSettings(data) { \n        const db = await this.getDb();\n        data.id = 1;\n        return await db.put('userSettings', data);\n     }\n    async getUserSettings() {\n        const db = await this.getDb();\n        const data = await db.get('userSettings', 1);\n        if (!data) return {};\n        return data;\n    }\n}\n\nclass FakeDb {\n    async updateUserSettings(data) { }\n    async getUserSettings() { return {}; }\n    async updateFileState(data) { return {}; }\n    async getFileState(data) { return null; }\n    async getCurrentDirFileStates(data) { return []; }\n    async pushTorrent(data) { }\n    async pullTorrent(data) { return null; }\n    async setRecentTorrent(data) { return {}; }\n    async getRecentTorrents() { return []; }\n}\n\nexport async function createDb() {\n    if (!('indexedDB' in window)) {\n        debug('This browser doesn\\'t support IndexedDB');\n        return new FakeDb();\n    }\n    const db = new Db();\n    try {\n        await db.getUserSettings();\n    } catch(e) {\n        debug(e);\n        return new FakeDb();\n    }\n    return db;\n}","Object.assign(MediaElementPlayer.prototype, {\n    async builddownload(player, controls, layers) {\n        const store = this.options.store;\n        let {getters, dispatch} = store;\n        player.downloadButton = document.createElement('div');\n\t\tplayer.downloadButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}download-button`;\n\t\tplayer.downloadButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"></button>`;\n\t\tthis.addControlElement(player.downloadButton, 'download');\n        const t = (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            dispatch('download', '/' + getters.filePath);\n        }\n        player.downloadButton.addEventListener('click', t);\n    },\n})","const debug = require('debug')('webtor:lib:message');\nfunction inIframe() {\n  try {\n      return window.self !== window.top;\n  } catch (e) {\n      return true;\n  }\n}\nconst urlParams = new URLSearchParams(window.location.search);\nconst id = urlParams.get('id');\ndebug('using message id=%o', id);\nconst message = {\n  id() {\n    return id;\n  },\n  send(m, data = {}) {\n    if (!inIframe) return;\n    if (!id) {\n      m = 'webtor: ' + m;\n    } else {\n      m = {\n        id,\n        name: m,\n        data,\n      };\n    }\n    debug('post message=%o data=%o', m, data);\n    window.parent.postMessage(m, '*');\n  },\n  receiveOnce(name) {\n    return new Promise((resolve, reject) => {\n      const func = (event) => {\n        const d = event.data;\n        if (!id) {\n          window.removeEventListener('message', func);\n          resolve();\n        }\n        if (d.id == id && d.name == name) {\n            debug('receive message=%o', d);\n            window.removeEventListener('message', func);\n            resolve(d.data);\n        }\n      }\n      window.addEventListener('message', func);\n    });\n  },\n  receive(name, callback) {\n    window.addEventListener('message', function(event) {\n        const d = event.data;\n        if (d.id == id && d.name == name) {\n            debug('receive message=%o', d);\n            callback(d.data);\n        }\n    });\n  }\n}\nexport default message;","import {createApp} from './index';\nimport {createDb} from './lib/clientDb';\nimport {analytics} from './lib/analytics';\nimport {createExt} from './lib/ext';\nimport locale from 'locale';\nimport message from './lib/message';\nimport webtor from '@webtor/platform-sdk-js';\nlet url = (window.location != window.parent.location)\n      ? document.referrer\n      : document.location.href;\nif (url) url = new URL(url);\nlet token = window.__TOKEN__;\nlet user = window.__USER__;\nlet config = JSON.parse(Buffer.from(window.__CONFIG__, 'base64').toString('utf-8'));\nlet injectCode = window.__INJECT_CODE__;\nlet injectHash = window.__INJECT_HASH__;\nif (window.__INITIAL_STATE__ && window.__INITIAL_STATE__.user) {\n  user = window.__INITIAL_STATE__.user;\n}\n\nconst sdk = webtor(Object.assign({\n  async getToken() {\n    if (!token) return null;\n    const res = await fetch('/token/', {\n      headers: {\n        token,\n      },\n    });\n    token = await res.text();\n    return token;\n  },\n}, config.sdk));\nif (config.ga) {\n  analytics(Object.assign({\n    appVersion: require('../../package.json').version,\n  }, config.ga));\n}\nconst ext = createExt();\nconst routerMode = null;\nconst lang = window.navigator.userLanguage || window.navigator.language;\nconst locales = new locale.Locales(lang);\nlet debug = false;\ntry {\n  debug = localStorage && !!localStorage.debug;\n} catch (e) {\n  console.log(e);\n}\n(async () => {\n  const db = await createDb();\n  const {app, router, store} = await createApp({locales,\n    routerMode, ext, debug, db, user, sdk, message, url, config, ssr: false, injectCode, injectHash});\n  if (window.__INITIAL_STATE__) {\n    window.__INITIAL_STATE__.ssr = false;\n    store.replaceState(window.__INITIAL_STATE__);\n  }\n  router.onReady(async() => {\n    app.$mount('#app');\n    store.dispatch('updateWindowWidth');\n  });\n})()\n","import parseTorrent from 'parse-torrent';\nexport default function fileToTorrent(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('load', (e) => {\n      const arr = new Uint8Array(e.target.result);\n      const buffer = new Buffer(arr);\n      try {\n        resolve(parseTorrent(buffer));\n      } catch(e) {\n        reject(e);\n      }\n    });\n    reader.addEventListener('error', (err) => {\n      reject(err);\n    });\n    reader.readAsArrayBuffer(file);\n  });\n};\n","import Settings from '../../components/App/Show/Player/MediaElement/Settings.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async buildsettings(player, controls, layers) {\n        const store = this.options.store;\n        let {state, getters, dispatch} = store;\n        // if (getters.deliveryType !== 'webseed') {\n        //     await dispatch('getMediaInfo');\n        // }\n        player.settingsButton = document.createElement('div');\n\t\tplayer.settingsButton.className = `${this.options.classPrefix}button ${this.options.classPrefix}settings-button`;\n\t\tplayer.settingsButton.innerHTML =\n\t\t\t`<button type=\"button\" role=\"button\" aria-owns=\"${this.id}\" tabindex=\"0\"></button>`;\n\t\tthis.addControlElement(player.settingsButton, 'settings');\n        player.settingsLayer = document.createElement('div');\n        player.settingsLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}settings`;\n        const settingsContainer = document.createElement('div');\n        player.settingsLayer.appendChild(settingsContainer);\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        // playLayer.style.display = 'none';\n\n        layers.insertBefore(player.settingsLayer, playLayer);\n        player.settingsLayer.style.width = '100%';\n        player.settingsLayer.style.height = '100%';\n        // player.settingsLayer.click = function(e) {\n        //     console.log(e);\n        //     e.preventDefault();\n        //     return false;\n        // }\n        let toggle = false;\n        const t = () => {\n            if (toggle) {\n                player.settingsLayer.style.display = 'none';\n            } else {\n                player.settingsLayer.style.display = '';\n            }\n            toggle = !toggle;\n        }\n        registry.buildVue({\n            el: settingsContainer,\n            render: (h) => h(Settings, {on: {\n                close: t,\n            }}),\n        });\n        player.settingsLayer.style.display = 'none';\n        player.settingsLayer.style.zIndex = 2;\n        player.settingsButton.addEventListener('click', t);\n    },\n})","export const PLAY = 'PLAY';\nexport const PLAYING = 'PLAYING';\nexport const PAUSE = 'PAUSE';\nexport const ENDED = 'ENDED';\nexport const SEEKING = 'SEEKING';\nexport const SEEKED = 'SEEKED';\nexport const IDLE = 'IDLE';\n","const nameSuffix = '_with_lang';\nexport function getLangRoute(current, lang = null) {\n  const params = Object.assign({}, current.params);\n  let name = current.name;\n  if (lang) {\n    params.lang = lang;\n    name = current.meta.lang ? current.name : current.name + nameSuffix;\n\n  } else {\n    delete params['lang'];\n    name = current.meta.lang ? current.name.replace(nameSuffix, '') : current.name;\n  }\n  return {\n    name,\n    params,\n    query: current.query,\n    hash: current.hash,\n  };\n}\nexport function addLangRoutes(routes) {\n  const routesWithLang = routes.map((r) => {\n    return {\n      ...r,\n      path: `/:lang${r.path}`,\n      name: r.name + nameSuffix,\n      meta: {\n        lang: true,\n      },\n      pathToRegexpOptions: {strict: true},\n    };\n  });\n  return routes.concat(routesWithLang);\n}\n","export function checkAdBlock() {\n    return new Promise((resolve, reject) => {\n        let adBlockEnabled = false;\n        let testAd = document.createElement('div');\n        testAd.innerHTML = '&nbsp;';\n        testAd.className = 'adsbox';\n        document.body.appendChild(testAd);\n        setTimeout(function() {\n            if (testAd.offsetHeight === 0) {\n                adBlockEnabled = true;\n            }\n            testAd.remove();\n            resolve(adBlockEnabled);\n        }, 100);\n    });\n};\n","import {getLangRoute} from './langRoutes';\nexport function getLangLinks(translations, route, router, baseURL, lang) {\n    const res = [];\n    for (const key in translations) {\n        const r = getLangRoute(route, key);\n        const href = baseURL + router.resolve(r).href.replace('#', '');\n        res.push({rel: 'alternate', hreflang: key, href})\n        if (key == lang) {\n            res.push({rel: 'canonical', hreflang: key, href})\n        }\n    }\n    return res;\n}","import Error from '../../components/App/Show/Player/MediaElement/Error.vue';\n\nimport registry from '../registry';\n\nObject.assign(MediaElementPlayer.prototype, {\n    async builderror(player, controls, layers) {\n        const store = this.options.store;\n        player.errorLayer = document.createElement('div');\n        player.errorLayer.className = `${this.options.classPrefix}layer ${this.options.classPrefix}overlay ${this.options.classPrefix}error`;\n        const errorContainer = document.createElement('div');\n        player.errorLayer.appendChild(errorContainer);\n        player.errorLayer.style.width = '100%';\n        player.errorLayer.style.height = '100%';\n        player.errorLayer.style.display = 'none';\n        const playLayer = layers.querySelector(`.${this.options.classPrefix}overlay-play`);\n        player.media.addEventListener('error', function(e) {\n            player.errorLayer.style.display = '';\n        });\n        layers.insertBefore(player.errorLayer, playLayer);\n        registry.buildVue({\n            el: errorContainer,\n            render: (h) => h(Error),\n        });\n    },\n})","export default function(pieces, piecesLength, progressLength) {\n    const segments = [];\n    let curSegment = null; \n    let prevPiece = null; \n    for (const p of pieces) {\n    if (prevPiece != null) {\n        if ((p.position - 1) != prevPiece.position) {\n        if (curSegment != null) {\n            segments.push(curSegment);\n        }\n        curSegment = {start: p.position, end: p.position + 1};\n        } else {\n        if (curSegment != null) {\n            curSegment.end = p.position + 1;\n        }\n        }\n    } else {\n        curSegment = {start: p.position, end: p.position + 1};\n    }\n    prevPiece = p;\n    }\n    if (curSegment != null) {\n    segments.push(curSegment);\n    }\n    for (const i in segments) {\n    segments[i] = {\n        start: segments[i].start / piecesLength * progressLength,\n        end:   segments[i].end   / piecesLength * progressLength,\n    };\n    }\n    return segments;\n}"],"sourceRoot":""}